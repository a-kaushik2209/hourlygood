/*! For license information please see main.9d247bd3.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}function v(){}function x(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=x.prototype=new v;w.constructor=x,g(w,y.prototype),w.isPureReactComponent=!0;var b=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function j(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),j(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",b(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=j(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=j(a=a.value,t,i,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return j(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},L={transition:null},P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:L,ReactCurrentOwner:_};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=_.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,L(k);else{var t=r(u);null!==t&&P(b,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(T),T=-1),f=!0;var s=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!j());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(b,d.startTime-n),l=!1}return l}finally{h=null,p=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,S=!1,E=null,T=-1,C=5,I=-1;function j(){return!(t.unstable_now()-I<C)}function R(){if(null!==E){var e=t.unstable_now();I=e;var n=!0;try{n=E(!0,e)}finally{n?_():(S=!1,E=null)}}else S=!1}if("function"===typeof x)_=function(){x(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,A=N.port2;N.port1.onmessage=R,_=function(){A.postMessage(null)}}else _=function(){y(R,0)};function L(e){E=e,S||(S=!0,_())}function P(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,L(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(T),T=-1):m=!0,P(b,s-o))):(e.sortIndex=a,n(c,e),g||f||(g=!0,L(k))),e},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var O,M=Object.assign;function U(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var F=!1;function B(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case k:return"Portal";case E:return"Profiler";case S:return"StrictMode";case j:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){X(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,_e=null,Se=null;function Ee(e){if(e=wi(e)){if("function"!==typeof ke)throw Error(s(280));var t=e.stateNode;t&&(t=ki(t),ke(e.stateNode,e.type,t))}}function Te(e){_e?Se?Se.push(e):Se=[e]:_e=e}function Ce(){if(_e){var e=_e,t=Se;if(Se=_e=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ie(e,t){return e(t)}function je(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==_e||null!==Se)&&(je(),Ce())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=ki(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Le=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Le=!1}function De(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Me=null,Ue=!1,Fe=null,Be={onError:function(e){Oe=!0,Me=e}};function ze(e,t,n,r,i,s,o,a,l){Oe=!1,Me=null,De.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Ve(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return qe(i),e;if(o===r)return qe(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,kt,_t,St,Et,Tt=!1,Ct=[],It=null,jt=null,Rt=null,Nt=new Map,At=new Map,Lt=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=xi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Tt=!1,null!==It&&Ft(It)&&(It=null),null!==jt&&Ft(jt)&&(jt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Nt.forEach(Bt),At.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Wt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==jt&&Vt(jt,e),null!==Rt&&Vt(Rt,e),Nt.forEach(t),At.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Lt.shift()}var qt=w.ReactCurrentBatchConfig,Ht=!0;function $t(e,t,n,r){var i=xt,s=qt.transition;qt.transition=null;try{xt=1,Gt(e,t,n,r)}finally{xt=i,qt.transition=s}}function Kt(e,t,n,r){var i=xt,s=qt.transition;qt.transition=null;try{xt=4,Gt(e,t,n,r)}finally{xt=i,qt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Qt,n),Ot(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Mt(It,e,t,n,r,i),!0;case"dragenter":return jt=Mt(jt,e,t,n,r,i),!0;case"mouseover":return Rt=Mt(Rt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Nt.set(s,Mt(Nt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,At.set(s,Mt(At.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Ot(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&bt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=xi(e=be(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function sn(){return!1}function on(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:sn,this.isPropagationStopped=sn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var an,ln,cn,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=on(un),hn=M({},un,{view:0,detail:0}),pn=on(hn),fn=M({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=on(fn),mn=on(M({},fn,{dataTransfer:0})),yn=on(M({},hn,{relatedTarget:0})),vn=on(M({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=M({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(xn),bn=on(M({},un,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return En}var Cn=M({},hn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=on(Cn),jn=on(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(M({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=on(M({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=on(An),Pn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,On=null;u&&"documentMode"in document&&(On=document.documentMode);var Mn=u&&"TextEvent"in window&&!On,Un=u&&(!Dn||On&&8<On&&11>=On),Fn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function $n(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(K(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Zn=er}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function nr(){Kn&&(Kn.detachEvent("onpropertychange",rr),Gn=Kn=null)}function rr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];$n(t,Gn,e,be(e)),Ne(Qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Gn=n,(Kn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=pr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var o=dr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,vr=null,xr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&cr(xr,r)||(xr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function kr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:kr("Animation","AnimationEnd"),animationiteration:kr("Animation","AnimationIteration"),animationstart:kr("Animation","AnimationStart"),transitionend:kr("Transition","TransitionEnd")},Sr={},Er={};function Tr(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return Sr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Tr("animationend"),Ir=Tr("animationiteration"),jr=Tr("animationstart"),Rr=Tr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Nr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Dr=Ar[Pr];Lr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Lr(Cr,"onAnimationEnd"),Lr(Ir,"onAnimationIteration"),Lr(jr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(ze.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Me;Oe=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ur(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=$t;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=xi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ne((function(){var r=s,i=be(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=dn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Cr:case Ir:case jr:l=vn;break;case Rr:l=Nn;break;case"scroll":l=pn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==h&&(null!=(g=Ae(f,h))&&u.push($r(f,g,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!xi(c)&&!c[gi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xi(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,g="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:bi(l),p=null==c?a:bi(c),(a=new u(g,f+"leave",l,n,i)).target=d,a.relatedTarget=p,g=null,xi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,g=u),d=g,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gr(p))f++;for(p=0,g=h;g;g=Gr(g))p++;for(;0<f-p;)u=Gr(u),f--;for(;0<p-f;)h=Gr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Hn(a))if(Jn)m=ar;else{m=sr;var y=ir}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?$n(o,m,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(yr=y,vr=r,xr=null);break;case"focusout":xr=vr=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Wn?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Wn&&(v=tn()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,Wn=!0)),0<(y=Kr(r,x)).length&&(x=new bn(x,e,null,n,i),o.push({event:x,listeners:y}),v?x.data=v:null!==(v=Vn(n))&&(x.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Wn)return"compositionend"===e||!Dn&&zn(e,t)?(e=tn(),en=Zt=Jt=null,Wn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Fr(o,t)}))}function $r(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ae(e,n))&&r.unshift($r(e,s,i)),null!=(s=Ae(e,t))&&r.push($r(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Ae(n,s))&&o.unshift($r(n,l,a)):i||null!=(l=Ae(n,s))&&o.push($r(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,si="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Wt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Wt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),pi="__reactFiber$"+hi,fi="__reactProps$"+hi,gi="__reactContainer$"+hi,mi="__reactEvents$"+hi,yi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function xi(e){var t=e[pi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[pi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[pi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[pi]||e[gi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function ki(e){return e[fi]||null}var _i=[],Si=-1;function Ei(e){return{current:e}}function Ti(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ci(e,t){Si++,_i[Si]=e.current,e.current=t}var Ii={},ji=Ei(Ii),Ri=Ei(!1),Ni=Ii;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Li(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pi(){Ti(Ri),Ti(ji)}function Di(e,t,n){if(ji.current!==Ii)throw Error(s(168));Ci(ji,t),Ci(Ri,n)}function Oi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return M({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ni=ji.current,Ci(ji,e),Ci(Ri,Ri.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Oi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ri),Ti(ji),Ci(ji,e)):Ti(Ri),Ci(Ri,n)}var Fi=null,Bi=!1,zi=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function Wi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=xt;try{var n=Fi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Wi),i}finally{xt=t,zi=!1}}return null}var qi=[],Hi=0,$i=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function Zi(e,t){qi[Hi++]=Ki,qi[Hi++]=$i,$i=e,Ki=t}function es(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else Xi=1<<s|n<<i|r,Ji=e}function ts(e){null!==e.return&&(Zi(e,1),es(e,1,0))}function ns(e){for(;e===$i;)$i=qi[--Hi],qi[Hi]=null,Ki=qi[--Hi],qi[Hi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var rs=null,is=null,ss=!1,os=null;function as(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ls(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rs=e,is=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rs=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,rs=e,is=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(ss){var t=is;if(t){var n=t;if(!ls(e,t)){if(cs(e))throw Error(s(418));t=ui(n.nextSibling);var r=rs;t&&ls(e,t)?as(r,n):(e.flags=-4097&e.flags|2,ss=!1,rs=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,ss=!1,rs=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rs=e}function hs(e){if(e!==rs)return!1;if(!ss)return ds(e),ss=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=is)){if(cs(e))throw ps(),Error(s(418));for(;t;)as(e,t),t=ui(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=rs?ui(e.stateNode.nextSibling):null;return!0}function ps(){for(var e=is;e;)e=ui(e.nextSibling)}function fs(){is=rs=null,ss=!1}function gs(e){null===os?os=[e]:os.push(e)}var ms=w.ReactCurrentBatchConfig;function ys(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xs(e){return(0,e._init)(e._payload)}function ws(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===_?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&xs(s)===t.type)?((r=i(t,n.props)).ref=ys(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ys(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ys(e,null,t),n.return=e,n;case k:return(t=Fc(t,e.mode,n)).return=e,t;case A:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case A:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function g(i,s,a,l){for(var c=null,u=null,d=s,g=s=0,m=null;null!==d&&g<a.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=p(i,d,a[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(i,d),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,d=m}if(g===a.length)return n(i,d),ss&&Zi(i,g),c;if(null===d){for(;g<a.length;g++)null!==(d=h(i,a[g],l))&&(s=o(d,s,g),null===u?c=d:u.sibling=d,u=d);return ss&&Zi(i,g),c}for(d=r(i,d);g<a.length;g++)null!==(m=f(d,i,g,a[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(i,e)})),ss&&Zi(i,g),c}function m(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var x=p(i,g,v.value,c);if(null===x){null===g&&(g=y);break}e&&g&&null===x.alternate&&t(i,g),a=o(x,a,m),null===d?u=x:d.sibling=x,d=x,g=y}if(v.done)return n(i,g),ss&&Zi(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=o(v,a,m),null===d?u=v:d.sibling=v,d=v);return ss&&Zi(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=f(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(i,e)})),ss&&Zi(i,m),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===_){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&xs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=ys(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===_?((s=Oc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Dc(o.type,o.key,o.props,null,r.mode,l)).ref=ys(r,s,o),l.return=r,r=l)}return a(r);case k:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case A:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return g(r,s,o,l);if(D(o))return m(r,s,o,l);vs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var bs=ws(!0),ks=ws(!1),_s=Ei(null),Ss=null,Es=null,Ts=null;function Cs(){Ts=Es=Ss=null}function Is(e){var t=_s.current;Ti(_s),e._currentValue=t}function js(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Rs(e,t){Ss=e,Ts=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(Ts!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===Ss)throw Error(s(308));Es=e,Ss.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var As=null;function Ls(e){null===As?As=[e]:As.push(e)}function Ps(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ls(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Os=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Us(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Ls(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ws(e,t,n,r){var i=e.updateQueue;Os=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,g=a;switch(h=t,p=n,g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(p,d,h):f)||void 0===h)break e;d=M({},d,h);break e;case 2:Os=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=o,e.lanes=o,e.memoizedState=d}}function qs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},$s=Ei(Hs),Ks=Ei(Hs),Gs=Ei(Hs);function Qs(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Ci(Gs,t),Ci(Ks,e),Ci($s,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti($s),Ci($s,t)}function Xs(){Ti($s),Ti(Ks),Ti(Gs)}function Js(e){Qs(Gs.current);var t=Qs($s.current),n=le(t,e.type);t!==n&&(Ci(Ks,e),Ci($s,n))}function Zs(e){Ks.current===e&&(Ti($s),Ti(Ks))}var eo=Ei(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=w.ReactCurrentDispatcher,so=w.ReactCurrentBatchConfig,oo=0,ao=null,lo=null,co=null,uo=!1,ho=!1,po=0,fo=0;function go(){throw Error(s(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,o){if(oo=o,ao=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?ea:ta,e=n(r,i),ho){o=0;do{if(ho=!1,po=0,25<=o)throw Error(s(301));o+=1,co=lo=null,t.updateQueue=null,io.current=na,e=n(r,i)}while(ho)}if(io.current=Zo,t=null!==lo&&null!==lo.next,oo=0,co=lo=ao=null,uo=!1,t)throw Error(s(300));return e}function vo(){var e=0!==po;return po=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?ao.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===lo){var e=ao.alternate;e=null!==e?e.memoizedState:null}else e=lo.next;var t=null===co?ao.memoizedState:co.next;if(null!==t)co=t,lo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(lo=e).memoizedState,baseState:lo.baseState,baseQueue:lo.baseQueue,queue:lo.queue,next:null},null===co?ao.memoizedState=co=e:co=co.next=e}return co}function bo(e,t){return"function"===typeof t?t(e):t}function ko(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=lo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((oo&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,ao.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,lr(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ao.lanes|=o,Ml|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=wo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);lr(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function So(){}function Eo(e,t){var n=ao,r=wo(),i=t(),o=!lr(r.memoizedState,i);if(o&&(r.memoizedState=i,wa=!0),r=r.queue,Mo(Io.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Ao(9,Co.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(s(349));0!==(30&oo)||To(n,t,i)}return i}function To(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Co(e,t,n,r){t.value=n,t.getSnapshot=r,jo(t)&&Ro(e)}function Io(e,t,n){return n((function(){jo(t)&&Ro(e)}))}function jo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ro(e){var t=Ds(e,1);null!==t&&rc(t,e,1,-1)}function No(e){var t=xo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Qo.bind(null,ao,e),[t.memoizedState,e]}function Ao(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ao.updateQueue)?(t={lastEffect:null,stores:null},ao.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return wo().memoizedState}function Po(e,t,n,r){var i=xo();ao.flags|=e,i.memoizedState=Ao(1|t,n,void 0,void 0===r?null:r)}function Do(e,t,n,r){var i=wo();r=void 0===r?null:r;var s=void 0;if(null!==lo){var o=lo.memoizedState;if(s=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Ao(t,n,s,r))}ao.flags|=e,i.memoizedState=Ao(1|t,n,s,r)}function Oo(e,t){return Po(8390656,8,e,t)}function Mo(e,t){return Do(2048,8,e,t)}function Uo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function Bo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Bo.bind(null,t,e),n)}function Vo(){}function Wo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function qo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&oo)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(lr(n,t)||(n=gt(),ao.lanes|=n,Ml|=n,e.baseState=!0),t)}function $o(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{xt=n,so.transition=r}}function Ko(){return wo().memoizedState}function Go(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(t,n);else if(null!==(n=Ps(e,t,n,r))){rc(n,e,r,tc()),Jo(n,t,r)}}function Qo(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,lr(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ls(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ps(e,t,i,r))&&(rc(n,e,r,i=tc()),Jo(n,t,r))}}function Yo(e){var t=e.alternate;return e===ao||null!==t&&t===ao}function Xo(e,t){ho=uo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Jo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Zo={readContext:Ns,useCallback:go,useContext:go,useEffect:go,useImperativeHandle:go,useInsertionEffect:go,useLayoutEffect:go,useMemo:go,useReducer:go,useRef:go,useState:go,useDebugValue:go,useDeferredValue:go,useTransition:go,useMutableSource:go,useSyncExternalStore:go,useId:go,unstable_isNewReconciler:!1},ea={readContext:Ns,useCallback:function(e,t){return xo().memoizedState=[e,void 0===t?null:t],e},useContext:Ns,useEffect:Oo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Po(4194308,4,Bo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Po(4194308,4,e,t)},useInsertionEffect:function(e,t){return Po(4,2,e,t)},useMemo:function(e,t){var n=xo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Go.bind(null,ao,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:No,useDebugValue:Vo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=$o.bind(null,e[1]),xo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ao,i=xo();if(ss){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!==(30&oo)||To(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Oo(Io.bind(null,r,o,e),[e]),r.flags|=2048,Ao(9,Co.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=xo(),t=Rl.identifierPrefix;if(ss){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=po++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ta={readContext:Ns,useCallback:Wo,useContext:Ns,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:qo,useReducer:ko,useRef:Lo,useState:function(){return ko(bo)},useDebugValue:Vo,useDeferredValue:function(e){return Ho(wo(),lo.memoizedState,e)},useTransition:function(){return[ko(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1},na={readContext:Ns,useCallback:Wo,useContext:Ns,useEffect:Mo,useImperativeHandle:zo,useInsertionEffect:Uo,useLayoutEffect:Fo,useMemo:qo,useReducer:_o,useRef:Lo,useState:function(){return _o(bo)},useDebugValue:Vo,useDeferredValue:function(e){var t=wo();return null===lo?t.memoizedState=e:Ho(t,lo.memoizedState,e)},useTransition:function(){return[_o(bo)[0],wo().memoizedState]},useMutableSource:So,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(rc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(rc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bs(e,i,r))&&(rc(t,e,r,n),zs(t,e,r))}};function oa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function aa(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ns(s):(i=Li(t)?Ni:ji.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function la(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ns(s):(s=Li(t)?Ni:ji.current,i.context=Ai(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&sa.enqueueReplaceState(i,i.state,null),Ws(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,$l=r),ha(0,t)},n}function ga(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var xa=w.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?ks(t,null,n,r):bs(t,e.child,n,r)}function ka(e,t,n,r,i){n=n.render;var s=t.ref;return Rs(t,i),r=yo(e,t,n,r,s,i),n=vo(),null===e||wa?(ss&&n&&ts(t),t.flags|=1,ba(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function _a(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ha(e,t,i)}return t.flags|=1,(e=Pc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ha(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ca(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Pl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Pl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ci(Pl,Ll),Ll|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ci(Pl,Ll),Ll|=r;return ba(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Li(n)?Ni:ji.current;return s=Ai(t,s),Rs(t,i),n=yo(e,t,n,r,s,i),r=vo(),null===e||wa?(ss&&r&&ts(t),t.flags|=1,ba(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ha(e,t,i))}function Ia(e,t,n,r,i){if(Li(n)){var s=!0;Mi(t)}else s=!1;if(Rs(t,i),null===t.stateNode)qa(e,t),aa(t,n,r),ca(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ns(c):c=Ai(t,c=Li(n)?Ni:ji.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&la(t,o,r,c),Os=!1;var h=t.memoizedState;o.state=h,Ws(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ri.current||Os?("function"===typeof u&&(ia(t,n,u,r),l=t.memoizedState),(a=Os||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Us(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ns(l):l=Ai(t,l=Li(n)?Ni:ji.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&la(t,o,r,l),Os=!1,h=t.memoizedState,o.state=h,Ws(t,r,o,i);var f=t.memoizedState;a!==d||h!==f||Ri.current||Os?("function"===typeof p&&(ia(t,n,p,r),f=t.memoizedState),(c=Os||oa(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ja(e,t,n,r,s,i)}function ja(e,t,n,r,i,s){Ta(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Ui(t,n,!1),Ha(e,t,s);r=t.stateNode,xa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Na(e,t,n,r,i){return fs(),gs(i),t.flags|=256,ba(e,t,n,r),t.child}var Aa,La,Pa,Da,Oa={dehydrated:null,treeContext:null,retryLane:0};function Ma(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=eo.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(eo,1&o),null===e)return us(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Mc(l,i,0,null),e=Oc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ma(n),t.memoizedState=Oa,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Oc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=Ma(a),t.memoizedState=Oa,o);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ds(e,i),rc(r,e,i,-1))}return mc(),Ba(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,is=ui(i.nextSibling),rs=t,ss=!0,os=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Pc(r,a):(a=Oc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ma(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Oa,i}return e=(a=e.child).sibling,i=Pc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&gs(r),bs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),js(e.return,t,n)}function Va(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Wa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,s);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function $a(e,t){if(!ss)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ga(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Li(t.type)&&Pi(),Ka(t),null;case 3:return r=t.stateNode,Xs(),Ti(Ri),Ti(ji),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==os&&(ac(os),os=null))),La(e,t),Ka(t),null;case 5:Zs(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Pa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Qs($s.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[pi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ve(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":$(r),Z(r,o,!0);break;case"textarea":$(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[pi]=t,e[fi]=r,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Br(Or[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=M({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ve(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Br("scroll",e):null!=u&&x(e,o,u,l))}switch(n){case"input":$(e),Z(e,r,!1);break;case"textarea":$(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs($s.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[pi]=t,(o=r.nodeValue!==n)&&null!==(e=rs))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[pi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Ti(eo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ss&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ps(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[pi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==os&&(ac(os),os=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return Xs(),La(e,t),null===e&&Wr(t.stateNode.containerInfo),Ka(t),null;case 10:return Is(t.type._context),Ka(t),null;case 19:if(Ti(eo),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)$a(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=to(e))){for(t.flags|=128,$a(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Wl&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),$a(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ss)return Ka(t),null}else 2*Xe()-o.renderingStartTime>Wl&&1073741824!==n&&(t.flags|=128,r=!0,$a(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=eo.current,Ci(eo,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qa(e,t){switch(ns(t),t.tag){case 1:return Li(t.type)&&Pi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xs(),Ti(Ri),Ti(ji),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zs(t),null;case 13:if(Ti(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(eo),null;case 4:return Xs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},La=function(){},Pa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs($s.current);var s,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=M({},i,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[pi],delete t[fi],delete t[mi],delete t[yi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Wt(e)):ci(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,pl(e,t,n),Xa=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));fl(o,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Ec(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(i,o),xe(l,a);var u=xe(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?me(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):x(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;null!=f?ne(i,!!o.multiple,f,!1):p!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||d,ml(t,e),Xa=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(f=(p=Za).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){kl(h);continue}}null!==f?(f.return=p,Za=f):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ya;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Ya;var c=Xa;if(Ya=o,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?_l(i):null!==l?(l.return=o,Za=l):_l(i);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=i,Ya=a,Xa=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):bl(e)}}function bl(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ra(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&qs(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Wt(h)}}}break;default:throw Error(s(163))}Xa||512&t.flags&&sl(t)}catch(p){Ec(t,t.return,p)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function _l(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Ec(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,El=Math.ceil,Tl=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,jl=0,Rl=null,Nl=null,Al=0,Ll=0,Pl=Ei(0),Dl=0,Ol=null,Ml=0,Ul=0,Fl=0,Bl=null,zl=null,Vl=0,Wl=1/0,ql=null,Hl=!1,$l=null,Kl=null,Gl=!1,Ql=null,Yl=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&jl)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Al?Al&-Al:null!==ms.transition?(0===ec&&(ec=gt()),ec):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(s(185));yt(e,n,r),0!==(2&jl)&&e===Rl||(e===Rl&&(0===(2&jl)&&(Ul|=n),4===Dl&&lc(e,Al)),ic(e,r),1===n&&0===jl&&0===(1&t.mode)&&(Wl=Xe()+500,Bi&&Wi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=pt(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Rl?Al:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),ai((function(){0===(6&jl)&&Wi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&jl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Rl?Al:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=jl;jl|=2;var o=gc();for(Rl===e&&Al===t||(ql=null,Wl=Xe()+500,pc(e,t));;)try{xc();break}catch(l){fc(e,l)}Cs(),Tl.current=o,jl=i,null!==Nl?t=0:(Rl=null,Al=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ol,pc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!lr(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=ft(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ol,pc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:kc(e,zl,ql);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(kc.bind(null,e,zl,ql),t);break}kc(e,zl,ql);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ii(kc.bind(null,e,zl,ql),r);break}kc(e,zl,ql);break;default:throw Error(s(329))}}}return ic(e,Xe()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&jl))throw Error(s(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ol,pc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,zl,ql),ic(e,Xe()),null}function uc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(Wl=Xe()+500,Bi&&Wi())}}function dc(e){null!==Ql&&0===Ql.tag&&0===(6&jl)&&_c();var t=jl;jl|=1;var n=Il.transition,r=xt;try{if(Il.transition=null,xt=1,e)return e()}finally{xt=r,Il.transition=n,0===(6&(jl=t))&&Wi()}}function hc(){Ll=Pl.current,Ti(Pl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,si(n)),null!==Nl)for(n=Nl.return;null!==n;){var r=n;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pi();break;case 3:Xs(),Ti(Ri),Ti(ji),ro();break;case 5:Zs(r);break;case 4:Xs();break;case 13:case 19:Ti(eo);break;case 10:Is(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Rl=e,Nl=e=Pc(e.current,null),Al=Ll=t,Dl=0,Ol=null,Fl=Ul=Ml=0,zl=Bl=null,null!==As){for(t=0;t<As.length;t++)if(null!==(r=(n=As[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}As=null}return e}function fc(e,t){for(;;){var n=Nl;try{if(Cs(),io.current=Zo,uo){for(var r=ao.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}uo=!1}if(oo=0,co=lo=ao=null,ho=!1,po=0,Cl.current=null,null===n||null===n.return){Dl=1,Ol=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ya(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(o,u,t),c=u;var g=(t=f).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(ss&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),gs(ua(c,l));break e}}o=c=ua(c,l),4!==Dl&&(Dl=2),null===Bl?Bl=[o]:Bl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,fa(0,c,t));break e;case 1:l=c;var v=o.type,x=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Kl||!Kl.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t,Vs(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function gc(){var e=Tl.current;return Tl.current=Zo,null===e?Zo:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Rl||0===(268435455&Ml)&&0===(268435455&Ul)||lc(Rl,Al)}function yc(e,t){var n=jl;jl|=2;var r=gc();for(Rl===e&&Al===t||(ql=null,pc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Cs(),jl=n,Tl.current=r,null!==Nl)throw Error(s(261));return Rl=null,Al=0,Dl}function vc(){for(;null!==Nl;)wc(Nl)}function xc(){for(;null!==Nl&&!Qe();)wc(Nl)}function wc(e){var t=Sl(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bc(e):Nl=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Ll)))return void(Nl=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Dl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Dl&&(Dl=5)}function kc(e,t,n){var r=xt,i=Il.transition;try{Il.transition=null,xt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&jl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Rl&&(Nl=Rl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Rc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Il.transition,Il.transition=null;var a=xt;xt=1;var l=jl;jl|=4,Cl.current=null,function(e,t){if(ti=Ht,fr(e=pr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(Dt){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===o&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ra(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(Dt){Ec(t,t.return,Dt)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),yl(n,e),gr(ni),Ht=!!ti,ni=ti=null,e.current=n,xl(n,e,i),Ye(),jl=l,xt=a,Il.transition=o}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=$l,$l=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Wi()}(e,t,n,r)}finally{Il.transition=i,xt=r}return null}function _c(){if(null!==Ql){var e=wt(Yl),t=Il.transition,n=xt;try{if(Il.transition=null,xt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&jl))throw Error(s(331));var i=jl;for(jl|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var p=(d=Za).sibling,f=d.return;if(ol(d),d===u){Za=null;break}if(null!==p){p.return=f,Za=p;break}Za=f}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var x=e.current;for(Za=x;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=x;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(k){Ec(l,l.return,k)}if(l===a){Za=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Za=b;break e}Za=l.return}}if(jl=i,Wi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{xt=n,Il.transition=t}}return!1}function Sc(e,t,n){e=Bs(e,t=fa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Bs(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Al&n)===n&&(4===Dl||3===Dl&&(130023424&Al)===Al&&500>Xe()-Vl?pc(e,0):Fl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ds(e,t))&&(yt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cc(e,n)}function Rc(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Lc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case _:return Oc(n.children,i,o,t);case S:a=8,i|=8;break;case E:return(e=Ac(12,n,t,2|i)).elementType=E,e.lanes=o,e;case j:return(e=Ac(13,n,t,i)).elementType=j,e.lanes=o,e;case R:return(e=Ac(19,n,t,i)).elementType=R,e.lanes=o,e;case L:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case C:a=9;break e;case I:a=11;break e;case N:a=14;break e;case A:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,o,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ac(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Vc(e){if(!e)return Ii;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Li(n))return Oi(e,n,t)}return t}function Wc(e,t,n,r,i,s,o,a,l){return(e=zc(n,r,!0,e,0,s,0,a,l)).context=Vc(null),n=e.current,(s=Fs(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Bs(n,s,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function qc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bs(i,t,o))&&(rc(e,i,o,s),zs(e,i,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function $c(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){$c(e,t),(e=e.alternate)&&$c(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fs();break;case 5:Js(t);break;case 1:Li(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(Ci(eo,1&eo.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ci(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Wa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,ss&&0!==(1048576&t.flags)&&es(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qa(e,t),e=t.pendingProps;var i=Ai(t,ji.current);Rs(t,n),i=yo(null,t,r,e,i,n);var o=vo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=sa,t.stateNode=i,i._reactInternals=t,ca(t,r,e,n),t=ja(null,t,r,!0,o,n)):(t.tag=0,ss&&o&&ts(t),ba(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(r),e=ra(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Ia(null,t,r,e,n);break e;case 11:t=ka(null,t,r,e,n);break e;case 14:t=_a(null,t,r,ra(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Us(e,t),Ws(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Na(e,t,r,n,i=ua(Error(s(424)),t));break e}for(is=ui(t.stateNode.containerInfo.firstChild),rs=t,ss=!0,os=null,n=ks(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Js(t),null===e&&us(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ri(r,i)?a=null:null!==o&&ri(r,o)&&(t.flags|=32),Ta(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&us(t),null;case 13:return Ua(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ka(e,t,r,i=t.elementType===r?i:ra(r,i),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ci(_s,r._currentValue),r._currentValue=a,null!==o)if(lr(o.value,a)){if(o.children===i.children&&!Ri.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),js(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),js(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Rs(t,n),r=r(i=Ns(i)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return i=ra(r=t.type,t.pendingProps),_a(e,t,r,i=ra(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ra(r,i),qa(e,t),t.tag=1,Li(r)?(e=!0,Mi(t)):e=!1,Rs(t,n),aa(t,r,i),ca(t,r,i,n),ja(null,t,r,!0,e,n);case 19:return Wa(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Hc(o);a.call(e)}}qc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(o);s.call(e)}}var o=Wc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[gi]=o.current,Wr(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Hc(l);a.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[gi]=l.current,Wr(8===e.nodeType?e.parentNode:e),dc((function(){qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));qc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){qc(null,e,null,null)})),t[gi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ut(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Xe()),0===(6&jl)&&(Wl=Xe()+500,Wi()))}break;case 13:dc((function(){var t=Ds(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},kt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Ds(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},St=function(){return xt},Et=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},ke=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ki(r);if(!i)throw Error(s(90));K(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=uc,je=dc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,ki,Te,Ce,uc]},nu={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[gi]=t.current,Wr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,o,a),e[gi]=t.current,Wr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[gi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{Decoder:()=>Uv,Encoder:()=>Ov,PacketType:()=>Dv,protocol:()=>Pv});var i=n(43),s=n(391);const o=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new l;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){return function(e){const t=o(e);return a.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const h=()=>{try{return d().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},p=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=e=>{const t=p(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},g=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=h())||void 0===t?void 0:t[`_${e}`]};class y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function w(){return!function(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b(){try{return"object"===typeof indexedDB}catch(e){return!1}}class k extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,k.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_.prototype.create)}}class _{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(S,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new k(n,s,t)}}const S=/\{\$([^}]+)}/g;function E(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(T(n)&&T(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function T(e){return null!==e&&"object"===typeof e}function C(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function j(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class R{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=N),void 0===r.error&&(r.error=N),void 0===r.complete&&(r.complete=N);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function N(){}function A(e){return e&&e._delegate?e._delegate:e}class L{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const P="[DEFAULT]";class D{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new y;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:P})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===P?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P;return this.component?this.component.multipleInstances?e:P:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class O{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new D(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const M=[];var U;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(U||(U={}));const F={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},B=U.INFO,z={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},V=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=z[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class W{constructor(e){this.name=e,this._logLevel=B,this._logHandler=V,this._userLogHandler=null,M.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}}let q,H;const $=new WeakMap,K=new WeakMap,G=new WeakMap,Q=new WeakMap,Y=new WeakMap;let X={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return K.get(e);if("objectStoreNames"===t)return e.objectStoreNames||G.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ee(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function J(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(H||(H=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(te(this),n),ee($.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ee(e.apply(te(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(te(this),t,...r);return G.set(s,t.sort?t.sort():[t]),ee(s)}}function Z(e){return"function"===typeof e?J(e):(e instanceof IDBTransaction&&function(e){if(K.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));K.set(e,t)}(e),t=e,(q||(q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,X):e);var t}function ee(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ee(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&$.set(t,e)})).catch((()=>{})),Y.set(t,e),t}(e);if(Q.has(e))return Q.get(e);const t=Z(e);return t!==e&&(Q.set(e,t),Y.set(t,e)),t}const te=e=>Y.get(e);const ne=["get","getKey","getAll","getAllKeys","count"],re=["put","add","delete","clear"],ie=new Map;function se(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ie.get(t))return ie.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=re.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ne.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return ie.set(t,s),s}X=(e=>({...e,get:(t,n,r)=>se(t,n)||e.get(t,n,r),has:(t,n)=>!!se(t,n)||e.has(t,n)}))(X);class oe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ae="@firebase/app",le="0.11.5",ce=new W("@firebase/app"),ue="@firebase/app-compat",de="@firebase/analytics-compat",he="@firebase/analytics",pe="@firebase/app-check-compat",fe="@firebase/app-check",ge="@firebase/auth",me="@firebase/auth-compat",ye="@firebase/database",ve="@firebase/data-connect",xe="@firebase/database-compat",we="@firebase/functions",be="@firebase/functions-compat",ke="@firebase/installations",_e="@firebase/installations-compat",Se="@firebase/messaging",Ee="@firebase/messaging-compat",Te="@firebase/performance",Ce="@firebase/performance-compat",Ie="@firebase/remote-config",je="@firebase/remote-config-compat",Re="@firebase/storage",Ne="@firebase/storage-compat",Ae="@firebase/firestore",Le="@firebase/vertexai",Pe="@firebase/firestore-compat",De="firebase",Oe="[DEFAULT]",Me={[ae]:"fire-core",[ue]:"fire-core-compat",[he]:"fire-analytics",[de]:"fire-analytics-compat",[fe]:"fire-app-check",[pe]:"fire-app-check-compat",[ge]:"fire-auth",[me]:"fire-auth-compat",[ye]:"fire-rtdb",[ve]:"fire-data-connect",[xe]:"fire-rtdb-compat",[we]:"fire-fn",[be]:"fire-fn-compat",[ke]:"fire-iid",[_e]:"fire-iid-compat",[Se]:"fire-fcm",[Ee]:"fire-fcm-compat",[Te]:"fire-perf",[Ce]:"fire-perf-compat",[Ie]:"fire-rc",[je]:"fire-rc-compat",[Re]:"fire-gcs",[Ne]:"fire-gcs-compat",[Ae]:"fire-fst",[Pe]:"fire-fst-compat",[Le]:"fire-vertex","fire-js":"fire-js",[De]:"fire-js-all"},Ue=new Map,Fe=new Map,Be=new Map;function ze(e,t){try{e.container.addComponent(t)}catch(n){ce.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ve(e){const t=e.name;if(Be.has(t))return ce.debug(`There were multiple attempts to register component ${t}.`),!1;Be.set(t,e);for(const n of Ue.values())ze(n,e);for(const n of Fe.values())ze(n,e);return!0}function We(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const He=new _("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class $e{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new L("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}const Ke="11.6.1";function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Oe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw He.create("bad-app-name",{appName:String(i)});if(n||(n=g()),!n)throw He.create("no-options");const s=Ue.get(i);if(s){if(E(n,s.options)&&E(r,s.config))return s;throw He.create("duplicate-app",{appName:i})}const o=new O(i);for(const l of Be.values())o.addComponent(l);const a=new $e(n,r,o);return Ue.set(i,a),a}function Qe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe;const t=Ue.get(e);if(!t&&e===Oe&&g())return Ge();if(!t)throw He.create("no-app",{appName:e});return t}function Ye(e,t,n){var r;let i=null!==(r=Me[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ce.warn(e.join(" "))}Ve(new L(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Xe="firebase-heartbeat-store";let Je=null;function Ze(){return Je||(Je=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ee(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(ee(o.result),e.oldVersion,e.newVersion,ee(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Xe)}catch(n){console.warn(n)}}}).catch((e=>{throw He.create("idb-open",{originalErrorMessage:e.message})}))),Je}async function et(e,t){try{const n=(await Ze()).transaction(Xe,"readwrite"),r=n.objectStore(Xe);await r.put(t,tt(e)),await n.done}catch(n){if(n instanceof k)ce.warn(n.message);else{const e=He.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ce.warn(e.message)}}}function tt(e){return`${e.name}!${e.options.appId}`}class nt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new it(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=rt();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ce.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=rt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),st(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),st(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=c(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ce.warn(t),""}}}function rt(){return(new Date).toISOString().substring(0,10)}class it{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!b()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ze()).transaction(Xe),n=await t.objectStore(Xe).get(tt(e));return await t.done,n}catch(t){if(t instanceof k)ce.warn(t.message);else{const e=He.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ce.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return et(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function st(e){return c(JSON.stringify({version:2,heartbeats:e})).length}var ot;ot="",Ve(new L("platform-logger",(e=>new oe(e)),"PRIVATE")),Ve(new L("heartbeat",(e=>new nt(e)),"PRIVATE")),Ye(ae,le,ot),Ye(ae,le,"esm2017"),Ye("fire-js","");var at,lt,ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ut={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,(function(){this.blockSize=-1})),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new r([0|e],0>e?-1:0)})):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return h(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function p(e,t){return e.add(h(t))}function f(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(d(e))return t=m(h(e),t),new g(h(t.g),h(t.h));if(d(t))return t=m(e,h(t)),new g(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=p(e,i.j(t)),new g(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=p(e,c)}return new g(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=m(n,t).g,s=((0<(n=p(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=p(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,p=65535&this.i(i),g=e.i(s)>>>16,m=65535&e.i(s);n[2*i+2*s]+=p*m,f(n,2*i+2*s),n[2*i+2*s+1]+=l*m,f(n,2*i+2*s+1),n[2*i+2*s+1]+=p*g,f(n,2*i+2*s+1),n[2*i+2*s+2]+=l*g,f(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,lt=ut.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},at=ut.Integer=r}).apply("undefined"!==typeof ct?ct:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var dt,ht,pt,ft,gt,mt,yt,vt,xt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wt={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof xt&&xt];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e,t){return t}))}}));var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function f(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var y=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function k(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function _(e){i.setTimeout((()=>{throw e}),0)}function S(){var e=j;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var E=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new T),(e=>e.reset()));class T{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let C,I=!1,j=new class{constructor(){this.h=this.g=null}add(e,t){const n=E.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=i.Promise.resolve(void 0);C=()=>{e.then(N)}};var N=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){_(n)}var t=E;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function A(){this.s=this.s,this.C=this.C}function L(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},L.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function D(e,t){if(L.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{m(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&D.aa.h.call(this)}}d(D,L);var O={2:"touch",3:"pen",4:"mouse"};D.prototype.h=function(){D.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),U=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++U,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function V(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=W(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var q="closure_lm_"+(1e6*Math.random()|0),H={};function $(e,t,n,r,i){if(r&&r.once)return G(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)$(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.K(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!1,r,i)}function K(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[q]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function G(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);return null}return n=te(n),e&&e[M]?e.L(t,n,o(r)?!!r.capture:!!r,i):K(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(s=e.g[t],n,r,i))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])V(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(V(n,e),0==n.h&&(n.src=null,t[q]=null)):B(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new D(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[q])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new L(t,e);else if(t instanceof L)t.target=t.target||e;else{var i=t;b(t=new L(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&V(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se((()=>{e.g=null,e.i&&(e.i=!1,oe(e))}),e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,A),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)B(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}d(le,A);var ce=[];function ue(e){v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Y(e)}),e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=i.JSON.stringify,he=i.JSON.parse,pe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function fe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}fe.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){L.call(this,"d")}function xe(){L.call(this,"c")}d(ve,L),d(xe,L);var we={},be=null;function ke(){return be=be||new ne}function _e(e){L.call(this,we.La,e)}function Se(e){const t=ke();re(t,new _e(t))}function Ee(e,t){L.call(this,we.STAT_EVENT,e),this.stat=t}function Te(e){const t=ke();re(t,new Ee(t,e))}function Ce(e,t){L.call(this,we.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout((function(){e()}),t)}function je(){this.g=!0}function Re(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return de(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}we.La="serverreachability",d(_e,L),we.STAT_EVENT="statevent",d(Ee,L),we.Ma="timingevent",d(Ce,L),je.prototype.xa=function(){this.g=!1},je.prototype.info=function(){};var Ne,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function De(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}d(Pe,fe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ne=new Pe;var Me={},Ue={};function Fe(e,t,n){e.L=1,e.v=bt(ot(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),We(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Oe,e.g=_n(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=$(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Se(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ue:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Ue:(t=t.slice(r,r+n),e.C=r+n,t))}function We(e){e.S=Date.now()+e.I,qe(e,e.I)}function qe(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function $e(e){0==e.j.G||e.J||vn(e.j,e)}function Ke(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ge(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),an(n)}fn(n),Te(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&yn(n),!f(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),We(a)),r.g=o}else pn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Se()}catch(u){}}De.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},De.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Se(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=nn(this.g);e="";var s=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),$e(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!f(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Te(12),Ke(this),$e(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ge(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ve(this,a),e==Ue){4==h&&(this.s=4,Te(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,Te(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ge(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Te(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),gn(d),d.M=!0,Te(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Ke(this),$e(this)}else Re(this.i,this.l,a,null),Ge(this,a);4==h&&Ke(this),this.o&&!this.J&&(4==h?vn(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(f(e[r]))continue;var n=k(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ke(this),$e(this)}}}catch(h){}},De.prototype.cancel=function(){this.J=!0,Ke(this)},De.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.i,this.A),2!=this.L&&(Se(),Te(17)),Ke(this),this.s=2,$e(this)):qe(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new Nt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),lt(this,t[4]),this.l=kt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Nt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof Nt?(e.i=t,function(e,t){t&&!e.j&&(At(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Lt(this,t),Dt(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=_t(t,jt)),e.i=new Nt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function bt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function _t(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,St),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function St(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(_t(t,Tt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(_t(t,Tt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(_t(n,"/"==n.charAt(0)?It:Ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",_t(n,Rt)),e.join("")};var Et,Tt=/[#\/\?@]/g,Ct=/[#\?:]/g,It=/[#\?]/g,jt=/[#\?@]/g,Rt=/#/g;function Nt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function At(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Lt(e,t){At(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pt(e,t){return At(e),t=Ot(e,t),e.g.has(t)}function Dt(e,t,n){Lt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),h(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function Ut(){this.g=new pe}function Ft(e,t,n){const r=n||"";try{rt(e,(function(e,n){let i=e;o(e)&&(i=de(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Vt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Wt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,qt(e)}function qt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function $t(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Kt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Nt.prototype).add=function(e,t){At(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){At(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},e.na=function(){At(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){At(this);let t=[];if("string"===typeof e)Pt(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return At(this),this.i=null,Pt(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},d(Bt,fe),Bt.prototype.g=function(){return new zt(this.l,this.j)},Bt.prototype.i=(Et={},function(){return Et}),d(zt,ne),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,qt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Wt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qt(this)),this.g&&(this.readyState=3,qt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Wt(this):qt(this),3==this.readyState&&Vt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Wt(this))},e.Qa=function(e){this.g&&(this.response=e,Wt(this))},e.ga=function(){this.g&&Wt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Kt,ne);var Gt=/^https?$/i,Qt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Gt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new je,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ut,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),dn(e,n),(t=new De(e,e.j,t)).L=2,t.v=bt(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=_n(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}bn(e)}function an(e){e.g&&(gn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;C||R(),I||(C(),I=!0),j.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),dn(e,r),e.m&&e.o&&$t(r,e.m,e.o),n=new De(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function dn(e,t){e.H&&v(e.H,(function(e,n){ut(t,n,e)})),e.l&&rt({},(function(e,n){ut(t,n,e)}))}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Ft(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;C||R(),I||(C(),I=!0),j.add(t,e),e.v=0}}function fn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),xn(e,e.v)),e.v++,!0)}function gn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function mn(e){e.g=new De(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&$t(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=bt(ot(t)),n.m=null,n.P=!0,Be(n,e)}function yn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),gn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=ke(),new Ce(r,n)),cn(e)}else pn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),xn(e,e.B)),e.B++,!0))}(e,t)||2==r&&fn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function xn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),bt(r),t?function(e,t){const n=new je;if(i.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new je;const n=new AbortController,r=setTimeout((()=>{n.abort(),Mt(0,0,!1,t)}),1e4);fetch(e,{signal:n.signal}).then((e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)})).catch((()=>{clearTimeout(r),Mt(0,0,!1,t)}))}(r.toString(),n)}else Te(2);e.G=0,e.l&&e.l.sa(t),bn(e),ln(e)}function bn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(p(e.ka,t),p(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),dn(e,r),r}function _n(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Kt(new Bt({eb:n})):new Kt(e.pa)).Ha(e.J),t}function Sn(){}function En(){}function Tn(e,t){ne.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!f(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!f(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new jn(this)}function Cn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function In(){xe.call(this),this.status=1}function jn(e){this.g=e}(e=Kt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?ge(this.o):ge(Ne),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Yt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Yt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Kt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Et){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Et){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Te(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new De(this,this.j,e);let s=this.o;if(this.S&&(s?(s=x(s),b(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&$t(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||Xe(this.h)||un(this))},e.Fa=function(){if(this.u=null,mn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),an(this),mn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),fn(this),Te(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Sn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},En.prototype.g=function(e,t){return new Tn(e,t)},d(Tn,ne),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){on(this.g)},Tn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&cn(t)},Tn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Tn.aa.N.call(this)},d(Cn,ve),d(In,xe),d(jn,Sn),jn.prototype.ua=function(){re(this.g,"a")},jn.prototype.ta=function(e){re(this.g,new Cn(e))},jn.prototype.sa=function(e){re(this.g,new In)},jn.prototype.ra=function(){re(this.g,"b")},En.prototype.createWebChannel=En.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,vt=wt.createWebChannelTransport=function(){return new En},yt=wt.getStatEventTarget=function(){return ke()},mt=wt.Event=we,gt=wt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,ft=wt.ErrorCode=Ae,Le.COMPLETE="complete",pt=wt.EventType=Le,me.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ht=wt.WebChannel=me,wt.FetchXmlHttpFactory=Bt,Kt.prototype.listenOnce=Kt.prototype.L,Kt.prototype.getLastError=Kt.prototype.Ka,Kt.prototype.getLastErrorCode=Kt.prototype.Ba,Kt.prototype.getStatus=Kt.prototype.Z,Kt.prototype.getResponseJson=Kt.prototype.Oa,Kt.prototype.getResponseText=Kt.prototype.oa,Kt.prototype.send=Kt.prototype.ea,Kt.prototype.setWithCredentials=Kt.prototype.Ha,dt=wt.XhrIo=Kt}).apply("undefined"!==typeof xt?xt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const bt="@firebase/firestore",kt="4.7.11";class _t{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");let St="11.6.1";const Et=new W("@firebase/firestore");function Tt(){return Et.logLevel}function Ct(e){if(Et.logLevel<=U.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Rt);Et.debug(`Firestore (${St}): ${e}`,...i)}}function It(e){if(Et.logLevel<=U.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Rt);Et.error(`Firestore (${St}): ${e}`,...i)}}function jt(e){if(Et.logLevel<=U.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Rt);Et.warn(`Firestore (${St}): ${e}`,...i)}}function Rt(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Nt(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,At(e,r,n)}function At(e,t,n){let r=`FIRESTORE (${St}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw It(r),new Error(r)}function Lt(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||At(t,i,r)}function Pt(e,t){return e}const Dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ot extends k{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Mt{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Ut{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ft{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_t.UNAUTHENTICATED)))}shutdown(){}}class Bt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class zt{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Lt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Mt,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Mt)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Lt("string"==typeof t.accessToken,31837,{l:t}),new Ut(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Lt(null===e||"string"==typeof e,2055,{h:e}),new _t(e)}}class Vt{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Wt{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Vt(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_t.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ht{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,qe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Lt(void 0===this.o,3512);const n=e=>{null!=e.error&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Ct("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qt(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Lt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new qt(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function $t(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}function Kt(){return new TextEncoder}class Gt{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=$t(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Qt(e,t){return e<t?-1:e>t?1:0}function Yt(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),i=t.codePointAt(n);if(r!==i){if(r<128&&i<128)return Qt(r,i);{const s=Kt(),o=Jt(s.encode(Xt(e,n)),s.encode(Xt(t,n)));return 0!==o?o:Qt(r,i)}}n+=r>65535?2:1}return Qt(e.length,t.length)}function Xt(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Jt(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Qt(e[n],t[n]);return Qt(e.length,t.length)}function Zt(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}const en=-62135596800,tn=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*tn);return new nn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ot(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ot(Dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<en)throw new Ot(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ot(Dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tn}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-en;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rn{static fromTimestamp(e){return new rn(e)}static min(){return new rn(new nn(0,0))}static max(){return new rn(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const sn="__name__";class on{constructor(e,t,n){void 0===t?t=0:t>e.length&&Nt(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Nt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===on.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof on?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=on.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Qt(e.length,t.length)}static compareSegments(e,t){const n=on.isNumericId(e),r=on.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?on.extractNumericId(e).compare(on.extractNumericId(t)):Yt(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return at.fromString(e.substring(4,e.length-2))}}class an extends on{construct(e,t,n){return new an(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ot(Dt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter((e=>e.length>0)))}return new an(e)}static emptyPath(){return new an([])}}const ln=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends on{construct(e,t,n){return new cn(e,t,n)}static isValidIdentifier(e){return ln.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===sn}static keyField(){return new cn([sn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ot(Dt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ot(Dt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ot(Dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Ot(Dt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}class un{constructor(e){this.path=e}static fromPath(e){return new un(an.fromString(e))}static fromName(e){return new un(an.fromString(e).popFirst(5))}static empty(){return new un(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new un(new an(e.slice()))}}const dn=-1;class hn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}hn.UNKNOWN_ID=-1;function pn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=rn.fromTimestamp(1e9===r?new nn(n+1,0):new nn(n,r));return new gn(i,un.empty(),t)}function fn(e){return new gn(e.readTime,e.key,dn)}class gn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new gn(rn.min(),un.empty(),dn)}static max(){return new gn(rn.max(),un.empty(),dn)}}function mn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=un.comparator(e.documentKey,t.documentKey),0!==n?n:Qt(e.largestBatchId,t.largestBatchId))}const yn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xn(e){if(e.code!==Dt.FAILED_PRECONDITION||e.message!==yn)throw e;Ct("LocalStore","Unexpectedly lost primary lease")}class wn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Nt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wn(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof wn?t:wn.resolve(t)}catch(e){return wn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):wn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):wn.reject(t)}static resolve(e){return new wn(((t,n)=>{t(e)}))}static reject(e){return new wn(((t,n)=>{n(e)}))}static waitFor(e){return new wn(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=wn.resolve(!1);for(const n of e)t=t.next((e=>e?wn.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new wn(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new wn(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function bn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kn(e){return"IndexedDbTransactionError"===e.name}class _n{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}_n.le=-1;const Sn=-1;function En(e){return null==e}function Tn(e){return 0===e&&1/e==-1/0}function Cn(e){return"number"==typeof e&&Number.isInteger(e)&&!Tn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const In="\x01";function jn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Nn(t)),t=Rn(e.get(n),t);return Nn(t)}function Rn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case In:n+="\x01\x11";break;default:n+=t}}return n}function Nn(e){return e+In+"\x01"}const An="remoteDocuments",Ln="owner",Pn="mutationQueues",Dn="mutations";const On="documentMutations",Mn="remoteDocumentsV14",Un="remoteDocumentGlobal",Fn="targets",Bn="targetDocuments",zn="targetGlobal",Vn="collectionParents",Wn="clientMetadata",qn="bundles",Hn="namedQueries",$n="indexConfiguration",Kn="indexState",Gn="indexEntries",Qn="documentOverlays",Yn="globals",Xn=[Pn,Dn,On,An,Fn,Ln,zn,Bn,Wn,Un,Vn,qn,Hn],Jn=[Pn,Dn,On,Mn,Fn,Ln,zn,Bn,Wn,Un,Vn,qn,Hn,Qn],Zn=Jn,er=[...Zn,$n,Kn,Gn];function tr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function nr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ir{constructor(e,t){this.comparator=e,this.root=t||or.EMPTY}insert(e,t){return new ir(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new ir(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sr(this.root,e,this.comparator,!1)}getReverseIterator(){return new sr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sr(this.root,e,this.comparator,!0)}}class sr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class or{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:or.RED,this.left=null!=r?r:or.EMPTY,this.right=null!=i?i:or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new or(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return or.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Nt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Nt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Nt(27949);return e+(this.isRed()?0:1)}}or.EMPTY=null,or.RED=!0,or.BLACK=!1,or.EMPTY=new class{constructor(){this.size=0}get key(){throw Nt(57766)}get value(){throw Nt(16141)}get color(){throw Nt(16727)}get left(){throw Nt(29726)}get right(){throw Nt(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new or(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ar{constructor(e){this.comparator=e,this.data=new ir(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lr(this.data.getIterator())}getIteratorFrom(e){return new lr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof ar))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ar(this.comparator);return t.data=e,t}}class lr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class cr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new cr([])}unionWith(e){let t=new ar(cn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new cr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zt(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ur extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ur("Invalid base64 string: "+e):e}}(e);return new dr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const hr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(e){if(Lt(!!e,39018),"string"==typeof e){let t=0;const n=hr.exec(e);if(Lt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:fr(e.seconds),nanos:fr(e.nanos)}}function fr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gr(e){return"string"==typeof e?dr.fromBase64String(e):dr.fromUint8Array(e)}const mr="server_timestamp",yr="__type__",vr="__previous_value__",xr="__local_write_time__";function wr(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[yr])||void 0===n?void 0:n.stringValue)===mr}function br(e){const t=e.mapValue.fields[vr];return wr(t)?br(t):t}function kr(e){const t=pr(e.mapValue.fields[xr].timestampValue);return new nn(t.seconds,t.nanos)}class _r{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const Sr="(default)";class Er{constructor(e,t){this.projectId=e,this.database=t||Sr}static empty(){return new Er("","")}get isDefaultDatabase(){return this.database===Sr}isEqual(e){return e instanceof Er&&e.projectId===this.projectId&&e.database===this.database}}const Tr="__type__",Cr="__max__",Ir={mapValue:{fields:{__type__:{stringValue:Cr}}}},jr="__vector__",Rr="value";function Nr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wr(e)?4:Gr(e)?9007199254740991:$r(e)?10:11:Nt(28295,{value:e})}function Ar(e,t){if(e===t)return!0;const n=Nr(e);if(n!==Nr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kr(e).isEqual(kr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=pr(e.timestampValue),r=pr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gr(e.bytesValue).isEqual(gr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fr(e.geoPointValue.latitude)===fr(t.geoPointValue.latitude)&&fr(e.geoPointValue.longitude)===fr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fr(e.integerValue)===fr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=fr(e.doubleValue),r=fr(t.doubleValue);return n===r?Tn(n)===Tn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Zt(e.arrayValue.values||[],t.arrayValue.values||[],Ar);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(tr(n)!==tr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ar(n[i],r[i])))return!1;return!0}(e,t);default:return Nt(52216,{left:e})}}function Lr(e,t){return void 0!==(e.values||[]).find((e=>Ar(e,t)))}function Pr(e,t){if(e===t)return 0;const n=Nr(e),r=Nr(t);if(n!==r)return Qt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qt(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=fr(e.integerValue||e.doubleValue),r=fr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Dr(e.timestampValue,t.timestampValue);case 4:return Dr(kr(e),kr(t));case 5:return Yt(e.stringValue,t.stringValue);case 6:return function(e,t){const n=gr(e),r=gr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Qt(n[i],r[i]);if(0!==e)return e}return Qt(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qt(fr(e.latitude),fr(t.latitude));return 0!==n?n:Qt(fr(e.longitude),fr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Or(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Rr])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Rr])||void 0===r?void 0:r.arrayValue,u=Qt((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Or(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ir.mapValue&&t===Ir.mapValue)return 0;if(e===Ir.mapValue)return 1;if(t===Ir.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Yt(r[o],s[o]);if(0!==e)return e;const t=Pr(n[r[o]],i[s[o]]);if(0!==t)return t}return Qt(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Nt(23264,{Pe:n})}}function Dr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qt(e,t);const n=pr(e),r=pr(t),i=Qt(n.seconds,r.seconds);return 0!==i?i:Qt(n.nanos,r.nanos)}function Or(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Pr(n[i],r[i]);if(e)return e}return Qt(n.length,r.length)}function Mr(e){return Ur(e)}function Ur(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=pr(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return gr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return un.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ur(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ur(e.fields[i])}`;return n+"}"}(e.mapValue):Nt(61005,{value:e})}function Fr(e){switch(Nr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=br(e);return t?16+Fr(t):16;case 5:return 2*e.stringValue.length;case 6:return gr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Fr(t)),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return nr(e.fields,((e,n)=>{t+=e.length+Fr(n)})),t}(e.mapValue);default:throw Nt(13486,{value:e})}}function Br(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function zr(e){return!!e&&"integerValue"in e}function Vr(e){return!!e&&"arrayValue"in e}function Wr(e){return!!e&&"nullValue"in e}function qr(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hr(e){return!!e&&"mapValue"in e}function $r(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Tr])||void 0===n?void 0:n.stringValue)===jr}function Kr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return nr(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Kr(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Kr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Gr(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Cr}class Qr{constructor(e){this.value=e}static empty(){return new Qr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Hr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kr(t)}setAll(e){let t=cn.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Kr(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Hr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Hr(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){nr(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Qr(Kr(this.value))}}function Yr(e){const t=[];return nr(e.fields,((e,n)=>{const r=new cn([e]);if(Hr(n)){const e=Yr(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new cr(t)}class Xr{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Xr(e,0,rn.min(),rn.min(),rn.min(),Qr.empty(),0)}static newFoundDocument(e,t,n,r){return new Xr(e,1,t,rn.min(),n,r,0)}static newNoDocument(e,t){return new Xr(e,2,t,rn.min(),rn.min(),Qr.empty(),0)}static newUnknownDocument(e,t){return new Xr(e,3,t,rn.min(),rn.min(),Qr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jr{constructor(e,t){this.position=e,this.inclusive=t}}function Zr(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?un.comparator(un.fromName(o.referenceValue),n.key):Pr(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ei(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ar(e.position[n],t.position[n]))return!1;return!0}class ti{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ni(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class ri{}class ii extends ri{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new hi(e,t,n):"array-contains"===t?new mi(e,n):"in"===t?new yi(e,n):"not-in"===t?new vi(e,n):"array-contains-any"===t?new xi(e,n):new ii(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new pi(e,n):new fi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Pr(t,this.value)):null!==t&&Nr(this.value)===Nr(t)&&this.matchesComparison(Pr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends ri{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new si(e,t)}matches(e){return oi(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function oi(e){return"and"===e.op}function ai(e){return li(e)&&oi(e)}function li(e){for(const t of e.filters)if(t instanceof si)return!1;return!0}function ci(e){if(e instanceof ii)return e.field.canonicalString()+e.op.toString()+Mr(e.value);if(ai(e))return e.filters.map((e=>ci(e))).join(",");{const t=e.filters.map((e=>ci(e))).join(",");return`${e.op}(${t})`}}function ui(e,t){return e instanceof ii?function(e,t){return t instanceof ii&&e.op===t.op&&e.field.isEqual(t.field)&&Ar(e.value,t.value)}(e,t):e instanceof si?function(e,t){return t instanceof si&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&ui(n,t.filters[r])),!0)}(e,t):void Nt(19439)}function di(e){return e instanceof ii?function(e){return`${e.field.canonicalString()} ${e.op} ${Mr(e.value)}`}(e):e instanceof si?function(e){return e.op.toString()+" {"+e.getFilters().map(di).join(" ,")+"}"}(e):"Filter"}class hi extends ii{constructor(e,t,n){super(e,t,n),this.key=un.fromName(n.referenceValue)}matches(e){const t=un.comparator(e.key,this.key);return this.matchesComparison(t)}}class pi extends ii{constructor(e,t){super(e,"in",t),this.keys=gi("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class fi extends ii{constructor(e,t){super(e,"not-in",t),this.keys=gi("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>un.fromName(e.referenceValue)))}class mi extends ii{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vr(t)&&Lr(t.arrayValue,this.value)}}class yi extends ii{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Lr(this.value.arrayValue,t)}}class vi extends ii{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Lr(this.value.arrayValue,t)}}class xi extends ii{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vr(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Lr(this.value.arrayValue,e)))}}class wi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Ie=null}}function bi(e){return new wi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ki(e){const t=Pt(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>ci(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),En(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Mr(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Mr(e))).join(",")),t.Ie=e}return t.Ie}function _i(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ni(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ui(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ei(e.startAt,t.startAt)&&ei(e.endAt,t.endAt)}function Si(e){return un.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ei{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Ti(e,t,n,r,i,s,o,a){return new Ei(e,t,n,r,i,s,o,a)}function Ci(e){return new Ei(e)}function Ii(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ji(e){return null!==e.collectionGroup}function Ri(e){const t=Pt(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new ar(cn.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ee.push(new ti(r,n))})),e.has(cn.keyField().canonicalString())||t.Ee.push(new ti(cn.keyField(),n))}return t.Ee}function Ni(e){const t=Pt(e);return t.de||(t.de=Ai(t,Ri(e))),t.de}function Ai(e,t){if("F"===e.limitType)return bi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ti(e.field,t)}));const n=e.endAt?new Jr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Jr(e.startAt.position,e.startAt.inclusive):null;return bi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Li(e,t){const n=e.filters.concat([t]);return new Ei(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Pi(e,t,n){return new Ei(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Di(e,t){return _i(Ni(e),Ni(t))&&e.limitType===t.limitType}function Oi(e){return`${ki(Ni(e))}|lt:${e.limitType}`}function Mi(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>di(e))).join(", ")}]`),En(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Mr(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Mr(e))).join(",")),`Target(${t})`}(Ni(e))}; limitType=${e.limitType})`}function Ui(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):un.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ri(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Zr(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ri(e),t))&&!(e.endAt&&!function(e,t,n){const r=Zr(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ri(e),t))}(e,t)}function Fi(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Bi(e){return(t,n)=>{let r=!1;for(const i of Ri(e)){const e=zi(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function zi(e,t,n){const r=e.field.isKeyField()?un.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Pr(r,i):Nt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nt(19790,{direction:e.dir})}}class Vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nr(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return rr(this.inner)}size(){return this.innerSize}}const Wi=new ir(un.comparator);function qi(){return Wi}const Hi=new ir(un.comparator);function $i(){let e=Hi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Ki(e){let t=Hi;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Gi(){return Yi()}function Qi(){return Yi()}function Yi(){return new Vi((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Xi=new ir(un.comparator),Ji=new ar(un.comparator);function Zi(){let e=Ji;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const es=new ar(Qt);function ts(){return es}function ns(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tn(t)?"-0":t}}function rs(e){return{integerValue:""+e}}function is(e,t){return Cn(t)?rs(t):ns(e,t)}class ss{constructor(){this._=void 0}}function os(e,t,n){return e instanceof cs?function(e,t){const n={fields:{[yr]:{stringValue:mr},[xr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wr(t)&&(t=br(t)),t&&(n.fields[vr]=t),{mapValue:n}}(n,t):e instanceof us?ds(e,t):e instanceof hs?ps(e,t):function(e,t){const n=ls(e,t),r=gs(n)+gs(e.Re);return zr(n)&&zr(e.Re)?rs(r):ns(e.serializer,r)}(e,t)}function as(e,t,n){return e instanceof us?ds(e,t):e instanceof hs?ps(e,t):n}function ls(e,t){return e instanceof fs?function(e){return zr(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class cs extends ss{}class us extends ss{constructor(e){super(),this.elements=e}}function ds(e,t){const n=ms(t);for(const r of e.elements)n.some((e=>Ar(e,r)))||n.push(r);return{arrayValue:{values:n}}}class hs extends ss{constructor(e){super(),this.elements=e}}function ps(e,t){let n=ms(t);for(const r of e.elements)n=n.filter((e=>!Ar(e,r)));return{arrayValue:{values:n}}}class fs extends ss{constructor(e,t){super(),this.serializer=e,this.Re=t}}function gs(e){return fr(e.integerValue||e.doubleValue)}function ms(e){return Vr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ys{constructor(e,t){this.field=e,this.transform=t}}class vs{constructor(e,t){this.version=e,this.transformResults=t}}class xs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xs}static exists(e){return new xs(void 0,e)}static updateTime(e){return new xs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ws(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class bs{}function ks(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new As(e.key,xs.none()):new Cs(e.key,e.data,xs.none());{const n=e.data,r=Qr.empty();let i=new ar(cn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Is(e.key,r,new cr(i.toArray()),xs.none())}}function _s(e,t,n){e instanceof Cs?function(e,t,n){const r=e.value.clone(),i=Rs(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Is?function(e,t,n){if(!ws(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Rs(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(js(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ss(e,t,n,r){return e instanceof Cs?function(e,t,n,r){if(!ws(e.precondition,t))return n;const i=e.value.clone(),s=Ns(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Is?function(e,t,n,r){if(!ws(e.precondition,t))return n;const i=Ns(e.fieldTransforms,r,t),s=t.data;return s.setAll(js(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return ws(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Es(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ls(r.transform,e||null);null!=i&&(null===n&&(n=Qr.empty()),n.set(r.field,i))}return n||null}function Ts(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zt(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof us&&t instanceof us||e instanceof hs&&t instanceof hs?Zt(e.elements,t.elements,Ar):e instanceof fs&&t instanceof fs?Ar(e.Re,t.Re):e instanceof cs&&t instanceof cs}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Cs extends bs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Is extends bs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function js(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Rs(e,t,n){const r=new Map;Lt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,as(o,a,n[i]))}return r}function Ns(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,os(e,s,t))}return r}class As extends bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ls extends bs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ps{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&_s(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ss(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ss(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Qi();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=ks(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(rn.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Zi())}isEqual(e){return this.batchId===e.batchId&&Zt(this.mutations,e.mutations,((e,t)=>Ts(e,t)))&&Zt(this.baseMutations,e.baseMutations,((e,t)=>Ts(e,t)))}}class Ds{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Lt(e.mutations.length===n.length,58842,{fe:e.mutations.length,ge:n.length});let r=Xi;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ds(e,t,n,r)}}class Os{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ms{constructor(e,t){this.count=e,this.unchangedNames=t}}var Us,Fs;function Bs(e){switch(e){case Dt.OK:return Nt(64938);case Dt.CANCELLED:case Dt.UNKNOWN:case Dt.DEADLINE_EXCEEDED:case Dt.RESOURCE_EXHAUSTED:case Dt.INTERNAL:case Dt.UNAVAILABLE:case Dt.UNAUTHENTICATED:return!1;case Dt.INVALID_ARGUMENT:case Dt.NOT_FOUND:case Dt.ALREADY_EXISTS:case Dt.PERMISSION_DENIED:case Dt.FAILED_PRECONDITION:case Dt.ABORTED:case Dt.OUT_OF_RANGE:case Dt.UNIMPLEMENTED:case Dt.DATA_LOSS:return!0;default:return Nt(15467,{code:e})}}function zs(e){if(void 0===e)return It("GRPC error has no .code"),Dt.UNKNOWN;switch(e){case Us.OK:return Dt.OK;case Us.CANCELLED:return Dt.CANCELLED;case Us.UNKNOWN:return Dt.UNKNOWN;case Us.DEADLINE_EXCEEDED:return Dt.DEADLINE_EXCEEDED;case Us.RESOURCE_EXHAUSTED:return Dt.RESOURCE_EXHAUSTED;case Us.INTERNAL:return Dt.INTERNAL;case Us.UNAVAILABLE:return Dt.UNAVAILABLE;case Us.UNAUTHENTICATED:return Dt.UNAUTHENTICATED;case Us.INVALID_ARGUMENT:return Dt.INVALID_ARGUMENT;case Us.NOT_FOUND:return Dt.NOT_FOUND;case Us.ALREADY_EXISTS:return Dt.ALREADY_EXISTS;case Us.PERMISSION_DENIED:return Dt.PERMISSION_DENIED;case Us.FAILED_PRECONDITION:return Dt.FAILED_PRECONDITION;case Us.ABORTED:return Dt.ABORTED;case Us.OUT_OF_RANGE:return Dt.OUT_OF_RANGE;case Us.UNIMPLEMENTED:return Dt.UNIMPLEMENTED;case Us.DATA_LOSS:return Dt.DATA_LOSS;default:return Nt(39323,{code:e})}}(Fs=Us||(Us={}))[Fs.OK=0]="OK",Fs[Fs.CANCELLED=1]="CANCELLED",Fs[Fs.UNKNOWN=2]="UNKNOWN",Fs[Fs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fs[Fs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fs[Fs.NOT_FOUND=5]="NOT_FOUND",Fs[Fs.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fs[Fs.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fs[Fs.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fs[Fs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fs[Fs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fs[Fs.ABORTED=10]="ABORTED",Fs[Fs.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fs[Fs.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fs[Fs.INTERNAL=13]="INTERNAL",Fs[Fs.UNAVAILABLE=14]="UNAVAILABLE",Fs[Fs.DATA_LOSS=15]="DATA_LOSS";let Vs=null;const Ws=new at([4294967295,4294967295],0);function qs(e){const t=Kt().encode(e),n=new lt;return n.update(t),new Uint8Array(n.digest())}function Hs(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new at([n,r],0),new at([i,s],0)]}class $s{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Ks(`Invalid padding: ${t}`);if(n<0)throw new Ks(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Ks(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Ks(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=at.fromNumber(this.pe)}we(e,t,n){let r=e.add(t.multiply(at.fromNumber(n)));return 1===r.compare(Ws)&&(r=new at([r.getBits(0),r.getBits(1)],0)),r.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.pe)return!1;const t=qs(e),[n,r]=Hs(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);if(!this.be(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new $s(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.pe)return;const t=qs(e),[n,r]=Hs(t);for(let i=0;i<this.hashCount;i++){const e=this.we(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Ks extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Gs{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Qs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Gs(rn.min(),r,new ir(Qt),qi(),Zi())}}class Qs{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Qs(n,t,Zi(),Zi(),Zi())}}class Ys{constructor(e,t,n,r){this.De=e,this.removedTargetIds=t,this.key=n,this.ve=r}}class Xs{constructor(e,t){this.targetId=e,this.Ce=t}}class Js{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Zs{constructor(){this.Fe=0,this.Me=no(),this.xe=dr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return 0!==this.Fe}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Zi(),t=Zi(),n=Zi();return this.Me.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nt(38017,{changeType:i})}})),new Qs(this.xe,this.Oe,e,t,n)}Qe(){this.Ne=!1,this.Me=no()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Lt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class eo{constructor(e){this.ze=e,this.je=new Map,this.He=qi(),this.Je=to(),this.Ye=to(),this.Ze=new ir(Qt)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,(t=>{const n=this.rt(t);switch(e.state){case 0:this.it(t)&&n.ke(e.resumeToken);break;case 1:n.We(),n.Be||n.Qe(),n.ke(e.resumeToken);break;case 2:n.We(),n.Be||this.removeTarget(t);break;case 3:this.it(t)&&(n.Ge(),n.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),n.ke(e.resumeToken));break;default:Nt(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach(((e,n)=>{this.it(n)&&t(n)}))}ot(e){const t=e.targetId,n=e.Ce.count,r=this._t(t);if(r){const i=r.target;if(Si(i))if(0===n){const e=new un(i.path);this.tt(t,e,Xr.newNoDocument(e,rn.min()))}else Lt(1===n,20013,{expectedCount:n});else{const r=this.ut(t);if(r!==n){const n=this.ct(e),i=n?this.lt(n,e,r):1;if(0!==i){this.st(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,e)}null==Vs||Vs.ht(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.Ce,this.ze.Pt(),n,i))}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=gr(n).toUint8Array()}catch(e){if(e instanceof ur)return jt("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new $s(s,r,i)}catch(e){return jt(e instanceof Ks?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.pe?null:o}lt(e,t,n){return t.Ce.count===n-this.Tt(e,t.targetId)?0:2}Tt(e,t){const n=this.ze.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.ze.Pt(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.tt(t,n,null),r++)})),r}It(e){const t=new Map;this.je.forEach(((n,r)=>{const i=this._t(r);if(i){if(n.current&&Si(i.target)){const t=new un(i.target.path);this.Et(t).has(r)||this.dt(r,t)||this.tt(r,t,Xr.newNoDocument(t,e))}n.Le&&(t.set(r,n.qe()),n.Qe())}}));let n=Zi();this.Ye.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this._t(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.He.forEach(((t,n)=>n.setReadTime(e)));const r=new Gs(e,t,this.Ze,this.He,n);return this.He=qi(),this.Je=to(),this.Ye=to(),this.Ze=new ir(Qt),r}et(e,t){if(!this.it(e))return;const n=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,n),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,n){if(!this.it(e))return;const r=this.rt(e);this.dt(e,t)?r.$e(t,1):r.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),n&&(this.He=this.He.insert(t,n))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Zs,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ar(Qt),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ar(Qt),this.Je=this.Je.insert(e,t)),t}it(e){const t=null!==this._t(e);return t||Ct("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Zs),this.ze.getRemoteKeysForTarget(e).forEach((t=>{this.tt(e,t,null)}))}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function to(){return new ir(un.comparator)}function no(){return new ir(un.comparator)}const ro={asc:"ASCENDING",desc:"DESCENDING"},io={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},so={and:"AND",or:"OR"};class oo{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ao(e,t){return e.useProto3Json||En(t)?t:{value:t}}function lo(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function co(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function uo(e,t){return lo(e,t.toTimestamp())}function ho(e){return Lt(!!e,49232),rn.fromTimestamp(function(e){const t=pr(e);return new nn(t.seconds,t.nanos)}(e))}function po(e,t){return fo(e,t).canonicalString()}function fo(e,t){const n=function(e){return new an(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function go(e){const t=an.fromString(e);return Lt(Do(t),10190,{key:t.toString()}),t}function mo(e,t){return po(e.databaseId,t.path)}function yo(e,t){const n=go(t);if(n.get(1)!==e.databaseId.projectId)throw new Ot(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ot(Dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new un(bo(n))}function vo(e,t){return po(e.databaseId,t)}function xo(e){const t=go(e);return 4===t.length?an.emptyPath():bo(t)}function wo(e){return new an(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bo(e){return Lt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function ko(e,t,n){return{name:mo(e,t),fields:n.value.mapValue.fields}}function _o(e,t){let n;if(t instanceof Cs)n={update:ko(e,t.key,t.value)};else if(t instanceof As)n={delete:mo(e,t.key)};else if(t instanceof Is)n={update:ko(e,t.key,t.data),updateMask:Po(t.fieldMask)};else{if(!(t instanceof Ls))return Nt(16599,{ft:t.type});n={verify:mo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof cs)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof us)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof hs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fs)return{fieldPath:t.field.canonicalString(),increment:n.Re};throw Nt(20930,{transform:t.transform})}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:uo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nt(27497)}(e,t.precondition)),n}function So(e,t){return{documents:[vo(e,t.path)]}}function Eo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vo(e,i);const s=function(e){if(0!==e.length)return Lo(si.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:No(e.field),direction:Io(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ao(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{gt:n,parent:i}}function To(e){let t=xo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lt(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Co(e);return t instanceof si&&ai(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ti(Ao(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,En(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Jr(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Jr(n,t)}(n.endAt)),Ti(t,i,o,s,a,"F",l,c)}function Co(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Ao(e.unaryFilter.field);return ii.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Ao(e.unaryFilter.field);return ii.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ao(e.unaryFilter.field);return ii.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Ao(e.unaryFilter.field);return ii.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Nt(61313);default:return Nt(60726)}}(e):void 0!==e.fieldFilter?function(e){return ii.create(Ao(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Nt(58110);default:return Nt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return si.create(e.compositeFilter.filters.map((e=>Co(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Nt(1026)}}(e.compositeFilter.op))}(e):Nt(30097,{filter:e})}function Io(e){return ro[e]}function jo(e){return io[e]}function Ro(e){return so[e]}function No(e){return{fieldPath:e.canonicalString()}}function Ao(e){return cn.fromServerFormat(e.fieldPath)}function Lo(e){return e instanceof ii?function(e){if("=="===e.op){if(qr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NAN"}};if(Wr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NAN"}};if(Wr(e.value))return{unaryFilter:{field:No(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(e.field),op:jo(e.op),value:e.value}}}(e):e instanceof si?function(e){const t=e.getFilters().map((e=>Lo(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ro(e.op),filters:t}}}(e):Nt(54877,{filter:e})}function Po(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Do(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Oo{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rn.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:dr.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Oo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Mo{constructor(e){this.wt=e}}function Uo(e){const t=To({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Pi(t,t.limit,"L"):t}class Fo{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(fr(e.integerValue));else if("doubleValue"in e){const n=fr(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),Tn(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=pr(n)),t.Ot(`${n.seconds||""}`),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(gr(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Gr(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):$r(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Nt(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const r of Object.keys(n))this.Nt(r,t),this.Ct(n[r],t)}qt(e,t){var n,r;const i=e.fields||{};this.Mt(t,53);const s=Rr,o=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Mt(t,15),t.xt(fr(o)),this.Nt(s,t),this.Ct(i[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const r of n)this.Ct(r,t)}kt(e,t){this.Mt(t,37),un.fromName(e).path.forEach((e=>{this.Mt(t,60),this.Kt(e,t)}))}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Fo.Wt=new Fo;class Bo{constructor(){this.yn=new zo}addToCollectionParentIndex(e,t){return this.yn.add(t),wn.resolve()}getCollectionParents(e,t){return wn.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return wn.resolve()}deleteFieldIndex(e,t){return wn.resolve()}deleteAllFieldIndexes(e){return wn.resolve()}createTargetIndexes(e,t){return wn.resolve()}getDocumentsMatchingTarget(e,t){return wn.resolve(null)}getIndexType(e,t){return wn.resolve(0)}getFieldIndexes(e,t){return wn.resolve([])}getNextCollectionGroupToUpdate(e){return wn.resolve(null)}getMinOffset(e,t){return wn.resolve(gn.min())}getMinOffsetFromCollectionGroup(e,t){return wn.resolve(gn.min())}updateCollectionGroup(e,t,n){return wn.resolve()}updateIndexEntries(e,t){return wn.resolve()}}class zo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new ar(an.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new ar(an.comparator)).toArray()}}new Uint8Array(0);const Vo={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wo=41943040;class qo{static withCacheSize(e){return new qo(e,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}qo.DEFAULT_COLLECTION_PERCENTILE=10,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qo.DEFAULT=new qo(Wo,qo.DEFAULT_COLLECTION_PERCENTILE,qo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qo.DISABLED=new qo(-1,0,0);class Ho{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Ho(0)}static ir(){return new Ho(-1)}}const $o="LruGarbageCollector",Ko=1048576;function Go(e,t){let[n,r]=e,[i,s]=t;const o=Qt(n,i);return 0===o?Qt(r,s):o}class Qo{constructor(e){this.cr=e,this.buffer=new ar(Go),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Go(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Yo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Tr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return null!==this.Tr}Ir(e){Ct($o,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){kn(e)?Ct($o,"Ignoring IndexedDB error during garbage collection: ",e):await xn(e)}await this.Ir(3e5)}))}}class Xo{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return wn.resolve(_n.le);const n=new Qo(t);return this.Er.forEachTarget(e,(e=>n.Pr(e.sequenceNumber))).next((()=>this.Er.Ar(e,(e=>n.Pr(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Er.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),wn.resolve(Vo)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Vo):this.Rr(e,t)))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Tt()<=U.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),wn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Jo(e,t){return new Xo(e,t)}class Zo{constructor(){this.changes=new Vi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ea{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ta{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Ss(n.mutation,e,cr.empty(),nn.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Zi()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zi();const r=Gi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=$i();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Gi();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Zi())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=qi();const s=Yi(),o=Yi();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Is)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ss(o.mutation,t,o.mutation.getFieldMask(),nn.now())):s.set(t.key,cr.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new ea(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Yi();let r=new ir(((e,t)=>e-t)),i=Zi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||cr.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Zi()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Qi();l.forEach((e=>{if(!i.has(e)){const r=ks(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return wn.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return un.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ji(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wn.resolve(Gi());let o=dn,a=i;return s.next((t=>wn.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?wn.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Zi()))).next((e=>({batchId:o,changes:Ki(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new un(t)).next((e=>{let t=$i();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=$i();return this.indexManager.getCollectionParents(e,i).next((o=>wn.forEach(o,(o=>{const a=function(e,t){return new Ei(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xr.newInvalidDocument(r)))}));let n=$i();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Ss(s.mutation,r,cr.empty(),nn.now()),Ui(t,r)&&(n=n.insert(e,r))})),n}))}}class na{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return wn.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ho(e.createTime)}}(t)),wn.resolve()}getNamedQuery(e,t){return wn.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(e){return{name:e.name,query:Uo(e.bundledQuery),readTime:ho(e.readTime)}}(t)),wn.resolve()}}class ra{constructor(){this.overlays=new ir(un.comparator),this.Or=new Map}getOverlay(e,t){return wn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gi();return wn.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.St(e,t,r)})),wn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Or.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.Or.delete(n)),wn.resolve()}getOverlaysForCollection(e,t,n){const r=Gi(),i=t.length+1,s=new un(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ir(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Gi(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Gi(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return wn.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Or.get(r.largestBatchId).delete(n.key);this.Or.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Os(t,n));let i=this.Or.get(t);void 0===i&&(i=Zi(),this.Or.set(t,i)),this.Or.set(t,i.add(n.key))}}class ia{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return wn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,wn.resolve()}}class sa{constructor(){this.Nr=new ar(oa.Br),this.Lr=new ar(oa.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const n=new oa(e,t);this.Nr=this.Nr.add(n),this.Lr=this.Lr.add(n)}qr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Qr(new oa(e,t))}$r(e,t){e.forEach((e=>this.removeReference(e,t)))}Ur(e){const t=new un(new an([])),n=new oa(t,e),r=new oa(t,e+1),i=[];return this.Lr.forEachInRange([n,r],(e=>{this.Qr(e),i.push(e.key)})),i}Kr(){this.Nr.forEach((e=>this.Qr(e)))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new un(new an([])),n=new oa(t,e),r=new oa(t,e+1);let i=Zi();return this.Lr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new oa(e,0),n=this.Nr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class oa{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return un.comparator(e.key,t.key)||Qt(e.Gr,t.Gr)}static kr(e,t){return Qt(e.Gr,t.Gr)||un.comparator(e.key,t.key)}}class aa{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new ar(oa.Br)}checkEmpty(e){return wn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Ps(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.zr=this.zr.add(new oa(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return wn.resolve(s)}lookupMutationBatch(e,t){return wn.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Hr(n),i=r<0?0:r;return wn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wn.resolve(0===this.mutationQueue.length?Sn:this.Jn-1)}getAllMutationBatches(e){return wn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new oa(t,0),r=new oa(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([n,r],(e=>{const t=this.jr(e.Gr);i.push(t)})),wn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ar(Qt);return t.forEach((e=>{const t=new oa(e,0),r=new oa(e,Number.POSITIVE_INFINITY);this.zr.forEachInRange([t,r],(e=>{n=n.add(e.Gr)}))})),wn.resolve(this.Jr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;un.isDocumentKey(i)||(i=i.child(""));const s=new oa(new un(i),0);let o=new ar(Qt);return this.zr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Gr)),!0)}),s),wn.resolve(this.Jr(o))}Jr(e){const t=[];return e.forEach((e=>{const n=this.jr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Lt(0===this.Yr(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.zr;return wn.forEach(t.mutations,(r=>{const i=new oa(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.zr=n}))}Xn(e){}containsKey(e,t){const n=new oa(t,0),r=this.zr.firstAfterOrEqual(n);return wn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wn.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class la{constructor(e){this.Zr=e,this.docs=new ir(un.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Zr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wn.resolve(n?n.document.mutableCopy():Xr.newInvalidDocument(t))}getEntries(e,t){let n=qi();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xr.newInvalidDocument(e))})),wn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=qi();const s=t.path,o=new un(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||mn(fn(o),n)<=0||(r.has(o.key)||Ui(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return wn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Nt(9500)}Xr(e,t){return wn.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ca(this)}getSize(e){return wn.resolve(this.size)}}class ca extends Zo{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.vr.addEntry(e,r)):this.vr.removeEntry(n)})),wn.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}class ua{constructor(e){this.persistence=e,this.ei=new Vi((e=>ki(e)),_i),this.lastRemoteSnapshotVersion=rn.min(),this.highestTargetId=0,this.ti=0,this.ni=new sa,this.targetCount=0,this.ri=Ho.rr()}forEachTarget(e,t){return this.ei.forEach(((e,n)=>t(n))),wn.resolve()}getLastRemoteSnapshotVersion(e){return wn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wn.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),wn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ti&&(this.ti=t),wn.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Ho(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,wn.resolve()}updateTargetData(e,t){return this.ar(t),wn.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,wn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.ei.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.ei.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),wn.waitFor(i).next((()=>r))}getTargetCount(e){return wn.resolve(this.targetCount)}getTargetData(e,t){const n=this.ei.get(t)||null;return wn.resolve(n)}addMatchingKeys(e,t,n){return this.ni.qr(t,n),wn.resolve()}removeMatchingKeys(e,t,n){this.ni.$r(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),wn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),wn.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ni.Wr(t);return wn.resolve(n)}containsKey(e,t){return wn.resolve(this.ni.containsKey(t))}}class da{constructor(e,t){this.ii={},this.overlays={},this.si=new _n(0),this.oi=!1,this.oi=!0,this._i=new ia,this.referenceDelegate=e(this),this.ai=new ua(this),this.indexManager=new Bo,this.remoteDocumentCache=function(e){return new la(e)}((e=>this.referenceDelegate.ui(e))),this.serializer=new Mo(t),this.ci=new na(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ra,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ii[e.toKey()];return n||(n=new aa(t,this.referenceDelegate),this.ii[e.toKey()]=n),n}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,n){Ct("MemoryPersistence","Starting transaction:",e);const r=new ha(this.si.next());return this.referenceDelegate.li(),n(r).next((e=>this.referenceDelegate.hi(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Pi(e,t){return wn.or(Object.values(this.ii).map((n=>()=>n.containsKey(e,t))))}}class ha extends vn{constructor(e){super(),this.currentSequenceNumber=e}}class pa{constructor(e){this.persistence=e,this.Ti=new sa,this.Ii=null}static Ei(e){return new pa(e)}get di(){if(this.Ii)return this.Ii;throw Nt(60996)}addReference(e,t,n){return this.Ti.addReference(n,t),this.di.delete(n.toString()),wn.resolve()}removeReference(e,t,n){return this.Ti.removeReference(n,t),this.di.add(n.toString()),wn.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),wn.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach((e=>this.di.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.di.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wn.forEach(this.di,(n=>{const r=un.fromPath(n);return this.Ai(e,r).next((e=>{e||t.removeEntry(r,rn.min())}))})).next((()=>(this.Ii=null,t.apply(e))))}updateLimboDocument(e,t){return this.Ai(e,t).next((e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())}))}ui(e){return 0}Ai(e,t){return wn.or([()=>wn.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class fa{constructor(e,t){this.persistence=e,this.Ri=new Vi((e=>jn(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Jo(this,t)}static Ei(e,t){return new fa(e,t)}li(){}hi(e){return wn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Vr(e){let t=0;return this.Ar(e,(e=>{t++})).next((()=>t))}Ar(e,t){return wn.forEach(this.Ri,((n,r)=>this.gr(e,n,r).next((e=>e?wn.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Xr(e,(r=>this.gr(e,r,t).next((e=>{e||(n++,i.removeEntry(r,rn.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),wn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),wn.resolve()}removeReference(e,t,n){return this.Ri.set(n,e.currentSequenceNumber),wn.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),wn.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Fr(e.data.value)),t}gr(e,t,n){return wn.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Ri.get(t);return wn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ga{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ls=n,this.hs=r}static Ps(e,t){let n=Zi(),r=Zi();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ga(e,t.fromCache,n,r)}}class ma{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class ya{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=w()?8:bn(x())>0?6:4}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Rs(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Vs(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new ma;return this.fs(e,t,n).next((r=>{if(i.result=r,this.Is)return this.gs(e,t,n,r.size)}))})).next((()=>i.result))}gs(e,t,n,r){return n.documentReadCount<this.Es?(Tt()<=U.DEBUG&&Ct("QueryEngine","SDK will not create cache indexes for query:",Mi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),wn.resolve()):(Tt()<=U.DEBUG&&Ct("QueryEngine","Query:",Mi(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ds*r?(Tt()<=U.DEBUG&&Ct("QueryEngine","The SDK decides to create cache indexes for query:",Mi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):wn.resolve())}Rs(e,t){if(Ii(t))return wn.resolve(null);let n=Ni(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=Pi(t,null,"F"),n=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Zi(...r);return this.As.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.ps(t,r);return this.ys(t,s,i,n.readTime)?this.Rs(e,Pi(t,null,"F")):this.ws(e,s,t,n)}))))})))))}Vs(e,t,n,r){return Ii(t)||r.isEqual(rn.min())?wn.resolve(null):this.As.getDocuments(e,n).next((i=>{const s=this.ps(t,i);return this.ys(t,s,n,r)?wn.resolve(null):(Tt()<=U.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Mi(t)),this.ws(e,s,t,pn(r,dn)).next((e=>e)))}))}ps(e,t){let n=new ar(Bi(e));return t.forEach(((t,r)=>{Ui(e,r)&&(n=n.add(r))})),n}ys(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}fs(e,t,n){return Tt()<=U.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",Mi(t)),this.As.getDocumentsMatchingQuery(e,t,gn.min(),n)}ws(e,t,n,r){return this.As.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}const va="LocalStore";class xa{constructor(e,t,n,r){this.persistence=e,this.bs=t,this.serializer=r,this.Ss=new ir(Qt),this.Ds=new Vi((e=>ki(e)),_i),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(n)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ta(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ss)))}}function wa(e,t,n,r){return new xa(e,t,n,r)}async function ba(e,t){const n=Pt(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.Fs(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=Zi();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({Ms:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function ka(e){const t=Pt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ai.getLastRemoteSnapshotVersion(e)))}function _a(e,t,n){let r=Zi(),i=Zi();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=qi();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(rn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Ct(va,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{xs:r,Os:i}}))}function Sa(e,t){const n=Pt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=Sn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ea(e,t){const n=Pt(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.ai.getTargetData(e,t).next((i=>i?(r=i,wn.resolve(r)):n.ai.allocateTargetId(e).next((i=>(r=new Oo(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.ai.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.Ss.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(e.targetId,e),n.Ds.set(t,e.targetId)),e}))}async function Ta(e,t,n){const r=Pt(e),i=r.Ss.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!kn(e))throw e;Ct(va,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(i.target)}function Ca(e,t,n){const r=Pt(e);let i=rn.min(),s=Zi();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Pt(e),i=r.Ds.get(n);return void 0!==i?wn.resolve(r.Ss.get(i)):r.ai.getTargetData(t,n)}(r,e,Ni(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.bs.getDocumentsMatchingQuery(e,t,n?i:rn.min(),n?s:Zi()))).next((e=>(Ia(r,Fi(t),e),{documents:e,Ns:s})))))}function Ia(e,t,n){let r=e.vs.get(t)||rn.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.vs.set(t,r)}class ja{constructor(){this.activeTargetIds=ts()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ra{constructor(){this.So=new ja,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,n){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new ja,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Na{vo(e){}shutdown(){}}const Aa="ConnectivityMonitor";class La{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){Ct(Aa,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){Ct(Aa,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Pa=null;function Da(){return null===Pa?Pa=268435456+Math.round(2147483648*Math.random()):Pa++,"0x"+Pa.toString(16)}const Oa="RestConnection",Ma={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ua{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${n}/databases/${r}`,this.qo=this.databaseId.database===Sr?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Qo(e,t,n,r,i){const s=Da(),o=this.$o(e,t.toUriEncodedString());Ct(Oa,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(a,r,i),this.Ko(e,o,a,n).then((t=>(Ct(Oa,`Received RPC '${e}' ${s}: `,t),t)),(t=>{throw jt(Oa,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t}))}Wo(e,t,n,r,i,s){return this.Qo(e,t,n,r,i)}Uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+St,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}$o(e,t){const n=Ma[e];return`${this.Lo}/v1/${t}:${n}`}terminate(){}}class Fa{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}const Ba="WebChannelConnection";class za extends Ua{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,n,r){const i=Da();return new Promise(((s,o)=>{const a=new dt;a.setWithCredentials(!0),a.listenOnce(pt.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case ft.NO_ERROR:const t=a.getResponseJson();Ct(Ba,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case ft.TIMEOUT:Ct(Ba,`RPC '${e}' ${i} timed out`),o(new Ot(Dt.DEADLINE_EXCEEDED,"Request time out"));break;case ft.HTTP_ERROR:const n=a.getStatus();if(Ct(Ba,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Dt).indexOf(t)>=0?t:Dt.UNKNOWN}(t.status);o(new Ot(e,t.message))}else o(new Ot(Dt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ot(Dt.UNAVAILABLE,"Connection failed."));break;default:Nt(9055,{s_:e,streamId:i,o_:a.getLastErrorCode(),__:a.getLastError()})}}finally{Ct(Ba,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);Ct(Ba,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)}))}a_(e,t,n){const r=Da(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vt(),o=yt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Uo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Ct(Ba,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const p=new Fa({Go:t=>{h?Ct(Ba,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(Ct(Ba,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),Ct(Ba,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},zo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,ht.EventType.OPEN,(()=>{h||(Ct(Ba,`RPC '${e}' stream ${r} transport opened.`),p.t_())})),f(u,ht.EventType.CLOSE,(()=>{h||(h=!0,Ct(Ba,`RPC '${e}' stream ${r} transport closed`),p.r_())})),f(u,ht.EventType.ERROR,(t=>{h||(h=!0,jt(Ba,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.r_(new Ot(Dt.UNAVAILABLE,"The operation could not be completed")))})),f(u,ht.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Lt(!!i,16349);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ct(Ba,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Us[e];if(void 0!==t)return zs(t)}(t),i=o.message;void 0===n&&(n=Dt.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,p.r_(new Ot(n,i)),u.close()}else Ct(Ba,`RPC '${e}' stream ${r} received:`,i),p.i_(i)}})),f(o,mt.STAT_EVENT,(t=>{t.stat===gt.PROXY?Ct(Ba,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===gt.NOPROXY&&Ct(Ba,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.n_()}),0),p}}function Va(){return"undefined"!=typeof document?document:null}function Wa(e){return new oo(e,!0)}class qa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.bi=e,this.timerId=t,this.u_=n,this.c_=r,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),n=Math.max(0,Date.now()-this.T_),r=Math.max(0,t-n);r>0&&Ct("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,r,(()=>(this.T_=Date.now(),e()))),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){null!==this.P_&&(this.P_.skipDelay(),this.P_=null)}cancel(){null!==this.P_&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}const Ha="PersistentStream";class $a{constructor(e,t,n,r,i,s,o,a){this.bi=e,this.R_=n,this.V_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new qa(e,t)}w_(){return 1===this.state||5===this.state||this.b_()}b_(){return 2===this.state||3===this.state}start(){this.p_=0,4!==this.state?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&null===this.f_&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,(()=>this.C_())))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,4!==e?this.y_.reset():t&&t.code===Dt.RESOURCE_EXHAUSTED?(It(t.toString()),It("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Dt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.m_===t&&this.B_(n,r)}),(t=>{e((()=>{const e=new Ot(Dt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.L_(e)}))}))}B_(e,t){const n=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo((()=>{n((()=>this.listener.jo()))})),this.stream.Jo((()=>{n((()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,(()=>(this.b_()&&(this.state=3),Promise.resolve()))),this.listener.Jo())))})),this.stream.Zo((e=>{n((()=>this.L_(e)))})),this.stream.onMessage((e=>{n((()=>1==++this.p_?this.q_(e):this.onNext(e)))}))}S_(){this.state=5,this.y_.E_((async()=>{this.state=0,this.start()}))}L_(e){return Ct(Ha,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget((()=>this.m_===e?t():(Ct(Ha,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Ka extends $a{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nt(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Lt(void 0===t||"string"==typeof t,58123),dr.fromBase64String(t||"")):(Lt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),dr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Dt.UNKNOWN:zs(e.code);return new Ot(t,e.message||"")}(o);n=new Js(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=yo(e,r.document.name),s=ho(r.document.updateTime),o=r.document.createTime?ho(r.document.createTime):rn.min(),a=new Qr({mapValue:{fields:r.document.fields}}),l=Xr.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ys(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=yo(e,r.document),s=r.readTime?ho(r.readTime):rn.min(),o=Xr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ys([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=yo(e,r.document),s=r.removedTargetIds||[];n=new Ys([],s,i,null)}else{if(!("filter"in t))return Nt(11601,{Vt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ms(r,i),o=e.targetId;n=new Xs(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return rn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?rn.min():t.readTime?ho(t.readTime):rn.min()}(e);return this.listener.Q_(t,n)}U_(e){const t={};t.database=wo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Si(r)?{documents:So(e,r)}:{query:Eo(e,r).gt},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=co(e,t.resumeToken);const r=ao(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(rn.min())>0){n.readTime=lo(e,t.snapshotVersion.toTimestamp());const r=ao(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.F_(t)}K_(e){const t={};t.database=wo(this.serializer),t.removeTarget=e,this.F_(t)}}class Ga extends $a{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Lt(!e.writeResults||0===e.writeResults.length,55816),this.listener.z_()}onNext(e){Lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=function(e,t){return e&&e.length>0?(Lt(void 0!==t,14353),e.map((e=>function(e,t){let n=e.updateTime?ho(e.updateTime):ho(t);return n.isEqual(rn.min())&&(n=ho(t)),new vs(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ho(e.commitTime);return this.listener.j_(n,t)}H_(){const e={};e.database=wo(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>_o(this.serializer,e)))};this.F_(t)}}class Qa{}class Ya extends Qa{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.J_=!1}Y_(){if(this.J_)throw new Ot(Dt.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,n,r){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Qo(e,fo(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ot(Dt.UNKNOWN,e.toString())}))}Wo(e,t,n,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.Wo(e,fo(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ot(Dt.UNKNOWN,e.toString())}))}terminate(){this.J_=!0,this.connection.terminate()}}class Xa{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){0===this.Z_&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve()))))}ia(e){"Online"===this.state?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,"Online"===e&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(It(t),this.ea=!1):Ct("OnlineStateTracker",t)}sa(){null!==this.X_&&(this.X_.cancel(),this.X_=null)}}const Ja="RemoteStore";class Za{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo((e=>{n.enqueueAndForget((async()=>{ll(this)&&(Ct(Ja,"Restarting streams for network reachability change."),await async function(e){const t=Pt(e);t.aa.add(4),await tl(t),t.la.set("Unknown"),t.aa.delete(4),await el(t)}(this))}))})),this.la=new Xa(n,r)}}async function el(e){if(ll(e))for(const t of e.ua)await t(!0)}async function tl(e){for(const t of e.ua)await t(!1)}function nl(e,t){const n=Pt(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),al(n)?ol(n):Cl(n).b_()&&il(n,t))}function rl(e,t){const n=Pt(e),r=Cl(n);n._a.delete(t),r.b_()&&sl(n,t),0===n._a.size&&(r.b_()?r.v_():ll(n)&&n.la.set("Unknown"))}function il(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(rn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Cl(e).U_(t)}function sl(e,t){e.ha.Ke(t),Cl(e).K_(t)}function ol(e){e.ha=new eo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Cl(e).start(),e.la.ta()}function al(e){return ll(e)&&!Cl(e).w_()&&e._a.size>0}function ll(e){return 0===Pt(e).aa.size}function cl(e){e.ha=void 0}async function ul(e){e.la.set("Online")}async function dl(e){e._a.forEach(((t,n)=>{il(e,t)}))}async function hl(e,t){cl(e),al(e)?(e.la.ia(t),ol(e)):e.la.set("Unknown")}async function pl(e,t,n){if(e.la.set("Online"),t instanceof Js&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e._a.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e._a.delete(r),e.ha.removeTarget(r))}(e,t)}catch(n){Ct(Ja,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fl(e,n)}else if(t instanceof Ys?e.ha.Xe(t):t instanceof Xs?e.ha.ot(t):e.ha.nt(t),!n.isEqual(rn.min()))try{const t=await ka(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.ha.It(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e._a.get(r);i&&e._a.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e._a.get(t);if(!r)return;e._a.set(t,r.withResumeToken(dr.EMPTY_BYTE_STRING,r.snapshotVersion)),sl(e,t);const i=new Oo(r.target,t,n,r.sequenceNumber);il(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ct(Ja,"Failed to raise snapshot:",t),await fl(e,t)}}async function fl(e,t,n){if(!kn(t))throw t;e.aa.add(1),await tl(e),e.la.set("Offline"),n||(n=()=>ka(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ct(Ja,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await el(e)}))}function gl(e,t){return t().catch((n=>fl(e,n,t)))}async function ml(e){const t=Pt(e),n=Il(t);let r=t.oa.length>0?t.oa[t.oa.length-1].batchId:Sn;for(;yl(t);)try{const e=await Sa(t.localStore,r);if(null===e){0===t.oa.length&&n.v_();break}r=e.batchId,vl(t,e)}catch(e){await fl(t,e)}xl(t)&&wl(t)}function yl(e){return ll(e)&&e.oa.length<10}function vl(e,t){e.oa.push(t);const n=Il(e);n.b_()&&n.W_&&n.G_(t.mutations)}function xl(e){return ll(e)&&!Il(e).w_()&&e.oa.length>0}function wl(e){Il(e).start()}async function bl(e){Il(e).H_()}async function kl(e){const t=Il(e);for(const n of e.oa)t.G_(n.mutations)}async function _l(e,t,n){const r=e.oa.shift(),i=Ds.from(r,t,n);await gl(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ml(e)}async function Sl(e,t){t&&Il(e).W_&&await async function(e,t){if(function(e){return Bs(e)&&e!==Dt.ABORTED}(t.code)){const n=e.oa.shift();Il(e).D_(),await gl(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ml(e)}}(e,t),xl(e)&&wl(e)}async function El(e,t){const n=Pt(e);n.asyncQueue.verifyOperationInProgress(),Ct(Ja,"RemoteStore received new credentials");const r=ll(n);n.aa.add(3),await tl(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await el(n)}async function Tl(e,t){const n=Pt(e);t?(n.aa.delete(2),await el(n)):t||(n.aa.add(2),await tl(n),n.la.set("Unknown"))}function Cl(e){return e.Pa||(e.Pa=function(e,t,n){const r=Pt(e);return r.Y_(),new Ka(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:ul.bind(null,e),Jo:dl.bind(null,e),Zo:hl.bind(null,e),Q_:pl.bind(null,e)}),e.ua.push((async t=>{t?(e.Pa.D_(),al(e)?ol(e):e.la.set("Unknown")):(await e.Pa.stop(),cl(e))}))),e.Pa}function Il(e){return e.Ta||(e.Ta=function(e,t,n){const r=Pt(e);return r.Y_(),new Ga(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{jo:()=>Promise.resolve(),Jo:bl.bind(null,e),Zo:Sl.bind(null,e),z_:kl.bind(null,e),j_:_l.bind(null,e)}),e.ua.push((async t=>{t?(e.Ta.D_(),await ml(e)):(await e.Ta.stop(),e.oa.length>0&&(Ct(Ja,`Stopping write stream with ${e.oa.length} pending writes`),e.oa=[]))}))),e.Ta}class jl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new jl(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ot(Dt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rl(e,t){if(It("AsyncQueue",`${t}: ${e}`),kn(e))return new Ot(Dt.UNAVAILABLE,`${t}: ${e}`);throw e}class Nl{static emptySet(e){return new Nl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||un.comparator(t.key,n.key):(e,t)=>un.comparator(e.key,t.key),this.keyedMap=$i(),this.sortedSet=new ir(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Nl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Al{constructor(){this.Ia=new ir(un.comparator)}track(e){const t=e.doc.key,n=this.Ia.get(t);n?0!==e.type&&3===n.type?this.Ia=this.Ia.insert(t,e):3===e.type&&1!==n.type?this.Ia=this.Ia.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Ia=this.Ia.remove(t):1===e.type&&2===n.type?this.Ia=this.Ia.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Nt(63341,{Vt:e,Ea:n}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ll{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Ll(e,t,Nl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Di(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Pl{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some((e=>e.ma()))}}class Dl{constructor(){this.queries=Ol(),this.onlineState="Unknown",this.fa=new Set}terminate(){!function(e,t){const n=Pt(e),r=n.queries;n.queries=Ol(),r.forEach(((e,n)=>{for(const r of n.Ra)r.onError(t)}))}(this,new Ot(Dt.ABORTED,"Firestore shutting down"))}}function Ol(){return new Vi((e=>Oi(e)),Di)}async function Ml(e,t){const n=Pt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Va()&&t.ma()&&(r=2):(s=new Pl,r=t.ma()?0:1);try{switch(r){case 0:s.Aa=await n.onListen(i,!0);break;case 1:s.Aa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Rl(e,`Initialization of query '${Mi(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Ra.push(t),t.ga(n.onlineState),s.Aa&&t.pa(s.Aa)&&zl(n)}async function Ul(e,t){const n=Pt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Ra.indexOf(t);e>=0&&(s.Ra.splice(e,1),0===s.Ra.length?i=t.ma()?0:1:!s.Va()&&t.ma()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Fl(e,t){const n=Pt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Ra)e.pa(i)&&(r=!0);t.Aa=i}}r&&zl(n)}function Bl(e,t,n){const r=Pt(e),i=r.queries.get(t);if(i)for(const s of i.Ra)s.onError(n);r.queries.delete(t)}function zl(e){e.fa.forEach((e=>{e.next()}))}var Vl,Wl;(Wl=Vl||(Vl={})).ya="default",Wl.Cache="cache";class ql{constructor(e,t,n){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=n||{}}pa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ll(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache)return!0;if(!this.ma())return!0;const n="Offline"!==t;return(!this.options.Fa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Ca(e){e=Ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Vl.Cache}}class Hl{constructor(e){this.key=e}}class $l{constructor(e){this.key=e}}class Kl{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Zi(),this.mutatedKeys=Zi(),this.Ua=Bi(e),this.Ka=new Nl(this.Ua)}get Wa(){return this.qa}Ga(e,t){const n=t?t.za:new Al,r=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Ui(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.ja(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Ua(u,a)>0||l&&this.Ua(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ka:s,za:n,ys:o,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const s=e.za.da();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nt(20277,{Vt:e})}};return n(e)-n(t)}(e.type,t.type)||this.Ua(e.doc,t.doc))),this.Ha(n),r=null!=r&&r;const o=t&&!r?this.Ja():[],a=0===this.$a.size&&this.current&&!r?1:0,l=a!==this.Qa;return this.Qa=a,0!==s.length||l?{snapshot:new Ll(this.query,e.Ka,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ya:o}:{Ya:o}}ga(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Al,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach((e=>this.qa=this.qa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.qa=this.qa.delete(e))),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Zi(),this.Ka.forEach((e=>{this.Za(e.key)&&(this.$a=this.$a.add(e.key))}));const t=[];return e.forEach((e=>{this.$a.has(e)||t.push(new $l(e))})),this.$a.forEach((n=>{e.has(n)||t.push(new Hl(n))})),t}Xa(e){this.qa=e.Ns,this.$a=Zi();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Ll.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,0===this.Qa,this.hasCachedResults)}}const Gl="SyncEngine";class Ql{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yl{constructor(e){this.key=e,this.tu=!1}}class Xl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new Vi((e=>Oi(e)),Di),this.iu=new Map,this.su=new Set,this.ou=new ir(un.comparator),this._u=new Map,this.au=new sa,this.uu={},this.cu=new Map,this.lu=Ho.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return!0===this.hu}}async function Jl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=xc(e);let i;const s=r.ru.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.eu()):i=await ec(r,t,n,!0),i}async function Zl(e,t){const n=xc(e);await ec(n,t,!0,!1)}async function ec(e,t,n,r){const i=await Ea(e.localStore,Ni(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await tc(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&nl(e.remoteStore,i),a}async function tc(e,t,n,r,i){e.Pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ga(n);i.ys&&(i=await Ca(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ga(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return pc(e,t.targetId,a.Ya),a.snapshot}(e,t,n,r);const s=await Ca(e.localStore,t,!0),o=new Kl(t,s.Ns),a=o.Ga(s.documents),l=Qs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);pc(e,n,c.Ya);const u=new Ql(t,n,o);return e.ru.set(t,u),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),c.snapshot}async function nc(e,t,n){const r=Pt(e),i=r.ru.get(t),s=r.iu.get(i.targetId);if(s.length>1)return r.iu.set(i.targetId,s.filter((e=>!Di(e,t)))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ta(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rl(r.remoteStore,i.targetId),dc(r,i.targetId)})).catch(xn)):(dc(r,i.targetId),await Ta(r.localStore,i.targetId,!0))}async function rc(e,t){const n=Pt(e),r=n.ru.get(t),i=n.iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rl(n.remoteStore,r.targetId))}async function ic(e,t){const n=Pt(e);try{const e=await function(e,t){const n=Pt(e),r=t.snapshotVersion;let i=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.Cs.newChangeBuffer({trackRemovals:!0});i=n.Ss;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.ai.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.ai.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(dr.EMPTY_BYTE_STRING,rn.min()).withLastLimboFreeSnapshotVersion(rn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.ai.updateTargetData(e,c))}));let a=qi(),l=Zi();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(_a(e,s,t.documentUpdates).next((e=>{a=e.xs,l=e.Os}))),!r.isEqual(rn.min())){const t=n.ai.getLastRemoteSnapshotVersion(e).next((t=>n.ai.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return wn.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.Ss=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n._u.get(t);r&&(Lt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.tu=!0:e.modifiedDocuments.size>0?Lt(r.tu,14607):e.removedDocuments.size>0&&(Lt(r.tu,42227),r.tu=!1))})),await mc(n,e,t)}catch(e){await xn(e)}}function sc(e,t,n){const r=Pt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ru.forEach(((n,r)=>{const i=r.view.ga(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Pt(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Ra)i.ga(t)&&(r=!0)})),r&&zl(n)}(r.eventManager,t),e.length&&r.nu.Q_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function oc(e,t,n){const r=Pt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r._u.get(t),s=i&&i.key;if(s){let e=new ir(un.comparator);e=e.insert(s,Xr.newNoDocument(s,rn.min()));const n=Zi().add(s),i=new Gs(rn.min(),new Map,new ir(Qt),e,n);await ic(r,i),r.ou=r.ou.remove(s),r._u.delete(t),gc(r)}else await Ta(r.localStore,t,!1).then((()=>dc(r,t,n))).catch(xn)}async function ac(e,t){const n=Pt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Pt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.Cs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=wn.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Lt(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Zi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);uc(n,r,null),cc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mc(n,e)}catch(e){await xn(e)}}async function lc(e,t,n){const r=Pt(e);try{const e=await function(e,t){const n=Pt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Lt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);uc(r,t,n),cc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mc(r,e)}catch(n){await xn(n)}}function cc(e,t){(e.cu.get(t)||[]).forEach((e=>{e.resolve()})),e.cu.delete(t)}function uc(e,t,n){const r=Pt(e);let i=r.uu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.uu[r.currentUser.toKey()]=i}}function dc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach((t=>{e.au.containsKey(t)||hc(e,t)}))}function hc(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);null!==n&&(rl(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),gc(e))}function pc(e,t,n){for(const r of n)r instanceof Hl?(e.au.addReference(r.key,t),fc(e,r)):r instanceof $l?(Ct(Gl,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||hc(e,r.key)):Nt(19791,{Iu:r})}function fc(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(Ct(Gl,"New document in limbo: "+n),e.su.add(r),gc(e))}function gc(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new un(an.fromString(t)),r=e.lu.next();e._u.set(r,new Yl(n)),e.ou=e.ou.insert(n,r),nl(e.remoteStore,new Oo(Ni(Ci(n.path)),r,"TargetPurposeLimboResolution",_n.le))}}async function mc(e,t,n){const r=Pt(e),i=[],s=[],o=[];r.ru.isEmpty()||(r.ru.forEach(((e,a)=>{o.push(r.Pu(a,t,n).then((e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=ga.Ps(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.nu.Q_(i),await async function(e,t){const n=Pt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>wn.forEach(t,(t=>wn.forEach(t.ls,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>wn.forEach(t.hs,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!kn(e))throw e;Ct(va,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ss.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ss=n.Ss.insert(e,i)}}}(r.localStore,s))}async function yc(e,t){const n=Pt(e);if(!n.currentUser.isEqual(t)){Ct(Gl,"User change. New user:",t.toKey());const e=await ba(n.localStore,t);n.currentUser=t,function(e,t){e.cu.forEach((e=>{e.forEach((e=>{e.reject(new Ot(Dt.CANCELLED,t))}))})),e.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mc(n,e.Ms)}}function vc(e,t){const n=Pt(e),r=n._u.get(t);if(r&&r.tu)return Zi().add(r.key);{let e=Zi();const r=n.iu.get(t);if(!r)return e;for(const t of r){const r=n.ru.get(t);e=e.unionWith(r.view.Wa)}return e}}function xc(e){const t=Pt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ic.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=oc.bind(null,t),t.nu.Q_=Fl.bind(null,t.eventManager),t.nu.Tu=Bl.bind(null,t.eventManager),t}function wc(e){const t=Pt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ac.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lc.bind(null,t),t}class bc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wa(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return wa(this.persistence,new ya,e.initialUser,this.serializer)}Ru(e){return new da(pa.Ei,this.serializer)}Au(e){return new Ra}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bc.provider={build:()=>new bc};class kc extends bc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Lt(this.persistence.referenceDelegate instanceof fa,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Yo(n,e.asyncQueue,t)}Ru(e){const t=void 0!==this.cacheSizeBytes?qo.withCacheSize(this.cacheSizeBytes):qo.DEFAULT;return new da((e=>fa.Ei(e,t)),this.serializer)}}class _c{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>sc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=yc.bind(null,this.syncEngine),await Tl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Dl}createDatastore(e){const t=Wa(e.databaseInfo.databaseId),n=function(e){return new za(e)}(e.databaseInfo);return function(e,t,n,r){return new Ya(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Za(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>sc(this.syncEngine,e,0)),La.C()?new La:new Na)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Xl(e,t,n,r,i,s);return o&&(a.hu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Pt(e);Ct(Ja,"RemoteStore shutting down."),t.aa.add(5),await tl(t),t.ca.shutdown(),t.la.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}_c.provider={build:()=>new _c};class Sc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):It("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Ec="FirestoreClient";class Tc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=Gt.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,(async e=>{Ct(Ec,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ct(Ec,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Rl(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Cc(e,t){e.asyncQueue.verifyOperationInProgress(),Ct(Ec,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ba(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ic(e,t){e.asyncQueue.verifyOperationInProgress();const n=await jc(e);Ct(Ec,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>El(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>El(t.remoteStore,n))),e._onlineComponents=t}async function jc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ct(Ec,"Using user provided OfflineComponentProvider");try{await Cc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Dt.FAILED_PRECONDITION||e.code===Dt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;jt("Error using user provided cache. Falling back to memory cache: "+n),await Cc(e,new bc)}}else Ct(Ec,"Using default OfflineComponentProvider"),await Cc(e,new kc(void 0));return e._offlineComponents}async function Rc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ct(Ec,"Using user provided OnlineComponentProvider"),await Ic(e,e._uninitializedComponentsProvider._online)):(Ct(Ec,"Using default OnlineComponentProvider"),await Ic(e,new _c))),e._onlineComponents}function Nc(e){return Rc(e).then((e=>e.syncEngine))}async function Ac(e){const t=await Rc(e),n=t.eventManager;return n.onListen=Jl.bind(null,t.syncEngine),n.onUnlisten=nc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Zl.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rc.bind(null,t.syncEngine),n}function Lc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mt;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Sc({next:a=>{s.yu(),t.enqueueAndForget((()=>Ul(e,o)));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new Ot(Dt.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new Ot(Dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new ql(Ci(n.path),s,{includeMetadataChanges:!0,Fa:!0});return Ml(e,o)}(await Ac(e),e.asyncQueue,t,n,r))),r.promise}function Pc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Mt;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new Sc({next:n=>{s.yu(),t.enqueueAndForget((()=>Ul(e,o))),n.fromCache&&"server"===r.source?i.reject(new Ot(Dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new ql(n,s,{includeMetadataChanges:!0,Fa:!0});return Ml(e,o)}(await Ac(e),e.asyncQueue,t,n,r))),r.promise}function Dc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Oc=new Map;function Mc(e,t,n){if(!n)throw new Ot(Dt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Uc(e){if(!un.isDocumentKey(e))throw new Ot(Dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fc(e){if(un.isDocumentKey(e))throw new Ot(Dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Bc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Nt(12329,{type:typeof e})}function zc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ot(Dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bc(e);throw new Ot(Dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}const Vc="firestore.googleapis.com",Wc=!0;class qc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ot(Dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vc,this.ssl=Wc}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Wc;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Wo;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Ko)throw new Ot(Dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ot(Dt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Dc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ot(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new Ot(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new Ot(Dt.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ot(Dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ot(Dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qc(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ft;switch(e.type){case"firstParty":return new Wt(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ot(Dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Oc.get(e);t&&(Ct("ComponentProvider","Removing Datastore"),Oc.delete(e),t.terminate())}(this),Promise.resolve()}}class $c{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $c(this.firestore,e,this._query)}}class Kc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kc(this.firestore,e,this._key)}}class Gc extends $c{constructor(e,t,n){super(e,t,Ci(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kc(this.firestore,null,new un(e))}withConverter(e){return new Gc(this.firestore,e,this._path)}}function Qc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=A(e),Mc("collection","path",t),e instanceof Hc){const n=an.fromString(t,...r);return Fc(n),new Gc(e,null,n)}{if(!(e instanceof Kc||e instanceof Gc))throw new Ot(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(an.fromString(t,...r));return Fc(n),new Gc(e.firestore,null,n)}}function Yc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=A(e),1===arguments.length&&(t=Gt.newId()),Mc("doc","path",t),e instanceof Hc){const n=an.fromString(t,...r);return Uc(n),new Kc(e,null,new un(n))}{if(!(e instanceof Kc||e instanceof Gc))throw new Ot(Dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(an.fromString(t,...r));return Uc(n),new Kc(e.firestore,e instanceof Gc?e.converter:null,new un(n))}}const Xc="AsyncQueue";class Jc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new qa(this,"async_queue_retry"),this.ju=()=>{const e=Va();e&&Ct(Xc,"Visibility state changed to "+e.visibilityState),this.y_.A_()},this.Hu=e;const t=Va();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Va();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise((()=>{}));const t=new Mt;return this.Yu((()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Qu.push(e),this.Zu())))}async Zu(){if(0!==this.Qu.length){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!kn(e))throw e;Ct(Xc,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_((()=>this.Zu()))}}Yu(e){const t=this.Hu.then((()=>(this.Wu=!0,e().catch((e=>{throw this.Ku=e,this.Wu=!1,It("INTERNAL UNHANDLED ERROR: ",Zc(e)),e})).then((e=>(this.Wu=!1,e))))));return this.Hu=t,t}enqueueAfterDelay(e,t,n){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const r=jl.createAndSchedule(this,e,t,n,(e=>this.Xu(e)));return this.Uu.push(r),r}Ju(){this.Ku&&Nt(47125,{ec:Zc(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do{e=this.Hu,await e}while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then((()=>{this.Uu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Uu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.tc()}))}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Zc(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function eu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class tu extends Hc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Jc,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jc(e),this._firestoreClient=void 0,await e}}}function nu(e){if(e._terminated)throw new Ot(Dt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||ru(e),e._firestoreClient}function ru(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new _r(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Dc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Tc(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class iu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new iu(dr.fromBase64String(e))}catch(e){throw new Ot(Dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new iu(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class su{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ot(Dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ou{constructor(e){this._methodName=e}}class au{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ot(Dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ot(Dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}class lu{constructor(e){this._values=(e||[]).map((e=>e))}toArray(){return this._values.map((e=>e))}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const cu=/^__.*__$/;class uu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Is(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cs(e,this.data,t,this.fieldTransforms)}}class du{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Is(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nt(40011,{oc:e})}}class pu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this._c(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new pu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r.lc(e),r}hc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ac({path:n,cc:!1});return r._c(),r}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Au(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(0===e.length)throw this.Tc("Document fields must not be empty");if(hu(this.oc)&&cu.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class fu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Wa(e)}dc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pu({oc:e,methodName:t,Ec:n,path:cn.emptyPath(),cc:!1,Ic:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gu(e){const t=e._freezeSettings(),n=Wa(e._databaseId);return new fu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function mu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.dc(s.merge||s.mergeFields?2:0,t,n,i);Iu("Data must be an object, but it was:",o,r);const a=Tu(r,o);let l,c;if(s.merge)l=new cr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ju(t,r,n);if(!o.contains(i))throw new Ot(Dt.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Lu(e,i)||e.push(i)}l=new cr(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new uu(new Qr(a),l,c)}class yu extends ou{_toFieldTransform(e){if(2!==e.oc)throw 1===e.oc?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yu}}function vu(e,t,n){return new pu({oc:3,Ec:t.settings.Ec,methodName:e._methodName,cc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class xu extends ou{_toFieldTransform(e){return new ys(e.path,new cs)}isEqual(e){return e instanceof xu}}class wu extends ou{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=vu(this,e,!0),n=this.Ac.map((e=>Eu(e,t))),r=new us(n);return new ys(e.path,r)}isEqual(e){return e instanceof wu&&E(this.Ac,e.Ac)}}class bu extends ou{constructor(e,t){super(e),this.Rc=t}_toFieldTransform(e){const t=new fs(e.serializer,is(e.serializer,this.Rc));return new ys(e.path,t)}isEqual(e){return e instanceof bu&&this.Rc===e.Rc}}function ku(e,t,n,r){const i=e.dc(1,t,n);Iu("Data must be an object, but it was:",i,r);const s=[],o=Qr.empty();nr(r,((e,r)=>{const a=Nu(t,e,n);r=A(r);const l=i.hc(a);if(r instanceof yu)s.push(a);else{const e=Eu(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new cr(s);return new du(o,a,i.fieldTransforms)}function _u(e,t,n,r,i,s){const o=e.dc(1,t,n),a=[ju(t,r,n)],l=[i];if(s.length%2!=0)throw new Ot(Dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(ju(t,s[h])),l.push(s[h+1]);const c=[],u=Qr.empty();for(let h=a.length-1;h>=0;--h)if(!Lu(c,a[h])){const e=a[h];let t=l[h];t=A(t);const n=o.hc(e);if(t instanceof yu)c.push(e);else{const r=Eu(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new cr(c);return new du(u,d,o.fieldTransforms)}function Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Eu(n,e.dc(r?4:3,t))}function Eu(e,t){if(Cu(e=A(e)))return Iu("Unsupported field value:",t,e),Tu(e,t);if(e instanceof ou)return function(e,t){if(!hu(t.oc))throw t.Tc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&4!==t.oc)throw t.Tc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Eu(i,t.Pc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=A(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return is(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=nn.fromDate(e);return{timestampValue:lo(t.serializer,n)}}if(e instanceof nn){const n=new nn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:lo(t.serializer,n)}}if(e instanceof au)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof iu)return{bytesValue:co(t.serializer,e._byteString)};if(e instanceof Kc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Tc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:po(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof lu)return function(e,t){return{mapValue:{fields:{[Tr]:{stringValue:jr},[Rr]:{arrayValue:{values:e.toArray().map((e=>{if("number"!=typeof e)throw t.Tc("VectorValues must only contain numeric values.");return ns(t.serializer,e)}))}}}}}}(e,t);throw t.Tc(`Unsupported field value: ${Bc(e)}`)}(e,t)}function Tu(e,t){const n={};return rr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):nr(e,((e,r)=>{const i=Eu(r,t.uc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Cu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof nn||e instanceof au||e instanceof iu||e instanceof Kc||e instanceof ou||e instanceof lu)}function Iu(e,t,n){if(!Cu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Bc(n);throw"an object"===r?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}function ju(e,t,n){if((t=A(t))instanceof su)return t._internalPath;if("string"==typeof t)return Nu(e,t);throw Au("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ru=new RegExp("[~\\*/\\[\\]]");function Nu(e,t,n){if(t.search(Ru)>=0)throw Au(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new su(...t.split("."))._internalPath}catch(r){throw Au(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Au(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Ot(Dt.INVALID_ARGUMENT,a+e+l)}function Lu(e,t){return e.some((e=>e.isEqual(t)))}class Pu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Du(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ou("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Du extends Pu{data(){return super.data()}}function Ou(e,t){return"string"==typeof t?Nu(e,t):t instanceof su?t._internalPath:t._delegate._internalPath}function Mu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ot(Dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uu{}class Fu extends Uu{}function Bu(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Uu&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Wu)).length,n=e.filter((e=>e instanceof zu)).length;if(t>1||t>0&&n>0)throw new Ot(Dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class zu extends Fu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zu(e,t,n)}_apply(e){const t=this._parse(e);return Gu(e._query,t),new $c(e.firestore,e.converter,Li(e._query,t))}_parse(e){const t=gu(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Ot(Dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Ku(o,s);const t=[];for(const n of o)t.push($u(r,e,n));a={arrayValue:{values:t}}}else a=$u(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Ku(o,s),a=Su(n,t,o,"in"===s||"not-in"===s);return ii.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Vu(e,t,n){const r=t,i=Ou("where",e);return zu._create(i,r,n)}class Wu extends Uu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wu(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Gu(n,i),n=Li(n,i)}(e._query,t),new $c(e.firestore,e.converter,Li(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class qu extends Fu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new qu(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ot(Dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ot(Dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ti(t,n)}(e._query,this._field,this._direction);return new $c(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ei(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Hu(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ou("orderBy",e);return qu._create(n,t)}function $u(e,t,n){if("string"==typeof(n=A(n))){if(""===n)throw new Ot(Dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ji(t)&&-1!==n.indexOf("/"))throw new Ot(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(an.fromString(n));if(!un.isDocumentKey(r))throw new Ot(Dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Br(e,new un(r))}if(n instanceof Kc)return Br(e,n._key);throw new Ot(Dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bc(n)}.`)}function Ku(e,t){if(!Array.isArray(e)||0===e.length)throw new Ot(Dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Gu(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ot(Dt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ot(Dt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Qu{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Nt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return nr(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Rr].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map((e=>fr(e.doubleValue)));return new lu(i)}convertGeoPoint(e){return new au(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=br(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kr(e));default:return null}}convertTimestamp(e){const t=pr(e);return new nn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=an.fromString(e);Lt(Do(n),9688,{name:e});const r=new Er(n.get(1),n.get(3)),i=new un(n.popFirst(5));return r.isEqual(t)||It(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Yu(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Xu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ju extends Pu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ou("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Zu extends Ju{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ed{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xu(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Zu(this._firestore,this._userDataWriter,n.key,n,new Xu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ot(Dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Zu(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Xu(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Zu(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xu(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:td(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function td(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nt(61501,{type:e})}}function nd(e){e=zc(e,Kc);const t=zc(e.firestore,tu);return Lc(nu(t),e._key).then((n=>ud(t,e,n)))}class rd extends Qu{constructor(e){super(),this.firestore=e}convertBytes(e){return new iu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kc(this.firestore,null,t)}}function id(e){e=zc(e,$c);const t=zc(e.firestore,tu),n=nu(t),r=new rd(t);return Mu(e._query),Pc(n,e._query).then((n=>new ed(t,r,e,n)))}function sd(e,t,n){e=zc(e,Kc);const r=zc(e.firestore,tu),i=Yu(e.converter,t,n);return cd(r,[mu(gu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,xs.none())])}function od(e,t,n){e=zc(e,Kc);const r=zc(e.firestore,tu),i=gu(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=A(t))||t instanceof su?_u(i,"updateDoc",e._key,t,n,a):ku(i,"updateDoc",e._key,t),cd(r,[s.toMutation(e._key,xs.exists(!0))])}function ad(e,t){const n=zc(e.firestore,tu),r=Yc(e),i=Yu(e.converter,t);return cd(n,[mu(gu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,xs.exists(!1))]).then((()=>r))}function ld(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=A(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||eu(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(eu(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof Kc)d=zc(e.firestore,tu),h=Ci(e._key.path),u={next:t=>{n[l]&&n[l](ud(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=zc(e,$c);d=zc(t.firestore,tu),h=t._query;const r=new rd(d);u={next:e=>{n[l]&&n[l](new ed(d,r,t,e))},error:n[l+1],complete:n[l+2]},Mu(e._query)}return function(e,t,n,r){const i=new Sc(r),s=new ql(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ml(await Ac(e),s))),()=>{i.yu(),e.asyncQueue.enqueueAndForget((async()=>Ul(await Ac(e),s)))}}(nu(d),h,c,u)}function cd(e,t){return function(e,t){const n=new Mt;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=wc(e);try{const e=await function(e,t){const n=Pt(e),r=nn.now(),i=t.reduce(((e,t)=>e.add(t.key)),Zi());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=qi(),l=Zi();return n.Cs.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Es(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Is(e.key,t,Yr(t.value.mapValue),xs.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Ki(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.uu[e.currentUser.toKey()];r||(r=new ir(Qt)),r=r.insert(t,n),e.uu[e.currentUser.toKey()]=r}(r,e.batchId,n),await mc(r,e.changes),await ml(r.remoteStore)}catch(e){const t=Rl(e,"Failed to persist write");n.reject(t)}}(await Nc(e),t,n))),n.promise}(nu(e),t)}function ud(e,t,n){const r=n.docs.get(t._key),i=new rd(e);return new Ju(e,i,t._key,r,new Xu(n.hasPendingWrites,n.fromCache),t.converter)}function dd(){return new xu("serverTimestamp")}function hd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new wu("arrayUnion",t)}function pd(e){return new bu("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){St=e}(Ke),Ve(new L("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new tu(new zt(e.getProvider("auth-internal")),new Ht(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ot(Dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Er(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Ye(bt,kt,e),Ye(bt,kt,"esm2017")}();Ye("firebase","11.6.1","app");function fd(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function gd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const md=gd,yd=new _("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),vd=new W("@firebase/auth");function xd(e){if(vd.logLevel<=U.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vd.error(`Auth (${Ke}): ${e}`,...n)}}function wd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Sd(e,...n)}function bd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Sd(e,...n)}function kd(e,t,n){const r=Object.assign(Object.assign({},md()),{[t]:n});return new _("auth","Firebase",r).create(t,{appName:e.name})}function _d(e){return kd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return yd.create(e,...n)}function Ed(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Sd(t,...r)}}function Td(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xd(t),new Error(t)}function Cd(e,t){e||Td(t)}function Id(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function jd(){return"http:"===Rd()||"https:"===Rd()}function Rd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Nd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(jd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Ad{constructor(e,t){this.shortDelay=e,this.longDelay=t,Cd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Nd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ld(e,t){Cd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Pd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Td("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Td("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Td("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Dd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Od=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Md=new Ad(3e4,6e4);function Ud(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Fd(e,t,n,r){return Bd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=C(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),Pd.fetch()(await Vd(e,e.config.apiHost,n,o),l)}))}async function Bd(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Dd),t);try{const t=new qd(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Hd(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Hd(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Hd(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Hd(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw kd(e,a,o);wd(e,a)}}catch(i){if(i instanceof k)throw i;wd(e,"network-request-failed",{message:String(i)})}}async function zd(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Fd(e,t,n,r,i);return"mfaPendingCredential"in s&&wd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Vd(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?Ld(e.config,i):`${e.config.apiScheme}://${i}`;if(Od.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Wd(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qd{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(bd(this.auth,"network-request-failed"))),Md.get())}))}}function Hd(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=bd(e,t,r);return i.customData._tokenResponse=n,i}function $d(e){return void 0!==e&&void 0!==e.enterprise}class Kd{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Wd(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Gd(e,t){return Fd(e,"GET","/v2/recaptchaConfig",Ud(e,t))}async function Qd(e,t){return Fd(e,"POST","/v1/accounts:lookup",t)}function Yd(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Xd(e){return 1e3*Number(e)}function Jd(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xd("JWT malformed, contained fewer than 3 sections"),null;try{const e=u(n);return e?JSON.parse(e):(xd("Failed to decode base64 JWT payload"),null)}catch(i){return xd("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Zd(e){const t=Jd(e);return Ed(t,"internal-error"),Ed("undefined"!==typeof t.exp,"internal-error"),Ed("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function eh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof k&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class th{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}class nh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yd(this.lastLoginAt),this.creationTime=Yd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function rh(e){var t;const n=e.auth,r=await e.getIdToken(),i=await eh(e,Qd(n,{idToken:r}));Ed(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ih(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,p)}function ih(e){return e.map((e=>{var{providerId:t}=e,n=fd(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ed(e.idToken,"internal-error"),Ed("undefined"!==typeof e.idToken,"internal-error"),Ed("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Zd(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ed(0!==e.length,"internal-error");const t=Zd(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ed(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Bd(e,{},(async()=>{const n=C({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Vd(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Pd.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new sh;return n&&(Ed("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ed("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ed("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sh,this.toJSON())}_performRefresh(){return Td("not implemented")}}function oh(e,t){Ed("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ah{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=fd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new th(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await eh(this,this.stsTokenManager.getToken(this.auth,e));return Ed(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=A(e),r=await n.getIdToken(t),i=Jd(r);Ed(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Yd(Xd(i.auth_time)),issuedAtTime:Yd(Xd(i.iat)),expirationTime:Yd(Xd(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=A(e);await rh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ed(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ah(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ed(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await rh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qe(this.auth.app))return Promise.reject(_d(this.auth));const e=await this.getIdToken();return await eh(this,async function(e,t){return Fd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:x,isAnonymous:w,providerData:b,stsTokenManager:k}=t;Ed(v&&k,e,"internal-error");const _=sh.fromJSON(this.name,k);Ed("string"===typeof v,e,"internal-error"),oh(u,e.name),oh(d,e.name),Ed("boolean"===typeof x,e,"internal-error"),Ed("boolean"===typeof w,e,"internal-error"),oh(h,e.name),oh(p,e.name),oh(f,e.name),oh(g,e.name),oh(m,e.name),oh(y,e.name);const S=new ah({uid:v,auth:e,email:d,emailVerified:x,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:_,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(S.providerData=b.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new sh;r.updateFromServerResponse(t);const i=new ah({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await rh(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ed(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ih(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),o=new sh;o.updateFromIdToken(n);const a=new ah({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new nh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const lh=new Map;function ch(e){Cd(e instanceof Function,"Expected a class definition");let t=lh.get(e);return t?(Cd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lh.set(e,t),t)}class uh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uh.type="NONE";const dh=uh;function hh(e,t,n){return`firebase:${e}:${t}:${n}`}class ph{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=hh(this.userKey,r.apiKey,i),this.fullPersistenceKey=hh("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await Qd(this.auth,{idToken:e}).catch((()=>{}));return t?ah._fromGetAccountInfoResponse(this.auth,t,e):null}return ah._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ph(ch(dh),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ch(dh);const s=hh(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await Qd(e,{idToken:t}).catch((()=>{}));if(!r)break;n=await ah._fromGetAccountInfoResponse(e,r,t)}else n=ah._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new ph(i,e,n)):new ph(i,e,n)}}function fh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(vh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(wh(t))return"Blackberry";if(bh(t))return"Webos";if(mh(t))return"Safari";if((t.includes("chrome/")||yh(t))&&!t.includes("edge/"))return"Chrome";if(xh(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function gh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/firefox\//i.test(e)}function mh(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:x()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/crios\//i.test(e)}function vh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/iemobile/i.test(e)}function xh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/android/i.test(e)}function wh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/blackberry/i.test(e)}function bh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/webos/i.test(e)}function kh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _h(){return function(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Sh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x();return kh(e)||xh(e)||bh(e)||wh(e)||/windows phone/i.test(e)||vh(e)}function Eh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=fh(x());break;case"Worker":t=`${fh(x())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ke}/${r}`}class Th{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ch{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Ih{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rh(this),this.idTokenSubscription=new Rh(this),this.beforeStateQueue=new Th(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise((e=>this._resolvePersistenceManagerAvailable=e))}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ch(t)),this._initializationPromise=this.queue((async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await ph.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(r=this._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Qd(this,{idToken:e}),n=await ah._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(qe(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ed(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qe(this.app))return Promise.reject(_d(this));const t=e?A(e):null;return t&&Ed(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ed(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return qe(this.app)?Promise.reject(_d(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qe(this.app)?Promise.reject(_d(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(ch(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Fd(e,"GET","/v2/passwordPolicy",Ud(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ch(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Fd(e,"POST","/v2/accounts:revokeToken",Ud(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ch(e)||this._popupRedirectResolver;Ed(t,this,"argument-error"),this.redirectPersistenceManager=await ph.create(this,[ch(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ed(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ed(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Eh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(vd.logLevel<=U.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];vd.warn(`Auth (${Ke}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function jh(e){return A(e)}class Rh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new R(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Ed(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ah(e){return Nh.loadJS(e)}function Lh(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ph{constructor(){this.enterprise=new Dh}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Dh{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Oh="NO_RECAPTCHA";class Mh{constructor(e){this.type="recaptcha-enterprise",this.auth=jh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;$d(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Oh)}))})):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ph).execute("siteKey",{action:"verify"})}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Gd(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Kd(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&$d(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Nh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Ah(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Uh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Mh(e);let o;if(i)o=Oh;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Fh(e,t,n,r,i){var s,o;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Uh(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Uh(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}if("PHONE_PROVIDER"===i){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const i=await Uh(e,t,n);return r(e,i).catch((async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Uh(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)}))}{const i=await Uh(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Bh(e){const t=jh(e),n=await Gd(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Kd(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Mh(t).verify()}}function zh(e,t,n){const r=jh(e);Ed(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Vh(t),{host:o,port:a}=function(e){const t=Vh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Wh(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Wh(t)}}}(t),l={url:`${s}//${o}${null===a?"":`:${a}`}/`},c=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Ed(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ed(E(l,r.config.emulator)&&E(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Vh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wh(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Td("not implemented")}_getIdTokenResponse(e){return Td("not implemented")}_linkToIdToken(e,t){return Td("not implemented")}_getReauthenticationResolver(e){return Td("not implemented")}}async function Hh(e,t){return Fd(e,"POST","/v1/accounts:signUp",t)}async function $h(e,t){return zd(e,"POST","/v1/accounts:signInWithPassword",Ud(e,t))}class Kh extends qh{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Kh(e,t,"password")}static _fromEmailAndCode(e,t){return new Kh(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Fh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",$h,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithEmailLink",Ud(e,t))}(e,{email:this._email,oobCode:this._password});default:wd(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Fh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hh,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithEmailLink",Ud(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:wd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Gh(e,t){return zd(e,"POST","/v1/accounts:signInWithIdp",Ud(e,t))}class Qh extends qh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Qh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wd("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=fd(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Qh(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Gh(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Gh(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Gh(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=C(t)}return e}}async function Yh(e,t){return Fd(e,"POST","/v1/accounts:sendVerificationCode",Ud(e,t))}const Xh={USER_NOT_FOUND:"user-not-found"};class Jh extends qh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Jh({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Jh({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Ud(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Ud(e,t));if(n.temporaryProof)throw Hd(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return zd(e,"POST","/v1/accounts:signInWithPhoneNumber",Ud(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Xh)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Jh({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Zh{constructor(e){var t,n,r,i,s,o;const a=I(j(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ed(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=I(j(e)).link,n=t?I(j(t)).deep_link_id:null,r=I(j(e)).deep_link_id;return(r?I(j(r)).link:null)||r||n||t||e}(e);try{return new Zh(t)}catch(n){return null}}}class ep{constructor(){this.providerId=ep.PROVIDER_ID}static credential(e,t){return Kh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Zh.parseLink(t);return Ed(n,"argument-error"),Kh._fromEmailAndCode(e,n.code,n.tenantId)}}ep.PROVIDER_ID="password",ep.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ep.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class tp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class np extends tp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class rp extends np{constructor(){super("facebook.com")}static credential(e){return Qh._fromParams({providerId:rp.PROVIDER_ID,signInMethod:rp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rp.credentialFromTaggedObject(e)}static credentialFromError(e){return rp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return rp.credential(t.oauthAccessToken)}catch(n){return null}}}rp.FACEBOOK_SIGN_IN_METHOD="facebook.com",rp.PROVIDER_ID="facebook.com";class ip extends np{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Qh._fromParams({providerId:ip.PROVIDER_ID,signInMethod:ip.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ip.credentialFromTaggedObject(e)}static credentialFromError(e){return ip.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ip.credential(n,r)}catch(i){return null}}}ip.GOOGLE_SIGN_IN_METHOD="google.com",ip.PROVIDER_ID="google.com";class sp extends np{constructor(){super("github.com")}static credential(e){return Qh._fromParams({providerId:sp.PROVIDER_ID,signInMethod:sp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sp.credentialFromTaggedObject(e)}static credentialFromError(e){return sp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sp.credential(t.oauthAccessToken)}catch(n){return null}}}sp.GITHUB_SIGN_IN_METHOD="github.com",sp.PROVIDER_ID="github.com";class op extends np{constructor(){super("twitter.com")}static credential(e,t){return Qh._fromParams({providerId:op.PROVIDER_ID,signInMethod:op.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return op.credentialFromTaggedObject(e)}static credentialFromError(e){return op.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return op.credential(n,r)}catch(i){return null}}}async function ap(e,t){return zd(e,"POST","/v1/accounts:signUp",Ud(e,t))}op.TWITTER_SIGN_IN_METHOD="twitter.com",op.PROVIDER_ID="twitter.com";class lp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ah._fromIdTokenResponse(e,n,r),s=cp(n);return new lp({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=cp(n);return new lp({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function cp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class up extends k{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,up.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new up(e,t,n,r)}}function dp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw up._fromErrorAndOperation(e,n,t,r);throw n}))}async function hp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await eh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return lp._forOperation(e,"link",r)}async function pp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(qe(r.app))return Promise.reject(_d(r));const i="reauthenticate";try{const s=await eh(e,dp(r,i,t,e),n);Ed(s.idToken,r,"internal-error");const o=Jd(s.idToken);Ed(o,r,"internal-error");const{sub:a}=o;return Ed(e.uid===a,r,"user-mismatch"),lp._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&wd(r,"user-mismatch"),s}}async function fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qe(e.app))return Promise.reject(_d(e));const r="signIn",i=await dp(e,r,t),s=await lp._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function gp(e,t){return fp(jh(e),t)}async function mp(e){const t=jh(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function yp(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=A(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await eh(i,async function(e,t){return Fd(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function vp(e,t){return Fd(e,"POST","/v2/accounts/mfaEnrollment:start",Ud(e,t))}new WeakMap;const xp="__sak";class wp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(xp,"1"),this.storage.removeItem(xp),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class bp extends wp{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Sh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);_h()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}bp.type="LOCAL";const kp=bp;function _p(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp(`${r}=([^;]+)`);return null!==(n=null===(t=document.cookie.match(i))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Sp(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class Ep{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Sp(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return _p(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Sp(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch((()=>{}))}_addListener(e,t){if(!this._isAvailable())return;const n=Sp(e);if(window.cookieStore){const e=e=>{const r=e.changed.find((e=>e.name===n));r&&t(r.value);e.deleted.find((e=>e.name===n))&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=_p(n);const i=setInterval((()=>{const e=_p(n);e!==r&&(t(e),r=e)}),1e3);this.listenerUnsubscribes.set(t,(()=>clearInterval(i)))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ep.type="COOKIE";class Tp extends wp{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Tp.type="SESSION";const Cp=Tp;class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Ip(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function jp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ip.receivers=[];class Rp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=jp("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Np(){return window}function Ap(){return"undefined"!==typeof Np().WorkerGlobalScope&&"function"===typeof Np().importScripts}const Lp="firebaseLocalStorageDb",Pp="firebaseLocalStorage",Dp="fbase_key";class Op{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Mp(e,t){return e.transaction([Pp],t?"readwrite":"readonly").objectStore(Pp)}function Up(){const e=indexedDB.open(Lp,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Pp,{keyPath:Dp})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Pp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Lp);return new Op(e).toPromise()}(),t(await Up()))}))}))}async function Fp(e,t,n){const r=Mp(e,!0).put({[Dp]:t,value:n});return new Op(r).toPromise()}function Bp(e,t){const n=Mp(e,!0).delete(t);return new Op(n).toPromise()}class zp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Up()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ap()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(Ap()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Rp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Up();return await Fp(e,xp,"1"),await Bp(e,xp),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Fp(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Mp(e,!1).get(t),r=await new Op(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Bp(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Mp(e,!1).getAll();return new Op(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}zp.type="LOCAL";const Vp=zp;function Wp(e,t){return Fd(e,"POST","/v2/accounts/mfaSignIn:start",Ud(e,t))}Lh("rcb"),new Ad(3e4,6e4);const qp="recaptcha";async function Hp(e,t,n){var r;if(!e._getRecaptchaConfig())try{await Bh(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ed("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Fh(e,r,"mfaSmsEnrollment",(async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Oh){Ed((null===n||void 0===n?void 0:n.type)===qp,e,"argument-error");return vp(e,await $p(e,t,n))}return vp(e,t)}),"PHONE_PROVIDER");return(await s.catch((e=>Promise.reject(e)))).phoneSessionInfo.sessionInfo}{Ed("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ed(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Fh(e,o,"mfaSmsSignIn",(async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Oh){Ed((null===n||void 0===n?void 0:n.type)===qp,e,"argument-error");return Wp(e,await $p(e,t,n))}return Wp(e,t)}),"PHONE_PROVIDER");return(await a.catch((e=>Promise.reject(e)))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Fh(e,t,"sendVerificationCode",(async(e,t)=>{if(t.captchaResponse===Oh){Ed((null===n||void 0===n?void 0:n.type)===qp,e,"argument-error");return Yh(e,await $p(e,t,n))}return Yh(e,t)}),"PHONE_PROVIDER");return(await r.catch((e=>Promise.reject(e)))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function $p(e,t,n){Ed(n.type===qp,e,"argument-error");const r=await n.verify();Ed("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Kp{constructor(e){this.providerId=Kp.PROVIDER_ID,this.auth=jh(e)}verifyPhoneNumber(e,t){return Hp(this.auth,e,A(t))}static credential(e,t){return Jh._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Kp.credentialFromTaggedObject(t)}static credentialFromError(e){return Kp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Jh._fromTokenResponse(n,r):null}}function Gp(e,t){return t?ch(t):(Ed(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Kp.PROVIDER_ID="phone",Kp.PHONE_SIGN_IN_METHOD="phone";class Qp extends qh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gh(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Gh(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Gh(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Yp(e){return fp(e.auth,new Qp(e),e.bypassAuthState)}function Xp(e){const{auth:t,user:n}=e;return Ed(n,t,"internal-error"),pp(n,new Qp(e),e.bypassAuthState)}async function Jp(e){const{auth:t,user:n}=e;return Ed(n,t,"internal-error"),hp(n,new Qp(e),e.bypassAuthState)}class Zp{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Yp;case"linkViaPopup":case"linkViaRedirect":return Jp;case"reauthViaPopup":case"reauthViaRedirect":return Xp;default:wd(this.auth,"internal-error")}}resolve(e){Cd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Cd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ef=new Ad(2e3,1e4);class tf extends Zp{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,tf.currentPopupAction&&tf.currentPopupAction.cancel(),tf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ed(e,this.auth,"internal-error"),e}async onExecution(){Cd(1===this.filter.length,"Popup operations only handle one event");const e=jp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(bd(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(bd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,tf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(bd(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ef.get())};e()}}tf.currentPopupAction=null;const nf=new Map;class rf extends Zp{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=af(t),r=of(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function sf(e,t){nf.set(e._key(),t)}function of(e){return ch(e._redirectPersistence)}function af(e){return hh("pendingRedirect",e.config.apiKey,e.name)}async function lf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(qe(e.app))return Promise.reject(_d(e));const r=jh(e),i=Gp(r,t),s=new rf(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class cf{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return df(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!df(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(bd(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(uf(e))}saveEventToCache(e){this.cachedEventUids.add(uf(e)),this.lastProcessedEventTime=Date.now()}}function uf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function df(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const hf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pf=/^https?/;async function ff(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Fd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(gf(r))return}catch(n){}wd(e,"unauthorized-domain")}function gf(e){const t=Id(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!pf.test(n))return!1;if(hf.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const mf=new Ad(3e4,6e4);function yf(){const e=Np().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function vf(e){return new Promise(((t,n)=>{var r,i,s;function o(){yf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yf(),n(bd(e,"network-request-failed"))},timeout:mf.get()})}if(null===(i=null===(r=Np().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Np().gapi)||void 0===s?void 0:s.load)){const t=Lh("iframefcb");return Np()[t]=()=>{gapi.load?o():n(bd(e,"network-request-failed"))},Ah(`${Nh.gapiScript}?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw xf=null,e}))}let xf=null;const wf=new Ad(5e3,15e3),bf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _f(e){const t=e.config;Ed(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ld(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ke},i=kf.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${C(r).slice(1)}`}async function Sf(e){const t=await function(e){return xf=xf||vf(e),xf}(e),n=Np().gapi;return Ed(n,e,"internal-error"),t.open({where:document.body,url:_f(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bf,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=bd(e,"network-request-failed"),s=Np().setTimeout((()=>{r(i)}),wf.get());function o(){Np().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const Ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Cf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ef),{width:r.toString(),height:i.toString(),top:s,left:o}),c=x().toLowerCase();n&&(a=yh(c)?"_blank":n),gh(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return kh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:x())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Tf(null);const d=window.open(t||"",a,u);Ed(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Tf(d)}const If="__/auth/handler",jf="emulator/auth/handler",Rf=encodeURIComponent("fac");async function Nf(e,t,n,r,i,s){Ed(e.config.authDomain,e,"auth-domain-config-required"),Ed(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ke,eventId:i};if(t instanceof tp){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof np){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Rf}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${If}`;return Ld(t,jf)}(e)}?${C(a).slice(1)}${c}`}const Af="webStorageSupport";const Lf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cp,this._completeRedirectFn=lf,this._overrideRedirectResult=sf}async _openPopup(e,t,n,r){var i;Cd(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Cf(e,await Nf(e,t,n,Id(),r),jp())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Np().location.href=e}(await Nf(e,t,n,Id(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Cd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Sf(e),n=new cf(e);return t.register("authEvent",(t=>{Ed(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Af,{type:Af},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Af];void 0!==i&&t(!!i),wd(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ff(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Sh()||mh()||kh()}};var Pf="@firebase/auth",Df="1.10.1";class Of{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ed(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Mf=m("authIdTokenMaxAge")||300;let Uf=null;function Ff(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe();const t=We(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=We(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(E(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;wd(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Lf,persistence:[Vp,kp,Cp]}),r=m("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Mf)return;const i=null===n||void 0===n?void 0:n.token;Uf!==i&&(Uf=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))})(e.toString());!function(e,t,n){A(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){A(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}const i=p("auth");return i&&zh(n,`http://${i}`),n}var Bf,zf;Bf={loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=bd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Nh=Bf,zf="Browser",Ve(new L("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ed(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:zf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Eh(zf)},c=new Ih(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ch);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ve(new L("auth-internal",(e=>(e=>new Of(e))(jh(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(Pf,Df,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(zf)),Ye(Pf,Df,"esm2017");const Vf="firebasestorage.googleapis.com",Wf="storageBucket";class qf extends k{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Kf(e),`Firebase Storage: ${t} (${Kf(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qf.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hf,$f;function Kf(e){return"storage/"+e}function Gf(){return new qf(Hf.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Qf(){return new qf(Hf.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yf(){return new qf(Hf.CANCELED,"User canceled the upload/download.")}function Xf(){return new qf(Hf.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Jf(e){return new qf(Hf.INVALID_ARGUMENT,e)}function Zf(){return new qf(Hf.APP_DELETED,"The Firebase app was deleted.")}function eg(e,t){return new qf(Hf.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function tg(e){throw new qf(Hf.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Hf||(Hf={}));class ng{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ng.makeFromUrl(e,t)}catch(i){return new ng(e,"")}if(""===n.path)return n;throw r=e,new qf(Hf.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Vf?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new ng(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new qf(Hf.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class rg{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function ig(e){return"string"===typeof e||e instanceof String}function sg(e){return og()&&e instanceof Blob}function og(){return"undefined"!==typeof Blob}function ag(e,t,n,r){if(r<t)throw Jf(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Jf(`Invalid value for '${e}'. Expected ${n} or less.`)}function lg(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function cg(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function ug(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}($f||($f={}));class dg{constructor(e,t,n,r,i,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new hg(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===$f.NO_ERROR,i=n.getStatus();if(!t||ug(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===$f.ABORT;return void e(!1,new hg(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new hg(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=Gf();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Zf():Yf())}else{r(Qf())}};this.canceled_?t(0,new hg(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){s&&clearTimeout(s)}function p(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),d(s)}let f=!1;function g(e){f||(f=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),s=setTimeout((()=>{o=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hg{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function pg(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fg(){const e=pg();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(og())return new Blob(n);throw new qf(Hf.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function gg(e){if("undefined"===typeof atob)throw t="base-64",new qf(Hf.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const mg="raw",yg="base64",vg="base64url",xg="data_url";class wg{constructor(e,t){this.data=e,this.contentType=t||null}}function bg(e,t){switch(e){case mg:return new wg(kg(t));case yg:case vg:return new wg(_g(e,t));case xg:return new wg(function(e){const t=new Sg(e);return t.base64?_g(yg,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw eg(xg,"Malformed data URL.")}return kg(t)}(t.rest)}(t),function(e){const t=new Sg(e);return t.contentType}(t))}throw Gf()}function kg(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function _g(e,t){switch(e){case yg:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw eg(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case vg:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw eg(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gg(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw eg(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Sg{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw eg(xg,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Eg{constructor(e,t){let n=0,r="";sg(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(sg(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Eg(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Eg(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(og()){const e=t.map((e=>e instanceof Eg?e.data_:e));return new Eg(fg.apply(null,e))}{const e=t.map((e=>ig(e)?bg(mg,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Eg(r,!0)}}uploadData(){return this.data_}}function Tg(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Cg(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ig(e,t){return t}class jg{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Ig}}let Rg=null;function Ng(){if(Rg)return Rg;const e=[];e.push(new jg("bucket")),e.push(new jg("generation")),e.push(new jg("metageneration")),e.push(new jg("name","fullPath",!0));const t=new jg("name");t.xform=function(e,t){return function(e){return!ig(e)||e.length<2?e:Cg(e)}(t)},e.push(t);const n=new jg("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new jg("timeCreated")),e.push(new jg("updated")),e.push(new jg("md5Hash",null,!0)),e.push(new jg("cacheControl",null,!0)),e.push(new jg("contentDisposition",null,!0)),e.push(new jg("contentEncoding",null,!0)),e.push(new jg("contentLanguage",null,!0)),e.push(new jg("contentType",null,!0)),e.push(new jg("metadata","customMetadata",!0)),Rg=e,Rg}function Ag(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new ng(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Lg(e,t,n){const r=Tg(t);if(null===r)return null;return Ag(e,r,n)}function Pg(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Dg{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Og(e){if(!e)throw Gf()}function Mg(e,t){return function(n,r){const i=Lg(e,r,t);return Og(null!==i),i}}function Ug(e,t){return function(n,r){const i=Lg(e,r,t);return Og(null!==i),function(e,t,n,r){const i=Tg(t);if(null===i)return null;if(!ig(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return lg("/b/"+o(i)+"/o/"+o(s),n,r)+cg({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Fg(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new qf(Hf.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new qf(Hf.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new qf(Hf.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new qf(Hf.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Bg(e){const t=Fg(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new qf(Hf.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function zg(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Vg(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=zg(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Pg(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Eg.getBlob(c,r,u);if(null===d)throw Xf();const h={name:l.fullPath},p=lg(s,e.host,e._protocol),f=e.maxUploadRetryTime,g=new Dg(p,"POST",Mg(e,n),f);return g.urlParams=h,g.headers=o,g.body=d.uploadData(),g.errorHandler=Fg(t),g}class Wg{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$f.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=$f.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=$f.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw tg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw tg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw tg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw tg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw tg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class qg extends Wg{initXhr(){this.xhr_.responseType="text"}}function Hg(){return new qg}class $g{constructor(e,t){this._service=e,this._location=t instanceof ng?t:ng.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $g(e,t)}get root(){const e=new ng(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Cg(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ng(this._location.bucket,e);return new $g(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new qf(Hf.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Kg(e,t,n){e._throwIfRoot("uploadBytes");const r=Vg(e.storage,e._location,Ng(),new Eg(t,!0),n);return e.storage.makeRequestWithTokens(r,Hg).then((t=>({metadata:t,ref:e})))}function Gg(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=lg(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Dg(r,"GET",Ug(e,n),i);return s.errorHandler=Bg(t),s}(e.storage,e._location,Ng());return e.storage.makeRequestWithTokens(t,Hg).then((e=>{if(null===e)throw new qf(Hf.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Qg(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ng(e._location.bucket,n);return new $g(e.storage,r)}function Yg(e,t){if(e instanceof Zg){const n=e;if(null==n._bucket)throw new qf(Hf.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wf+"' property when initializing the app?");const r=new $g(n,n._bucket);return null!=t?Yg(r,t):r}return void 0!==t?Qg(e,t):e}function Xg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Zg)return function(e,t){return new $g(e,t)}(e,t);throw Jf("To use ref(service, url), the first argument must be a Storage instance.")}return Yg(e,t)}function Jg(e,t){const n=null===t||void 0===t?void 0:t[Wf];return null==n?null:ng.makeFromBucketSpec(n,e)}class Zg{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Vf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ng.makeFromBucketSpec(r,this._host):Jg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ng.makeFromBucketSpec(this._url,e):this._bucket=Jg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ag("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ag("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $g(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new rg(Zf());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=cg(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new dg(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const em="@firebase/storage",tm="0.13.7",nm="storage";function rm(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Zg(r,i,s,n,Ke)}Ve(new L(nm,rm,"PUBLIC").setMultipleInstances(!0)),Ye(em,tm,""),Ye(em,tm,"esm2017");const im=Ge({apiKey:"AIzaSyDNlq3ku2raafOxs9W8TATxScoLFpPvun0",authDomain:"hourlygood-f6cac.firebaseapp.com",projectId:"hourlygood-f6cac",storageBucket:"hourlygood-f6cac.appspot.com",messagingSenderId:"821096150691",appId:"1:821096150691:web:614fda96c4c6733d01b116",measurementId:"G-ZX5QQ3Q037"}),sm=Ff(im),om=function(e,t){const n="object"==typeof e?e:Qe(),r="string"==typeof e?e:t||Sr,i=We(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=f("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=zc(e,Hc))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==Vc&&s.host!==a&&jt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!E(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_t.MOCK_USER;else{t=v(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Ot(Dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _t(s)}e._authCredentials=new Bt(new Ut(t,n))}}(i,...e)}return i}(im),am=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe(),t=arguments.length>1?arguments[1]:void 0;e=A(e);const n=We(e,nm).getImmediate({identifier:t}),r=f("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:v(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(im);var lm=n(579);const cm=(0,i.createContext)();function um(){return(0,i.useContext)(cm)}function dm(e){let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!0),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1);async function d(e){try{const t=await nd(Yc(om,"users",e));return t.exists()?t.data():null}catch(t){return console.error("Error getting user profile:",t),null}}(0,i.useEffect)((()=>{const e=function(e,t,n,r){return A(e).onAuthStateChanged(t,n,r)}(sm,(async e=>{if(e){const t=await d(e.uid);r({...e,profile:t})}else r(null);o(!1)}));return e}),[]);const h={currentUser:n,signup:async function(e,t,n){try{l("");const r=await async function(e,t,n){if(qe(e.app))return Promise.reject(_d(e));const r=jh(e),i=Fh(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ap,"EMAIL_PASSWORD_PROVIDER"),s=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&mp(e),t})),o=await lp._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(sm,e,t);return await yp(r.user,{displayName:n}),await sd(Yc(om,"users",r.user.uid),{name:n,email:e,uid:r.user.uid,skills:[],bio:"",timeCredits:2,createdAt:(new Date).toISOString()}),u(!0),r.user}catch(r){throw l(r.message),r}},login:async function(e,t){try{l(""),u(!1);const n=await function(e,t,n){return qe(e.app)?Promise.reject(_d(e)):gp(A(e),ep.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&mp(e),t}))}(sm,e,t);return n.user}catch(n){throw l(n.message),n}},logout:function(){return u(!1),function(e){return A(e).signOut()}(sm)},getUserProfile:d,error:a,isNewSignup:c,clearNewSignupFlag:function(){u(!1)}};return(0,lm.jsx)(cm.Provider,{value:h,children:!s&&t})}const hm=function(e){let{setPage:t,profile:n,showLogin:r}=e;const{currentUser:i}=um(),s=e=>({opacity:0,animation:"fadeIn 1s forwards",animationDelay:`${e}s`,animationFillMode:"forwards"}),o=function(e){return{opacity:0,transform:"translateY(20px)",animation:`slideUpFade ${arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5}s ease forwards`,animationDelay:`${e}s`,animationFillMode:"forwards"}};return(0,lm.jsxs)("div",{style:{padding:"0",overflow:"hidden"},children:[(0,lm.jsxs)("section",{style:{position:"relative",padding:"80px 20px",background:"linear-gradient(135deg, var(--dark) 0%, #000 100%)",color:"white",textAlign:"center",overflow:"hidden"},children:[(0,lm.jsx)("div",{className:"pulse",style:{position:"absolute",top:"10%",right:"5%",width:300,height:300,borderRadius:"50%",background:"rgba(255, 143, 0, 0.03)",zIndex:0}}),(0,lm.jsx)("div",{className:"pulse",style:{position:"absolute",bottom:"5%",left:"10%",width:200,height:200,borderRadius:"50%",background:"rgba(255, 143, 0, 0.05)",zIndex:0,animationDelay:"0.5s"}}),(0,lm.jsxs)("div",{style:{position:"relative",zIndex:1,maxWidth:1200,margin:"0 auto"},children:[(0,lm.jsx)("h1",{style:{fontSize:"clamp(3rem, 8vw, 5rem)",fontWeight:900,marginBottom:10,background:"linear-gradient(45deg, var(--primary), var(--primary-light))",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",letterSpacing:"-2px",marginBottom:"10px",animation:"slideUpFade 1s ease-out"},children:"HourlyGood"}),(0,lm.jsx)("div",{style:{fontWeight:600,fontSize:"clamp(1.2rem, 3vw, 1.8rem)",marginBottom:30,opacity:.9,animation:"slideUpFade 1s ease-out 0.2s forwards",opacity:0},children:"Share Skills. Earn Time. Learn Anything."}),(0,lm.jsx)("p",{style:{fontSize:"1.2rem",margin:"0 auto 40px",lineHeight:1.7,maxWidth:700,opacity:0,animation:"slideUpFade 1s ease-out 0.4s forwards"},children:"Teach what you know for 1 hour and earn time credits to learn what you want from others."}),(0,lm.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"15px",opacity:0,animation:"slideUpFade 1s ease-out 0.6s forwards"},children:i?(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsx)("button",{onClick:()=>t("request"),style:{fontSize:17,fontWeight:700,padding:"12px 25px",minWidth:"200px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:(0,lm.jsx)("span",{style:{position:"relative",zIndex:2},children:"Request a Lesson"})}),(0,lm.jsx)("button",{onClick:()=>t("marketplace"),style:{fontSize:17,fontWeight:700,background:"rgba(255,255,255,0.15)",padding:"12px 25px",minWidth:"200px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:(0,lm.jsx)("span",{style:{position:"relative",zIndex:2},children:"Browse Skills"})}),(0,lm.jsx)("button",{onClick:()=>t("lessons"),style:{fontSize:17,fontWeight:700,background:"rgba(255,255,255,0.15)",padding:"12px 25px",minWidth:"200px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:(0,lm.jsx)("span",{style:{position:"relative",zIndex:2},children:"My Lessons"})})]}):(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsx)("button",{onClick:()=>t("login"),style:{fontSize:17,fontWeight:700,padding:"12px 25px",minWidth:"200px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:(0,lm.jsx)("span",{style:{position:"relative",zIndex:2},children:"Create an Account"})}),(0,lm.jsx)("button",{onClick:()=>t("marketplace"),style:{fontSize:17,fontWeight:700,background:"rgba(255,255,255,0.15)",padding:"12px 25px",minWidth:"200px",transition:"all 0.3s ease",position:"relative",overflow:"hidden"},children:(0,lm.jsx)("span",{style:{position:"relative",zIndex:2},children:"Browse Skills"})})]})})]}),(0,lm.jsx)("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",animation:"bounce 2s infinite",cursor:"pointer"},children:(0,lm.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("polyline",{points:"6 9 12 15 18 9"})})})]}),(0,lm.jsx)("section",{style:{padding:"80px 20px",background:"#181818",...s(.7)},className:"testimonial-section",children:(0,lm.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto"},children:[(0,lm.jsxs)("h2",{style:{textAlign:"center",marginBottom:60,fontSize:"2.5rem",fontWeight:800},children:[(0,lm.jsx)("span",{style:{color:"var(--primary)"},children:"Key"})," Features"]}),(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"30px"},children:[(0,lm.jsxs)("div",{style:{flex:"1 1 300px",maxWidth:"350px",padding:"20px",borderRadius:"12px",background:"#252525",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",transition:"all 0.4s ease",cursor:"pointer",...o(.4)},className:"feature-card",children:[(0,lm.jsx)("div",{style:{width:"70px",height:"70px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",fontSize:"30px",transition:"transform 0.3s, box-shadow 0.3s",boxShadow:"0 5px 15px rgba(255, 143, 0, 0.3)"},className:"icon-container",children:(0,lm.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),(0,lm.jsx)("h3",{style:{marginBottom:"15px",fontSize:"1.5rem"},children:"Time-Based Exchange"}),(0,lm.jsx)("p",{style:{color:"#ccc",lineHeight:1.6},children:"Teach for one hour, earn one time credit. Use your credits to learn any skill from other users in the community."})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 300px",maxWidth:"350px",padding:"20px",borderRadius:"12px",background:"#252525",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",transition:"all 0.4s ease",cursor:"pointer",...o(.4)},className:"feature-card",children:[(0,lm.jsx)("div",{style:{width:"70px",height:"70px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",fontSize:"30px",transition:"transform 0.3s, box-shadow 0.3s",boxShadow:"0 5px 15px rgba(255, 143, 0, 0.3)"},className:"icon-container",children:(0,lm.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,lm.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,lm.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]})}),(0,lm.jsx)("h3",{style:{marginBottom:"15px",fontSize:"1.5rem"},children:"Skill Marketplace"}),(0,lm.jsx)("p",{style:{color:"#ccc",lineHeight:1.6},children:"Browse through diverse skills offered by community members, from cooking to coding, music to mathematics."})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 300px",maxWidth:"350px",padding:"20px",borderRadius:"12px",background:"#252525",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",transition:"all 0.4s ease",cursor:"pointer",...o(.4)},className:"feature-card",children:[(0,lm.jsx)("div",{style:{width:"70px",height:"70px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",fontSize:"30px",transition:"transform 0.3s, box-shadow 0.3s",boxShadow:"0 5px 15px rgba(255, 143, 0, 0.3)"},className:"icon-container",children:(0,lm.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})})}),(0,lm.jsx)("h3",{style:{marginBottom:"15px",fontSize:"1.5rem"},children:"Integrated Messaging"}),(0,lm.jsx)("p",{style:{color:"#ccc",lineHeight:1.6},children:"Coordinate your lessons with built-in messaging to schedule sessions, discuss details, and connect with your teacher or student."})]})]})]})}),(0,lm.jsx)("section",{style:{padding:"80px 20px",background:"#222222",...s(.5)},className:"parallax-section",children:(0,lm.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto"},children:[(0,lm.jsxs)("h2",{style:{textAlign:"center",marginBottom:60,fontSize:"2.5rem",fontWeight:800},children:["How ",(0,lm.jsx)("span",{style:{color:"var(--primary)"},children:"HourlyGood"})," Works"]}),(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"center",gap:"40px"},children:[(0,lm.jsx)("div",{style:{flex:"1 1 400px",maxWidth:"500px"},children:(0,lm.jsx)("div",{style:{width:"100%",height:"350px",background:"#252525",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 15px 30px rgba(0,0,0,0.1)",overflow:"hidden",position:"relative"},children:(0,lm.jsxs)("svg",{viewBox:"0 0 800 600",style:{width:"100%",height:"100%",position:"absolute",top:0,left:0},children:[(0,lm.jsx)("rect",{x:"0",y:"0",width:"800",height:"600",fill:"#252525"}),(0,lm.jsx)("circle",{cx:"200",cy:"200",r:"80",fill:"#333",stroke:"var(--primary)",strokeWidth:"3"}),(0,lm.jsx)("text",{x:"200",y:"200",textAnchor:"middle",fill:"#ddd",fontSize:"18",fontWeight:"bold",children:"Teacher"}),(0,lm.jsx)("circle",{cx:"600",cy:"200",r:"80",fill:"#333",stroke:"var(--primary)",strokeWidth:"3"}),(0,lm.jsx)("text",{x:"600",y:"200",textAnchor:"middle",fill:"#ddd",fontSize:"18",fontWeight:"bold",children:"Student"}),(0,lm.jsx)("circle",{cx:"400",cy:"400",r:"100",fill:"#333",stroke:"var(--primary)",strokeWidth:"3"}),(0,lm.jsx)("text",{x:"400",y:"390",textAnchor:"middle",fill:"#ddd",fontSize:"18",fontWeight:"bold",children:"Time"}),(0,lm.jsx)("text",{x:"400",y:"420",textAnchor:"middle",fill:"#ddd",fontSize:"18",fontWeight:"bold",children:"Credits"}),(0,lm.jsx)("path",{d:"M280 200 L320 200 L320 350 L380 350",fill:"none",stroke:"var(--primary)",strokeWidth:"3",markerEnd:"url(#arrowhead)"}),(0,lm.jsx)("path",{d:"M520 200 L480 200 L480 350 L420 350",fill:"none",stroke:"var(--primary)",strokeWidth:"3",markerEnd:"url(#arrowhead)"}),(0,lm.jsx)("path",{d:"M400 300 L400 250",fill:"none",stroke:"var(--primary)",strokeWidth:"3",markerEnd:"url(#arrowhead)"}),(0,lm.jsx)("defs",{children:(0,lm.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto",children:(0,lm.jsx)("polygon",{points:"0 0, 10 3.5, 0 7",fill:"var(--primary)"})})})]})})}),(0,lm.jsxs)("div",{style:{flex:"1 1 400px",maxWidth:"500px"},children:[(0,lm.jsxs)("div",{style:{marginBottom:"25px",display:"flex",gap:"15px"},children:[(0,lm.jsx)("div",{style:{minWidth:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"1"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{marginBottom:"8px",fontSize:"1.3rem"},children:"Create Your Profile"}),(0,lm.jsx)("p",{style:{color:"#ccc",lineHeight:1.6},children:"Sign up and list the skills you can teach and those you want to learn. Your skills become visible to the community."})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"25px",display:"flex",gap:"15px"},children:[(0,lm.jsx)("div",{style:{minWidth:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"2"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{marginBottom:"8px",fontSize:"1.3rem"},children:"Teach & Earn Credits"}),(0,lm.jsx)("p",{style:{color:"#ccc",lineHeight:1.6},children:"Teach a one-hour lesson in your area of expertise and earn one time credit. Each lesson is limited to one hour."})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"25px",display:"flex",gap:"15px"},children:[(0,lm.jsx)("div",{style:{minWidth:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"3"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{marginBottom:"8px",fontSize:"1.3rem"},children:"Spend Credits & Learn"}),(0,lm.jsx)("p",{style:{color:"#ccc",lineHeight:1.6},children:"Use your earned time credits to learn any skill from others in the community. One credit equals one hour of learning."})]})]})]})]})]})}),(0,lm.jsx)("section",{style:{padding:"80px 20px",background:"var(--dark)",color:"white",...s(.7)},children:(0,lm.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto",textAlign:"center"},children:[(0,lm.jsxs)("h2",{style:{marginBottom:60,fontSize:"2.5rem",fontWeight:800},children:["Our ",(0,lm.jsx)("span",{style:{color:"var(--primary)"},children:"Community"})," in Numbers"]}),(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"40px"},children:[(0,lm.jsxs)("div",{style:{flex:"1 1 200px",maxWidth:"250px"},children:[(0,lm.jsx)("div",{style:{fontSize:"3.5rem",fontWeight:800,color:"var(--primary)"},children:"500+"}),(0,lm.jsx)("div",{style:{fontSize:"1.2rem",opacity:.8},children:"Active Users"})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 200px",maxWidth:"250px"},children:[(0,lm.jsx)("div",{style:{fontSize:"3.5rem",fontWeight:800,color:"var(--primary)"},children:"1000+"}),(0,lm.jsx)("div",{style:{fontSize:"1.2rem",opacity:.8},children:"Skills Available"})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 200px",maxWidth:"250px"},children:[(0,lm.jsx)("div",{style:{fontSize:"3.5rem",fontWeight:800,color:"var(--primary)"},children:"2500+"}),(0,lm.jsx)("div",{style:{fontSize:"1.2rem",opacity:.8},children:"Lessons Completed"})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 200px",maxWidth:"250px"},children:[(0,lm.jsx)("div",{style:{fontSize:"3.5rem",fontWeight:800,color:"var(--primary)"},children:"4.8"}),(0,lm.jsx)("div",{style:{fontSize:"1.2rem",opacity:.8},children:"Average Rating"})]})]})]})}),(0,lm.jsx)("section",{style:{padding:"80px 20px",background:"#181818",...s(.9)},className:"cta-section",children:(0,lm.jsxs)("div",{style:{maxWidth:800,margin:"0 auto",textAlign:"center"},children:[(0,lm.jsx)("h2",{style:{marginBottom:20,fontSize:"2.5rem",fontWeight:800},children:"Ready to Share Your Skills?"}),(0,lm.jsx)("p",{style:{fontSize:"1.2rem",color:"#ccc",marginBottom:40,lineHeight:1.6},children:"Join our community of learners and teachers to exchange knowledge and skills."}),(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"20px"},children:[(0,lm.jsx)("button",{onClick:()=>t("login"),style:{fontSize:18,fontWeight:700,padding:"15px 30px"},children:"Create Account"}),(0,lm.jsx)("button",{onClick:()=>t("marketplace"),style:{fontSize:18,fontWeight:700,background:"var(--dark)",padding:"15px 30px"},children:"Browse Skills"})]}),n&&(0,lm.jsx)("div",{style:{marginTop:20},children:(0,lm.jsx)("button",{onClick:()=>t("profile"),style:{background:"var(--primary-dark)",fontSize:16,fontWeight:600,padding:"10px 20px"},children:"View My Profile"})}),r&&!n&&(0,lm.jsx)("div",{style:{marginTop:20},children:(0,lm.jsx)("button",{onClick:()=>t("login"),style:{background:"transparent",color:"var(--primary)",border:"2px solid var(--primary)",fontSize:16,fontWeight:600,padding:"10px 20px"},children:"Login"})})]})}),(0,lm.jsx)("footer",{style:{padding:"16px 10px",background:"var(--dark)",color:"white",textAlign:"center"},children:(0,lm.jsxs)("div",{style:{maxWidth:1200,margin:"0 auto"},children:[(0,lm.jsx)("div",{style:{fontSize:"1.8rem",fontWeight:800,marginBottom:20,background:"linear-gradient(45deg, var(--primary), var(--primary-light))",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",color:"transparent",display:"inline-block"},children:"HourlyGood"}),(0,lm.jsx)("p",{style:{opacity:.7,marginBottom:20},children:"Share Skills. Earn Time. Learn Anything."}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"center",gap:"20px",marginBottom:10,flexWrap:"wrap"},children:[(0,lm.jsx)("a",{href:"#",style:{color:"white",opacity:.7,textDecoration:"none"},children:"About"}),(0,lm.jsx)("a",{href:"#",style:{color:"white",opacity:.7,textDecoration:"none"},children:"Contact"}),(0,lm.jsx)("a",{href:"#",style:{color:"white",opacity:.7,textDecoration:"none"},children:"Privacy Policy"}),(0,lm.jsx)("a",{href:"#",style:{color:"white",opacity:.7,textDecoration:"none"},children:"Terms of Service"})]}),(0,lm.jsx)("div",{style:{opacity:.5,fontSize:"0.9rem"},children:" 2025 HourlyGood. All rights reserved."})]})}),(0,lm.jsx)("style",{jsx:!0,children:"\n        @keyframes bounce {\n          0%, 20%, 50%, 80%, 100% { transform: translateY(0) translateX(-50%); }\n          40% { transform: translateY(-20px) translateX(-50%); }\n          60% { transform: translateY(-10px) translateX(-50%); }\n        }\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes slideUpFade {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.05); }\n          100% { transform: scale(1); }\n        }\n        @keyframes float {\n          0% { transform: translateY(0px); }\n          50% { transform: translateY(-10px); }\n          100% { transform: translateY(0px); }\n        }\n        .feature-card:hover {\n          transform: translateY(-10px);\n          box-shadow: 0 15px 35px rgba(0,0,0,0.5);\n        }\n        .feature-card:hover .icon-container {\n          transform: scale(1.1) rotate(5deg);\n          box-shadow: 0 8px 20px rgba(255, 143, 0, 0.4);\n        }\n        .pulse {\n          animation: pulse 3s infinite ease-in-out;\n        }\n        .parallax-section {\n          background-attachment: fixed;\n          background-position: center;\n          background-repeat: no-repeat;\n          background-size: cover;\n        }\n        .testimonial-section {\n          position: relative;\n          overflow: hidden;\n        }\n        .testimonial-section::before {\n          content: '';\n          position: absolute;\n          top: -50px;\n          left: -50px;\n          width: 200px;\n          height: 200px;\n          border-radius: 50%;\n          background: rgba(255, 143, 0, 0.03);\n          z-index: 0;\n          animation: float 6s infinite ease-in-out;\n        }\n        .testimonial-section::after {\n          content: '';\n          position: absolute;\n          bottom: -50px;\n          right: -50px;\n          width: 200px;\n          height: 200px;\n          border-radius: 50%;\n          background: rgba(255, 143, 0, 0.03);\n          z-index: 0;\n          animation: float 8s infinite ease-in-out reverse;\n        }\n        .cta-section {\n          position: relative;\n          overflow: hidden;\n        }\n        .cta-section button {\n          transition: all 0.3s ease;\n        }\n        .cta-section button:hover {\n          transform: translateY(-5px);\n          box-shadow: 0 10px 20px rgba(0,0,0,0.2);\n        }\n      "})]})},pm=(0,i.createContext)();function fm(){return(0,i.useContext)(pm)}function gm(e){let{children:t}=e;const{currentUser:n}=um(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)([]),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)(!0),[h,p]=(0,i.useState)(""),[f,g]=(0,i.useState)({});async function m(e,t){try{if(p(""),!n)throw new Error("You must be logged in to upload skill proof");if(!e)throw new Error("No file selected");const i=e.type;if("application/pdf"!==i&&!i.startsWith("image/jpeg")&&!i.startsWith("image/jpg"))throw new Error("Only PDF and JPG files are allowed");const s=5242880;if(e.size>s)throw new Error("File size must be less than 5MB");const o="application/pdf"===i?"pdf":"jpg",a=`skill_proofs/${n.uid}/${t.replace(/\s+/g,"_")}_${Date.now()}.${o}`,l=(r=a,Xg(A(am),r));await function(e,t,n){return Kg(e=A(e),t,n)}(l,e);const c=await function(e){return Gg(e=A(e))}(l),u=Yc(om,"users",n.uid),d=await nd(u);if(!d.exists())throw new Error("User not found");const h=d.data().skillProofs||[];return await od(u,{skillProofs:[...h,{id:Date.now().toString(),skillName:t,fileURL:c,fileType:i,uploadedAt:(new Date).toISOString()}]}),c}catch(i){throw p(i.message),i}var r}(0,i.useEffect)((()=>{if(!n)return s([]),a([]),c([]),void d(!1);d(!0);const e=ld(Bu(Qc(om,"skillRequests"),Vu("status","==","open")),(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data()})})),s(t),d(!1)}),(e=>{console.error("Error fetching skill requests:",e),p(e.message),d(!1)})),t=ld(Bu(Qc(om,"skillRequests"),Vu("requesterId","==",n.uid)),(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data()})})),a(t)})),r=ld(Bu(Qc(om,"skillRequests"),Vu("tutorId","==",n.uid)),(e=>{const t=[];e.forEach((e=>{t.push({id:e.id,...e.data()})})),c(t)}));return()=>{e(),t(),r()}}),[n]);const y={skillRequests:r,myRequests:o,myLessons:l,createSkillRequest:async function(e){try{p("");const t={...e,requesterId:n.uid,requesterName:n.displayName,status:"open",createdAt:dd(),tutorId:null,tutorName:null};return{id:(await ad(Qc(om,"skillRequests"),t)).id,...t}}catch(t){throw p(t.message),t}},takeLesson:async function(e){try{p("");const t=Yc(om,"skillRequests",e),r=await nd(t);if(!r.exists())throw new Error("Request not found");const i=r.data(),s=i.requesterId;await od(t,{tutorId:n.uid,tutorName:n.displayName,status:"accepted",acceptedAt:dd()});const o=await ad(Qc(om,"chats"),{requestId:e,participants:[n.uid,s],participantNames:{[n.uid]:n.displayName||n.email||n.uid,[s]:i.requesterName||"Student"},lastMessage:"Chat started",lastMessageTime:dd(),createdAt:dd()});return await ad(Qc(om,"messages"),{chatId:o.id,senderId:n.uid,senderName:n.displayName,text:`Hello! I've accepted your request for ${i.skillName} lessons. When would you like to schedule our first session?`,createdAt:dd(),read:!1}),o.id}catch(t){throw console.error("Error taking lesson:",t),p(t.message),t}},completeLesson:async function(e){try{p("");const t=Yc(om,"skillRequests",e),n=await nd(t);if(!n.exists())throw new Error("Request not found");const r=n.data();await od(t,{status:"completed",completedAt:dd()});const i=Yc(om,"users",r.tutorId);return await od(i,{timeCredits:pd(1)}),!0}catch(t){throw p(t.message),t}},rateLesson:async function(e,t,r){try{if(p(""),!n)throw new Error("You must be logged in to rate a lesson");if(t<1||t>5)throw new Error("Rating must be between 1 and 5");const i=Yc(om,"skillRequests",e),s=await nd(i);if(!s.exists())throw new Error("Lesson not found");const o=s.data();if(o.requesterId!==n.uid)throw new Error("Only the person who requested the lesson can rate it");if("completed"!==o.status)throw new Error("Only completed lessons can be rated");if(o.rating)throw new Error("This lesson has already been rated");await od(i,{rating:t,feedback:r||"",ratedAt:dd()});const a=Yc(om,"users",o.tutorId),l=await nd(a);if(l.exists()){const n=l.data(),i=n.totalRatings||0,s=n.ratingSum||0,c=i+1,u=s+t,d=u/c;await od(a,{totalRatings:c,ratingSum:u,averageRating:d,ratings:hd({requestId:e,rating:t,feedback:r||"",ratedAt:(new Date).toISOString(),skillName:o.skillName})})}return!0}catch(i){throw p(i.message),i}},addSkill:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{p("");const r=Yc(om,"users",n.uid),i=await nd(r);if(!i.exists())throw new Error("User not found");const s=i.data().skills||[];let o=null;t&&(o=await m(t,e.name));const a={...e,id:Date.now().toString(),proofURL:o};return await od(r,{skills:[...s,a]}),!0}catch(r){throw p(r.message),r}},updateBio:async function(e){try{p("");const t=Yc(om,"users",n.uid);return await od(t,{bio:e}),!0}catch(t){throw p(t.message),t}},uploadSkillProof:m,getUserRatings:async function(e){try{if(p(""),f[e])return f[e];const t=Yc(om,"users",e),n=await nd(t);if(!n.exists()){const t={averageRating:0,totalRatings:0,ratings:[]};return g((n=>({...n,[e]:t}))),t}const r=n.data(),i={averageRating:r.averageRating||0,totalRatings:r.totalRatings||0,ratings:r.ratings||[]};return g((t=>({...t,[e]:i}))),i}catch(t){console.error("Error getting user ratings:",t),p(t.message);return{averageRating:0,totalRatings:0,ratings:[]}}},ratings:f,loading:u,error:h};return(0,lm.jsx)(pm.Provider,{value:y,children:t})}const mm=function(e){let{setPage:t}=e;const{currentUser:n}=um(),{createSkillRequest:r}=fm(),[s,o]=(0,i.useState)({skillName:"",skillDescription:"",preferredDate:"",preferredTime:"",additionalNotes:"",location:"online",category:"technology"}),[a,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(""),p=e=>{const{name:t,value:n}=e.target;o((e=>({...e,[t]:n})))};return(0,lm.jsxs)("div",{className:"fade-in",style:{maxWidth:800,margin:"1rem auto"},children:[(0,lm.jsxs)("div",{className:"card",style:{padding:"30px",marginBottom:"20px"},children:[(0,lm.jsx)("h2",{style:{color:"var(--primary)",marginBottom:"20px"},children:"Request a Skill Lesson"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"30px"},children:"Fill out this form to request a 1-hour lesson from someone with the skill you want to learn. This will cost 1 time credit once the lesson is completed. Your request will be visible in the marketplace for potential tutors."}),a?(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",background:"#252525",borderRadius:"8px",animation:"fadeIn 0.5s"},children:[(0,lm.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\u2705"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"Request Submitted!"}),(0,lm.jsx)("p",{style:{color:"#ddd",marginBottom:"20px"},children:"Your skill lesson request has been submitted and is now visible in the marketplace. You'll be notified when someone accepts your request."}),(0,lm.jsx)("p",{style:{color:"#aaa",fontSize:"14px"},children:"Redirecting to the Skill Marketplace..."})]}):(0,lm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n)if(s.skillName.trim())if(s.skillDescription.trim())if(s.preferredDate)if(s.preferredTime){u(!0),h("");try{await r(s),l(!0),setTimeout((()=>{l(!1),t("marketplace")}),3e3)}catch(i){h("Failed to create request: "+i.message),u(!1)}}else h("Preferred time is required");else h("Preferred date is required");else h("Skill description is required");else h("Skill name is required");else h("You must be logged in to create a request")},children:[(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Skill You Want to Learn*"}),(0,lm.jsx)("input",{type:"text",name:"skillName",value:s.skillName,onChange:p,placeholder:"e.g., Tabla, Indian Cooking, JavaScript, Photography",required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"}})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Describe What You Want to Learn*"}),(0,lm.jsx)("textarea",{name:"skillDescription",value:s.skillDescription,onChange:p,placeholder:"Describe what specific aspects of this skill you want to learn in this 1-hour lesson",required:!0,rows:4,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",resize:"vertical"}})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"20px"},children:[(0,lm.jsxs)("div",{style:{flex:1},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Preferred Date"}),(0,lm.jsx)("input",{type:"date",name:"preferredDate",value:s.preferredDate,onChange:p,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"}})]}),(0,lm.jsxs)("div",{style:{flex:1},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Preferred Time"}),(0,lm.jsx)("input",{type:"time",name:"preferredTime",value:s.preferredTime,onChange:p,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"}})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Location Preference"}),(0,lm.jsxs)("select",{name:"location",value:s.location,onChange:p,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"},children:[(0,lm.jsx)("option",{value:"online",children:"Online (Video Call)"}),(0,lm.jsx)("option",{value:"in-person",children:"In-Person"}),(0,lm.jsx)("option",{value:"flexible",children:"Flexible (Either)"})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Category"}),(0,lm.jsxs)("select",{name:"category",value:s.category,onChange:p,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"},children:[(0,lm.jsx)("option",{value:"technology",children:"Technology"}),(0,lm.jsx)("option",{value:"music",children:"Music & Dance"}),(0,lm.jsx)("option",{value:"cooking",children:"Cooking"}),(0,lm.jsx)("option",{value:"art",children:"Art & Design"}),(0,lm.jsx)("option",{value:"fitness",children:"Yoga & Fitness"}),(0,lm.jsx)("option",{value:"professional",children:"Professional Skills"}),(0,lm.jsx)("option",{value:"language",children:"Languages"}),(0,lm.jsx)("option",{value:"academic",children:"Academic Subjects"})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ddd"},children:"Additional Notes"}),(0,lm.jsx)("textarea",{name:"additionalNotes",value:s.additionalNotes,onChange:p,placeholder:"Any additional information that might help potential teachers (your current skill level, specific goals, etc.)",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",resize:"vertical"}})]}),d&&(0,lm.jsx)("div",{style:{background:"#ff5252",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"20px"},children:d}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"#252525",padding:"10px 15px",borderRadius:"8px"},children:[(0,lm.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",color:"black",fontWeight:"bold"},children:"1"}),(0,lm.jsx)("div",{style:{color:"#fff",fontWeight:"500"},children:"Time Credit"})]}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("button",{type:"button",onClick:()=>t("marketplace"),disabled:c,style:{background:"#333",color:"#ddd",border:"none",padding:"12px 20px",borderRadius:"8px",marginRight:"10px",cursor:c?"not-allowed":"pointer",opacity:c?.7:1},children:"Cancel"}),(0,lm.jsx)("button",{type:"submit",disabled:c,style:{background:c?"#555":"var(--primary)",color:"black",border:"none",padding:"12px 20px",borderRadius:"8px",fontWeight:"bold",cursor:c?"not-allowed":"pointer"},children:c?"Submitting...":"Submit Request"})]})]})]})]}),(0,lm.jsxs)("div",{className:"card",style:{padding:"20px"},children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"15px",fontSize:"1.2rem"},children:"How Skill Requests Work"}),(0,lm.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"1"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd"},children:"Submit Your Request"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Describe the skill you want to learn and your preferred time for a 1-hour lesson."})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"2"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd"},children:"Get Matched with a Teacher"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Users with the skill you want to learn will see your request and can offer to teach you."})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"3"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd"},children:"Coordinate and Learn"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Use our messaging system to finalize details and have your 1-hour lesson."})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"4"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd"},children:"Complete the Lesson"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"After the lesson, mark it as completed and 1 time credit will be transferred to the teacher."})]})]})]})]})]})},ym=(0,i.createContext)();function vm(){return(0,i.useContext)(ym)}function xm(e){let{children:t}=e;const{currentUser:n}=um(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)([]),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)(!0),[h,p]=(0,i.useState)("");async function f(e){try{p("");const t={...e,studentId:n.uid,studentName:n.displayName,status:"scheduled",createdAt:dd(),scheduledDate:new Date(e.date+"T"+e.time),isRealTime:!0};return{id:(await ad(Qc(om,"lessons"),t)).id,...t}}catch(t){throw p(t.message),t}}async function g(e){try{p("");const t=Yc(om,"lessons",e);return await od(t,{status:"active",startedAt:dd()}),!0}catch(t){throw p(t.message),t}}async function m(e,t){try{p("");const n=Yc(om,"lessons",e),r=await nd(n);if(!r.exists())throw new Error("Lesson not found");const i=r.data();if(await od(n,{status:"completed",completedAt:dd(),feedback:t.feedback,rating:t.rating,studentRated:!1}),i.teacherId){const e=Yc(om,"users",i.teacherId);await od(e,{timeCredits:pd(1)})}return!0}catch(n){throw p(n.message),n}}async function y(e,t){try{p("");const n=Yc(om,"lessons",e);return await od(n,{status:"cancelled",cancelledAt:dd(),cancellationReason:t||"No reason provided"}),!0}catch(n){throw p(n.message),n}}async function v(e){try{p("");const t=Bu(Qc(om,"skillRequests"),Vu("requesterId","==",e),Hu("createdAt","desc")),n=Bu(Qc(om,"skillRequests"),Vu("tutorId","==",e),Hu("createdAt","desc")),r=Bu(Qc(om,"skillRequests"),Vu("requesterId","==",e),Hu("createdAt","desc")),i=await id(t),s=await id(n),o=await id(r),a=[],l=[],c=[];i.forEach((e=>{const t=e.data();a.push({id:e.id,...t,createdAt:t.createdAt?t.createdAt.toDate():null,acceptedAt:t.acceptedAt?t.acceptedAt.toDate():null,scheduledDate:t.scheduledDate?t.scheduledDate.toDate():null,role:"student",isSkillRequest:!0,displayStatus:"accepted"===t.status?"Accepted":"Waiting for tutor"})})),s.forEach((e=>{const t=e.data();l.push({id:e.id,...t,createdAt:t.createdAt?t.createdAt.toDate():null,acceptedAt:t.acceptedAt?t.acceptedAt.toDate():null,scheduledDate:t.scheduledDate?t.scheduledDate.toDate():null,role:"teacher",isSkillRequest:!0,displayStatus:"accepted"===t.status?"Accepted":"Waiting for tutor"})})),o.forEach((e=>{const t=e.data();c.push({id:e.id,...t,createdAt:t.createdAt?t.createdAt.toDate():null,acceptedAt:t.acceptedAt?t.acceptedAt.toDate():null,scheduledDate:t.scheduledDate?t.scheduledDate.toDate():null,role:"student",isSkillRequest:!0,displayStatus:"accepted"===t.status?"Accepted":"Waiting for tutor"})}));const u=[...a,...l,...c].sort(((e,t)=>e.createdAt?t.createdAt?t.createdAt-e.createdAt:-1:1)),d=[],h=new Set;return u.forEach((e=>{h.has(e.id)||(h.add(e.id),d.push(e))})),d}catch(t){throw p(t.message),t}}(0,i.useEffect)((()=>{if(!n)return s([]),c([]),a([]),void d(!1);d(!0);const e=ld(Bu(Qc(om,"skillRequests"),Vu("status","in",["open","accepted"])),(e=>{const t=[];e.forEach((e=>{const r=e.data();r.requesterId!==n.uid&&r.tutorId!==n.uid||t.push({id:e.id,...r,isSkillRequest:!0,createdAt:r.createdAt?r.createdAt.toDate():new Date,acceptedAt:r.acceptedAt?r.acceptedAt.toDate():null,role:r.requesterId===n.uid?"student":"teacher",displayStatus:"accepted"===r.status?"Accepted":"Waiting for tutor"})})),s((e=>[...e.filter((e=>!e.isSkillRequest)),...t])),d(!1)}),(e=>{console.error("Error fetching skill requests:",e),p(e.message),d(!1)})),t=ld(Bu(Qc(om,"lessons"),Vu("status","in",["scheduled","confirmed"]),Hu("scheduledDate","asc")),(e=>{const t=[];e.forEach((e=>{const r=e.data();r.studentId!==n.uid&&r.teacherId!==n.uid||t.push({id:e.id,...r,scheduledDate:r.scheduledDate?r.scheduledDate.toDate():null,role:r.studentId===n.uid?"student":"teacher"})})),s((e=>[...e.filter((e=>e.isSkillRequest)),...t])),d(!1)}),(e=>{console.error("Error fetching upcoming lessons:",e),p(e.message),d(!1)})),r=ld(Bu(Qc(om,"lessons"),Vu("status","==","active")),(e=>{const t=[];e.forEach((e=>{const r=e.data();r.studentId!==n.uid&&r.teacherId!==n.uid||t.push({id:e.id,...r,scheduledDate:r.scheduledDate?r.scheduledDate.toDate():null,startedAt:r.startedAt?r.startedAt.toDate():null,role:r.studentId===n.uid?"student":"teacher"})})),c(t)})),i=ld(Bu(Qc(om,"lessons"),Vu("status","in",["completed","cancelled"]),Hu("completedAt","desc")),(e=>{const t=[];e.forEach((e=>{const r=e.data();r.studentId!==n.uid&&r.teacherId!==n.uid||t.push({id:e.id,...r,scheduledDate:r.scheduledDate?r.scheduledDate.toDate():null,completedAt:r.completedAt?r.completedAt.toDate():null,cancelledAt:r.cancelledAt?r.cancelledAt.toDate():null,role:r.studentId===n.uid?"student":"teacher"})})),a(t)}));return()=>{e(),t(),r(),i()}}),[n]);return(0,lm.jsx)(ym.Provider,{value:{upcomingLessons:r,completedLessons:o,activeLessons:l,scheduleLesson:f,startLesson:g,completeLesson:m,cancelLesson:y,getAllUserLessons:v,loading:u,error:h},children:t})}const wm=function(e){let{onClose:t,skillId:n,skillName:r,teacherId:s,teacherName:o}=e;const{scheduleLesson:a}=vm(),{currentUser:l}=um(),[c,u]=(0,i.useState)(!1),[d,h]=(0,i.useState)(""),[p,f]=(0,i.useState)(!1),[g,m]=(0,i.useState)({date:"",time:"",location:"",notes:""});(0,i.useEffect)((()=>{const e=(new Date).toISOString().split("T")[0];m((t=>({...t,date:e})))}),[]);const y=e=>{const{name:t,value:n}=e.target;m((e=>({...e,[t]:n})))};return(0,lm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,lm.jsx)("div",{style:{background:"#1e1e1e",borderRadius:"8px",padding:"25px",width:"90%",maxWidth:"500px"},children:p?(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"20px 0"},children:[(0,lm.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\u2705"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"Lesson Scheduled!"}),(0,lm.jsx)("p",{style:{color:"#aaa"},children:"Your lesson has been scheduled successfully."})]}):(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",margin:0},children:"Schedule Lesson"}),(0,lm.jsx)("button",{onClick:t,style:{background:"none",border:"none",color:"#aaa",fontSize:"20px",cursor:"pointer"},children:"\xd7"})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("div",{style:{color:"#ddd",marginBottom:"5px"},children:"Skill"}),(0,lm.jsx)("div",{style:{background:"#252525",padding:"10px 15px",borderRadius:"5px",color:"var(--primary)",fontWeight:"500"},children:r})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("div",{style:{color:"#ddd",marginBottom:"5px"},children:"Teacher"}),(0,lm.jsx)("div",{style:{background:"#252525",padding:"10px 15px",borderRadius:"5px",color:"#ddd"},children:o})]}),d&&(0,lm.jsx)("div",{style:{background:"rgba(244, 67, 54, 0.1)",color:"#f44336",padding:"10px 15px",borderRadius:"5px",marginBottom:"20px"},children:d}),(0,lm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),h("");try{if(!g.date||!g.time)throw new Error("Please select a date and time for the lesson");const e={skillId:n,skillName:r,teacherId:s,teacherName:o,location:g.location,notes:g.notes,date:g.date,time:g.time};await a(e),f(!0),setTimeout((()=>{t()}),2e3)}catch(i){h(i.message)}finally{u(!1)}},children:[(0,lm.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,lm.jsx)("label",{style:{display:"block",color:"#ddd",marginBottom:"5px"},children:"Date *"}),(0,lm.jsx)("input",{type:"date",name:"date",value:g.date,onChange:y,min:(new Date).toISOString().split("T")[0],style:{width:"100%",background:"#252525",border:"1px solid #333",borderRadius:"5px",padding:"10px",color:"#ddd"},required:!0})]}),(0,lm.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,lm.jsx)("label",{style:{display:"block",color:"#ddd",marginBottom:"5px"},children:"Time *"}),(0,lm.jsx)("input",{type:"time",name:"time",value:g.time,onChange:y,style:{width:"100%",background:"#252525",border:"1px solid #333",borderRadius:"5px",padding:"10px",color:"#ddd"},required:!0})]}),(0,lm.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,lm.jsx)("label",{style:{display:"block",color:"#ddd",marginBottom:"5px"},children:"Location (optional)"}),(0,lm.jsx)("input",{type:"text",name:"location",value:g.location,onChange:y,placeholder:"e.g. Zoom, Google Meet, Coffee Shop",style:{width:"100%",background:"#252525",border:"1px solid #333",borderRadius:"5px",padding:"10px",color:"#ddd"}})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",color:"#ddd",marginBottom:"5px"},children:"Notes (optional)"}),(0,lm.jsx)("textarea",{name:"notes",value:g.notes,onChange:y,placeholder:"Any additional information for the teacher...",style:{width:"100%",background:"#252525",border:"1px solid #333",borderRadius:"5px",padding:"10px",color:"#ddd",minHeight:"80px",resize:"vertical"}})]}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,lm.jsx)("button",{type:"button",onClick:t,style:{background:"#333",color:"#ddd",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:"pointer"},children:"Cancel"}),(0,lm.jsx)("button",{type:"submit",disabled:c,style:{background:"var(--primary)",color:"black",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:c?"not-allowed":"pointer",opacity:c?.7:1,fontWeight:"500"},children:c?"Scheduling...":"Schedule Lesson"})]})]})]})})})};const bm=function(e){let{setPage:t}=e;const{currentUser:n}=um(),{skillRequests:r,takeLesson:s,loading:o}=fm(),[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)("all"),[d,h]=(0,i.useState)(null),[p,f]=(0,i.useState)(!1),[g,m]=(0,i.useState)(null),y=r.filter((e=>{var t,r,i;if(n&&e.requesterId===n.uid)return!1;if("open"!==e.status)return!1;const s=(null===(t=e.skillName)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null===(r=e.requesterName)||void 0===r?void 0:r.toLowerCase().includes(a.toLowerCase()))||(null===(i=e.description)||void 0===i?void 0:i.toLowerCase().includes(a.toLowerCase())),o="all"===c||e.category===c;return s&&o})),v=e=>{t("viewProfile",{userId:e})};return(0,lm.jsxs)("div",{className:"fade-in",style:{maxWidth:1200,margin:"1rem auto"},children:[(0,lm.jsxs)("div",{className:"card",style:{padding:"30px",marginBottom:"20px"},children:[(0,lm.jsx)("h2",{style:{color:"var(--primary)",marginBottom:"20px"},children:"Skill Request Marketplace"}),o&&(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,lm.jsx)("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"\u231b"}),(0,lm.jsx)("p",{children:"Loading skill requests..."})]}),(0,lm.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"15px",alignItems:"center"},children:[(0,lm.jsx)("div",{style:{flex:"1 1 300px"},children:(0,lm.jsx)("input",{type:"text",placeholder:"Search skills or teachers...",value:a,onChange:e=>l(e.target.value),style:{width:"100%",padding:"12px 15px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",fontSize:"16px"}})}),(0,lm.jsx)("div",{style:{flex:"1 1 300px"},children:(0,lm.jsx)("select",{value:c,onChange:e=>u(e.target.value),style:{width:"100%",padding:"12px 15px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",fontSize:"16px",appearance:"none",backgroundImage:'url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E")',backgroundRepeat:"no-repeat",backgroundPosition:"right 15px top 50%",backgroundSize:"12px auto"},children:[{id:"all",name:"All Categories"},{id:"technology",name:"Technology"},{id:"music",name:"Music & Dance"},{id:"cooking",name:"Cooking"},{id:"art",name:"Art & Design"},{id:"fitness",name:"Yoga & Fitness"},{id:"professional",name:"Professional Skills"},{id:"language",name:"Languages"},{id:"academic",name:"Academic Subjects"}].map((e=>(0,lm.jsx)("option",{value:e.id,children:e.name},e.id)))})}),(0,lm.jsxs)("button",{onClick:()=>t("request"),style:{background:"var(--primary)",color:"black",border:"none",padding:"12px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",whiteSpace:"nowrap"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,lm.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Create New Request"]})]}),(0,lm.jsxs)("div",{style:{color:"#aaa",fontSize:"14px"},children:["Showing ",y.length," ",1===y.length?"request":"requests"]})]})]}),(0,lm.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"20px"},children:y.length>0?y.map((e=>{var i;return(0,lm.jsxs)("div",{className:"card",style:{padding:"25px",transition:"all 0.3s ease"},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",margin:"0",fontSize:"1.3rem"},children:e.skillName}),(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",background:"#252525",padding:"5px 10px",borderRadius:"20px",gap:"5px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,lm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,lm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,lm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),(0,lm.jsx)("span",{style:{color:"#fff",fontWeight:"500"},children:new Date(e.preferredDate).toLocaleDateString()})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,lm.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",color:"black",fontWeight:"bold",fontSize:"16px"},children:e.requesterName?e.requesterName.charAt(0).toUpperCase():"?"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"bold",color:"#ddd"},children:e.requesterName||"Anonymous"}),(0,lm.jsx)("div",{style:{fontSize:"12px",color:"#aaa"},children:new Date(1e3*(null===(i=e.createdAt)||void 0===i?void 0:i.seconds)).toLocaleDateString()})]})]}),(0,lm.jsx)("button",{onClick:()=>v(e.requesterId),style:{background:"transparent",border:"1px solid #444",color:"#ddd",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"View Profile"})]}),(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"15px",color:"#ddd",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),(0,lm.jsx)("span",{onClick:()=>v(e.requesterId),style:{cursor:"pointer",textDecoration:"underline",textDecorationColor:"rgba(255,255,255,0.3)",textUnderlineOffset:"2px"},children:e.requesterName}),(0,lm.jsxs)("span",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"5px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),e.preferredTime]})]}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"20px",fontSize:"15px",lineHeight:"1.5"},children:e.description}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#252525",padding:"8px 12px",borderRadius:"8px"},children:[(0,lm.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",color:"black",fontWeight:"bold",fontSize:"12px"},children:"1"}),(0,lm.jsx)("div",{style:{color:"#fff",fontSize:"14px"},children:"Time Credit"})]}),(0,lm.jsx)("button",{onClick:()=>(async e=>{if(!n)return alert("Please log in to take a lesson"),void t("login");h(e);try{const n=r.find((t=>t.id===e));if(!n)throw new Error("Request not found");const i=await s(e);alert("You have successfully taken this lesson request! You will now be connected to chat with the student."),t("chat",{chatId:i,recipientId:n.requesterId})}catch(i){console.error("Error taking lesson:",i),alert("Failed to take lesson: "+i.message)}finally{h(null)}})(e.id),disabled:d===e.id,style:{background:d===e.id?"#555":"var(--primary)",color:"black",border:"none",padding:"8px 15px",borderRadius:"8px",fontWeight:"bold",cursor:d===e.id?"not-allowed":"pointer",fontSize:"14px",display:"flex",alignItems:"center",gap:"6px"},children:d===e.id?"Processing...":(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,lm.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"Take Lesson"]})})]})]},e.id)})):(0,lm.jsxs)("div",{className:"card",style:{padding:"40px 20px",gridColumn:"1 / -1",textAlign:"center"},children:[(0,lm.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\ud83d\udd0d"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"No Requests Found"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"We couldn't find any skill requests matching your search criteria."}),(0,lm.jsxs)("button",{onClick:()=>{l(""),u("all")},style:{background:"var(--primary)",color:"black",border:"none",padding:"10px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,lm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Clear Filters"]})]})}),(0,lm.jsxs)("div",{className:"card",style:{padding:"25px",marginTop:"20px"},children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"15px",fontSize:"1.2rem"},children:"How the Skill Marketplace Works"}),(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px"},children:[(0,lm.jsxs)("div",{style:{flex:"1 1 250px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"1"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Browse Skills"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Explore skills offered by community members or search for specific skills."})]})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 250px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"2"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Request a Lesson"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Request a 1-hour lesson from a teacher who has the skill you want to learn."})]})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 250px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"3"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Learn & Exchange"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"After the lesson, 1 time credit is transferred from you to the teacher."})]})]})]})]}),p&&g&&(0,lm.jsx)(wm,{skillId:g.skillId,skillName:g.skillName,teacherId:g.id,teacherName:g.name,onClose:()=>{f(!1),m(null)},setPage:t})]})},km={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function _m(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Sm={date:_m({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_m({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_m({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Em={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Tm(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const Cm={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Tm({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Tm({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Tm({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Tm({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Tm({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Im(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,(e=>e.test(o))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,(e=>e.test(o)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(o.length)}}}const jm={ordinalNumber:(Rm={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Rm.matchPattern);if(!n)return null;const r=n[0],i=e.match(Rm.parsePattern);if(!i)return null;let s=Rm.valueCallback?Rm.valueCallback(i[0]):i[0];return s=t.valueCallback?t.valueCallback(s):s,{value:s,rest:e.slice(r.length)}}),era:Im({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Im({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Im({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Im({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Im({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Rm;const Nm={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=km[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Sm,formatRelative:(e,t,n,r)=>Em[e],localize:Cm,match:jm,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Am={};function Lm(){return Am}Math.pow(10,8);const Pm=6048e5,Dm=Symbol.for("constructDateFrom");function Om(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&Dm in e?e[Dm](t):e instanceof Date?new e.constructor(t):new Date(t)}function Mm(e,t){return Om(t||e,e)}function Um(e){const t=Mm(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Fm(e,t){const n=Mm(e,t?.in);return n.setHours(0,0,0,0),n}function Bm(e,t,n){const[r,i]=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=Om.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(i)}(n?.in,e,t),s=Fm(r),o=Fm(i),a=+s-Um(s),l=+o-Um(o);return Math.round((a-l)/864e5)}function zm(e,t){const n=Mm(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Vm(e,t){const n=Mm(e,t?.in);return Bm(n,zm(n))+1}function Wm(e,t){const n=Lm(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Mm(e,t?.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function qm(e,t){return Wm(e,{...t,weekStartsOn:1})}function Hm(e,t){const n=Mm(e,t?.in),r=n.getFullYear(),i=Om(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=qm(i),o=Om(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=qm(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function $m(e,t){const n=Hm(e,t),r=Om(t?.in||e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),qm(r)}function Km(e,t){const n=Mm(e,t?.in),r=+qm(n)-+$m(n);return Math.round(r/Pm)+1}function Gm(e,t){const n=Mm(e,t?.in),r=n.getFullYear(),i=Lm(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=Om(t?.in||e,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Wm(o,t),l=Om(t?.in||e,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Wm(l,t);return+n>=+a?r+1:+n>=+c?r:r-1}function Qm(e,t){const n=Lm(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Gm(e,t),s=Om(t?.in||e,0);s.setFullYear(i,0,r),s.setHours(0,0,0,0);return Wm(s,t)}function Ym(e,t){const n=Mm(e,t?.in),r=+Wm(n,t)-+Qm(n,t);return Math.round(r/Pm)+1}function Xm(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Jm={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Xm("yy"===t?r%100:r,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):Xm(n+1,2)},d:(e,t)=>Xm(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>Xm(e.getHours()%12||12,t.length),H:(e,t)=>Xm(e.getHours(),t.length),m:(e,t)=>Xm(e.getMinutes(),t.length),s:(e,t)=>Xm(e.getSeconds(),t.length),S(e,t){const n=t.length,r=e.getMilliseconds();return Xm(Math.trunc(r*Math.pow(10,n-3)),t.length)}},Zm="midnight",ey="noon",ty="morning",ny="afternoon",ry="evening",iy="night",sy={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return n.ordinalNumber(r,{unit:"year"})}return Jm.y(e,t)},Y:function(e,t,n,r){const i=Gm(e,r),s=i>0?i:1-i;if("YY"===t){return Xm(s%100,2)}return"Yo"===t?n.ordinalNumber(s,{unit:"year"}):Xm(s,t.length)},R:function(e,t){return Xm(Hm(e),t.length)},u:function(e,t){return Xm(e.getFullYear(),t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Xm(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Xm(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Jm.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Xm(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=Ym(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):Xm(i,t.length)},I:function(e,t,n){const r=Km(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):Xm(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):Jm.d(e,t)},D:function(e,t,n){const r=Vm(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):Xm(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return Xm(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return Xm(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return Xm(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(i=12===r?ey:0===r?Zm:r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(i=r>=17?ry:r>=12?ny:r>=4?ty:iy,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return Jm.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):Jm.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):Xm(r,t.length)},k:function(e,t,n){let r=e.getHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):Xm(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Jm.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Jm.s(e,t)},S:function(e,t){return Jm.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return ay(r);case"XXXX":case"XX":return ly(r);default:return ly(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return ay(r);case"xxxx":case"xx":return ly(r);default:return ly(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oy(r,":");default:return"GMT"+ly(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oy(r,":");default:return"GMT"+ly(r,":")}},t:function(e,t,n){return Xm(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return Xm(+e,t.length)}};function oy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),s=r%60;return 0===s?n+String(i):n+String(i)+t+Xm(s,2)}function ay(e,t){if(e%60===0){return(e>0?"-":"+")+Xm(Math.abs(e)/60,2)}return ly(e,t)}function ly(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e>0?"-":"+",r=Math.abs(e);return n+Xm(Math.trunc(r/60),2)+t+Xm(r%60,2)}const cy=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},uy=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},dy={p:uy,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return cy(e,t);let s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",cy(r,t)).replace("{{time}}",uy(i,t))}},hy=/^D+$/,py=/^Y+$/,fy=["D","DD","YY","YYYY"];function gy(e){return e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function my(e){return!(!gy(e)&&"number"!==typeof e||isNaN(+Mm(e)))}const yy=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vy=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xy=/^'([^]*?)'?$/,wy=/''/g,by=/[a-zA-Z]/;function ky(e,t,n){const r=Lm(),i=n?.locale??r.locale??Nm,s=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Mm(e,n?.in);if(!my(a))throw new RangeError("Invalid time value");let l=t.match(vy).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,dy[t])(e,i.formatLong)}return e})).join("").match(yy).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:_y(e)};if(sy[t])return{isToken:!0,value:e};if(t.match(by))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map((r=>{if(!r.isToken)return r.value;const s=r.value;(!n?.useAdditionalWeekYearTokens&&function(e){return py.test(e)}(s)||!n?.useAdditionalDayOfYearTokens&&function(e){return hy.test(e)}(s))&&function(e,t,n){const r=function(e,t,n){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(console.warn(r),fy.includes(e))throw new RangeError(r)}(s,t,String(e));return(0,sy[s[0]])(a,s,i.localize,c)})).join("")}function _y(e){const t=e.match(xy);return t?t[1].replace(wy,"'"):e}const Sy=function(e){let{setPage:t}=e;const n=(e,n)=>{"function"===typeof t&&t(e,n)},[r,s]=(0,i.useState)("upcoming"),[o,a]=(0,i.useState)([]),{upcomingLessons:l,completedLessons:c,activeLessons:u,startLesson:d,completeLesson:h,cancelLesson:p,loading:f,getAllUserLessons:g}=vm(),{currentUser:m}=um();(0,i.useEffect)((()=>{!async function(){if(m&&"history"===r)try{const e=await g(m.uid);a(e)}catch(e){console.error("Error fetching lesson history:",e)}}()}),[m,r,g]);const[y,v]=(0,i.useState)({lessonId:null,rating:5,feedback:""}),[x,w]=(0,i.useState)(!1),[b,k]=(0,i.useState)({lessonId:null,reason:""}),[_,S]=(0,i.useState)(!1),E=e=>{n("chat",{recipientId:e})},T=e=>{e&&n("viewProfile",{userId:e})},C=e=>{k({lessonId:e,reason:""}),S(!0)},I=e=>e?ky(e,"yyyy-MM-dd"):"N/A",j=e=>e?ky(e,"HH:mm"):"N/A",R=e=>"student"===e.role?e.teacherName:e.studentName,N=e=>{switch(e){case"completed":return"#4caf50";case"active":return"#2196f3";case"scheduled":case"confirmed":case"pending":return"#ff9800";case"cancelled":return"#f44336";case"open":return"#9c27b0";default:return"#9e9e9e"}},A=e=>e.isRequest&&"open"===e.status?"Waiting for tutor":e.displayStatus||e.status;return(0,lm.jsxs)("div",{className:"fade-in",style:{maxWidth:1e3,margin:"1rem auto"},children:[(0,lm.jsxs)("div",{className:"card",style:{padding:"30px",marginBottom:"20px"},children:[(0,lm.jsx)("h2",{style:{color:"var(--primary)",marginBottom:"20px"},children:"My Lessons"}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"30px",flexWrap:"wrap"},children:[(0,lm.jsx)("button",{onClick:()=>s("upcoming"),style:{background:"upcoming"===r?"var(--primary)":"#252525",color:"upcoming"===r?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1,minWidth:"150px"},children:"Upcoming Lessons"}),(0,lm.jsx)("button",{onClick:()=>s("active"),style:{background:"active"===r?"var(--primary)":"#252525",color:"active"===r?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1,minWidth:"150px"},children:"Active Lessons"}),(0,lm.jsx)("button",{onClick:()=>s("completed"),style:{background:"completed"===r?"var(--primary)":"#252525",color:"completed"===r?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1,minWidth:"150px"},children:"Completed Lessons"}),(0,lm.jsx)("button",{onClick:()=>s("history"),style:{background:"history"===r?"var(--primary)":"#252525",color:"history"===r?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1,minWidth:"150px"},children:"Your History"})]}),f&&(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,lm.jsx)("div",{className:"loader"}),(0,lm.jsx)("div",{style:{marginTop:"20px",color:"#aaa"},children:"Loading your lessons..."})]}),!f&&"history"===r&&(0,lm.jsxs)("div",{children:[(0,lm.jsxs)("div",{style:{marginBottom:"20px",color:"#aaa",fontSize:"14px"},children:[o.length," lesson ",1===o.length?"record":"records"," in your history"]}),o.length>0?(0,lm.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:o.map((e=>{e.isRequest;const t="teacher"===e.role,n="requester"===e.role;let r,i,s,o;return n&&!e.tutorId?(r="No tutor yet",i=null,s="Requested lesson"):t?(r=e.requesterName||"Unknown User",i=e.requesterId,s="Teaching"):(r=e.tutorName||"Unknown User",i=e.tutorId,s="Learning from"),o=n&&!e.tutorId?"#9c27b0":t?"var(--primary)":"#2196f3",(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",borderLeft:`4px solid ${o}`},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{color:o,margin:"0 0 5px 0",fontSize:"1.2rem"},children:e.skillName||"Unnamed Skill"}),(0,lm.jsxs)("div",{style:{color:"#ddd",fontSize:"15px"},children:[s,": ",r]})]}),(0,lm.jsx)("div",{style:{background:N(e.status),color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:A(e)})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"15px",flexWrap:"wrap"},children:[(0,lm.jsxs)("div",{style:{flex:"1",minWidth:"120px"},children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"12px",marginBottom:"3px"},children:"Created"}),(0,lm.jsx)("div",{style:{fontSize:"14px"},children:e.createdAt?ky(e.createdAt,"MMM dd, yyyy"):"N/A"})]}),e.acceptedAt&&(0,lm.jsxs)("div",{style:{flex:"1",minWidth:"120px"},children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"12px",marginBottom:"3px"},children:"Accepted"}),(0,lm.jsx)("div",{style:{fontSize:"14px"},children:ky(e.acceptedAt,"MMM dd, yyyy")})]}),e.completedAt&&(0,lm.jsxs)("div",{style:{flex:"1",minWidth:"120px"},children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"12px",marginBottom:"3px"},children:"Completed"}),(0,lm.jsx)("div",{style:{fontSize:"14px"},children:ky(e.completedAt,"MMM dd, yyyy")})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[i&&(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("button",{onClick:()=>T(i),style:{background:"#333",border:"none",color:"#ddd",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"View Profile"]}),(0,lm.jsxs)("button",{onClick:()=>E(i),style:{background:"var(--primary)",border:"none",color:"black",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Message"]})]}),n&&!e.tutorId&&(0,lm.jsxs)("button",{onClick:()=>C(e.id),style:{background:"#f44336",border:"none",color:"white",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,lm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Cancel Request"]})]})]},e.id)}))}):(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"40px",background:"#252525",borderRadius:"8px"},children:[(0,lm.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\ud83d\udccb"}),(0,lm.jsx)("h3",{style:{marginBottom:"10px",color:"var(--primary)"},children:"No History Found"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"You haven't requested or accepted any lessons yet."}),(0,lm.jsx)("button",{onClick:()=>s("upcoming"),style:{background:"var(--primary)",color:"black",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"View Upcoming Lessons"})]})]}),!f&&"upcoming"===r&&(0,lm.jsxs)("div",{children:[(0,lm.jsxs)("div",{style:{marginBottom:"20px",color:"#aaa",fontSize:"14px"},children:[l.length," upcoming ",1===l.length?"lesson":"lessons"]}),l.length>0?(0,lm.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:l.map((e=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",borderLeft:"teacher"===e.role?"4px solid var(--primary)":"4px solid #9c27b0"},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{color:"teacher"===e.role?"var(--primary)":"#9c27b0",margin:"0 0 5px 0",fontSize:"1.2rem"},children:e.skillName||"Unnamed Skill"}),(0,lm.jsxs)("div",{style:{color:"#ddd",fontSize:"15px"},children:["teacher"===e.role?"Teaching":"Learning from",": ",R(e)]})]}),(0,lm.jsx)("div",{style:{background:"confirmed"===e.status?"#4caf50":"#ff9800",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:e.status})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"20px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,lm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,lm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,lm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),(0,lm.jsx)("span",{children:e.scheduledDate?I(e.scheduledDate):"N/A"})]}),(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),(0,lm.jsx)("span",{children:e.scheduledDate?j(e.scheduledDate):"N/A"})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,lm.jsxs)("button",{onClick:()=>E("teacher"===e.role?e.studentId:e.teacherId),style:{background:"#4a5568",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Message"]}),(0,lm.jsxs)("button",{onClick:()=>T("teacher"===e.role?e.studentId:e.teacherId),style:{background:"transparent",color:"#ddd",border:"1px solid #444",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"View Profile"]}),(0,lm.jsxs)("button",{onClick:()=>(async e=>{try{await d(e),console.log(`Lesson ${e} started successfully`)}catch(t){console.error("Error starting lesson:",t)}})(e.id),style:{background:"#2196f3",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontSize:"14px"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("polygon",{points:"5 3 19 12 5 21 5 3"})}),"Start Lesson"]}),(0,lm.jsxs)("button",{onClick:()=>C(e.id),style:{background:"#f44336",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,lm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"Cancel"]})]})]},e.id)))}):(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"30px",color:"#aaa"},children:[(0,lm.jsx)("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:"\ud83d\udcc5"}),(0,lm.jsx)("div",{style:{marginBottom:"10px"},children:"No upcoming lessons"}),(0,lm.jsx)("div",{style:{fontSize:"14px"},children:"Request a new lesson or browse the skill marketplace"})]})]}),!f&&"active"===r&&(0,lm.jsxs)("div",{children:[(0,lm.jsxs)("div",{style:{marginBottom:"20px",color:"#aaa",fontSize:"14px"},children:[u.length," active ",1===u.length?"lesson":"lessons"]}),u.length>0?(0,lm.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:u.map((e=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",borderLeft:"teacher"===e.role?"4px solid var(--primary)":"4px solid #9c27b0",position:"relative",overflow:"hidden"},children:[(0,lm.jsxs)("div",{style:{position:"absolute",top:"10px",right:"10px",background:"rgba(244, 67, 54, 0.1)",borderRadius:"20px",padding:"5px 10px",display:"flex",alignItems:"center",gap:"5px"},children:[(0,lm.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#f44336",animation:"pulse 1.5s infinite"}}),(0,lm.jsx)("span",{style:{color:"#f44336",fontSize:"12px",fontWeight:"500"},children:"LIVE"})]}),(0,lm.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{color:"teacher"===e.role?"var(--primary)":"#9c27b0",margin:"0 0 5px 0",fontSize:"1.2rem"},children:e.skillName||"Unnamed Skill"}),(0,lm.jsxs)("div",{style:{color:"#ddd",fontSize:"15px"},children:["teacher"===e.role?"Teaching":"Learning from",": ",R(e)]})]})}),(0,lm.jsx)("div",{style:{display:"flex",gap:"15px",marginBottom:"20px"},children:(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),(0,lm.jsxs)("span",{children:["Started at: ",e.startedAt?j(e.startedAt):"N/A"]})]})}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,lm.jsxs)("button",{onClick:()=>E("teacher"===e.role?e.studentId:e.teacherId),style:{background:"#4a5568",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Message"]}),(0,lm.jsxs)("button",{onClick:()=>T("teacher"===e.role?e.studentId:e.teacherId),style:{background:"transparent",color:"#ddd",border:"1px solid #444",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"View Profile"]}),(0,lm.jsxs)("button",{onClick:()=>{return t=e.id,v({lessonId:t,rating:5,feedback:""}),void w(!0);var t},style:{background:"#4caf50",color:"white",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontSize:"14px"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("polyline",{points:"20 6 9 17 4 12"})}),"Complete"]})]})]},e.id)))}):(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"30px",color:"#aaa"},children:[(0,lm.jsx)("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:"\ud83c\udf93"}),(0,lm.jsx)("div",{style:{marginBottom:"10px"},children:"No active lessons"}),(0,lm.jsx)("div",{style:{fontSize:"14px"},children:"Start one of your upcoming lessons"})]})]}),!f&&"completed"===r&&(0,lm.jsxs)("div",{children:[(0,lm.jsxs)("div",{style:{marginBottom:"20px",color:"#aaa",fontSize:"14px"},children:[c.length," completed ",1===c.length?"lesson":"lessons"]}),c.length>0?(0,lm.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:c.map((e=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",borderLeft:"teacher"===e.role?"4px solid var(--primary)":"4px solid #9c27b0"},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"15px"},children:[(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h3",{style:{color:"teacher"===e.role?"var(--primary)":"#9c27b0",margin:"0 0 5px 0",fontSize:"1.2rem"},children:e.skillName||"Unnamed Skill"}),(0,lm.jsxs)("div",{style:{color:"#ddd",fontSize:"15px"},children:["teacher"===e.role?"Taught":"Learned from",": ",R(e)]})]}),(0,lm.jsx)("div",{style:{background:"completed"===e.status?"#4caf50":"#f44336",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"12px",fontWeight:"500",textTransform:"capitalize"},children:e.status})]}),(0,lm.jsx)("div",{style:{display:"flex",gap:"15px",marginBottom:"10px"},children:(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#aaa",fontSize:"14px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,lm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,lm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,lm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),(0,lm.jsx)("span",{children:e.completedAt?I(e.completedAt):e.cancelledAt?I(e.cancelledAt):"N/A"})]})}),"completed"===e.status&&(0,lm.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px",marginBottom:"5px"},children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Rating:"}),(0,lm.jsx)("div",{style:{display:"flex",gap:"2px"},children:[1,2,3,4,5].map((t=>(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:t<=(e.rating||0)?"var(--primary)":"none",stroke:t<=(e.rating||0)?"var(--primary)":"#aaa",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},t)))})]}),e.feedback&&(0,lm.jsxs)("div",{style:{background:"#1e1e1e",padding:"10px 15px",borderRadius:"8px",fontSize:"14px",color:"#ddd",fontStyle:"italic"},children:['"',e.feedback,'"']})]}),"cancelled"===e.status&&e.cancellationReason&&(0,lm.jsxs)("div",{style:{background:"#1e1e1e",padding:"10px 15px",borderRadius:"8px",fontSize:"14px",color:"#f44336",marginBottom:"15px"},children:[(0,lm.jsx)("div",{style:{fontWeight:"500",marginBottom:"5px"},children:"Cancellation reason:"}),(0,lm.jsx)("div",{style:{fontStyle:"italic",color:"#ddd"},children:e.cancellationReason})]}),(0,lm.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,lm.jsxs)("button",{onClick:()=>t("marketplace"),style:{background:"var(--primary)",color:"black",border:"none",padding:"8px 15px",borderRadius:"5px",cursor:"pointer",display:"flex",alignItems:"center",gap:"5px",fontSize:"14px"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"Book Again"]})})]},e.id)))}):(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"30px",color:"#aaa"},children:[(0,lm.jsx)("div",{style:{fontSize:"3rem",marginBottom:"20px"},children:"\ud83d\udcda"}),(0,lm.jsx)("div",{style:{marginBottom:"10px"},children:"No completed lessons"}),(0,lm.jsx)("div",{style:{fontSize:"14px"},children:"Your completed lessons will appear here"})]})]}),(0,lm.jsxs)("div",{className:"card",style:{padding:"30px"},children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"20px"},children:"How Lessons Work"}),(0,lm.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"20px"},children:[(0,lm.jsxs)("div",{style:{flex:"1 1 200px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"1"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Schedule"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Coordinate with your teacher or student to set a date and time for your 1-hour lesson."})]})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 200px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"2"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Attend"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Meet in person or virtually for your lesson at the scheduled time."})]})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 200px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"3"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Complete"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"After the lesson, mark it as completed and leave feedback for your partner."})]})]}),(0,lm.jsxs)("div",{style:{flex:"1 1 200px",display:"flex",gap:"15px",alignItems:"flex-start"},children:[(0,lm.jsx)("div",{style:{minWidth:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",color:"black",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:"4"}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"500",color:"#ddd",marginBottom:"5px"},children:"Exchange"}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Time credits are automatically transferred from student to teacher upon completion."})]})]})]})]})]}),x&&(0,lm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,lm.jsxs)("div",{style:{background:"#1e1e1e",borderRadius:"8px",padding:"25px",width:"90%",maxWidth:"500px"},children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"20px"},children:"Complete Lesson"}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("div",{style:{marginBottom:"10px",color:"#ddd"},children:"How would you rate this lesson?"}),(0,lm.jsx)("div",{style:{display:"flex",gap:"5px"},children:[1,2,3,4,5].map((e=>(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:e<=y.rating?"var(--primary)":"none",stroke:e<=y.rating?"var(--primary)":"#aaa",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{cursor:"pointer"},onClick:()=>v({...y,rating:e}),children:(0,lm.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})},e)))})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("div",{style:{marginBottom:"10px",color:"#ddd"},children:"Feedback (optional)"}),(0,lm.jsx)("textarea",{value:y.feedback,onChange:e=>v({...y,feedback:e.target.value}),style:{width:"100%",background:"#252525",border:"1px solid #333",borderRadius:"5px",padding:"10px",color:"#ddd",minHeight:"100px",resize:"vertical"},placeholder:"Share your experience with this lesson..."})]}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,lm.jsx)("button",{onClick:()=>w(!1),style:{background:"#333",color:"#ddd",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:"pointer"},children:"Cancel"}),(0,lm.jsx)("button",{onClick:async()=>{try{await h(y.lessonId,{rating:y.rating,feedback:y.feedback}),w(!1),console.log(`Lesson ${y.lessonId} completed successfully`)}catch(e){console.error("Error completing lesson:",e)}},style:{background:"#4caf50",color:"white",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:"pointer",fontWeight:"500"},children:"Complete Lesson"})]})]})}),_&&(0,lm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:(0,lm.jsxs)("div",{style:{background:"#1e1e1e",borderRadius:"8px",padding:"25px",width:"90%",maxWidth:"500px"},children:[(0,lm.jsx)("h3",{style:{color:"#f44336",marginBottom:"20px"},children:"Cancel Lesson"}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("div",{style:{marginBottom:"10px",color:"#ddd"},children:"Reason for cancellation"}),(0,lm.jsx)("textarea",{value:b.reason,onChange:e=>k({...b,reason:e.target.value}),style:{width:"100%",background:"#252525",border:"1px solid #333",borderRadius:"5px",padding:"10px",color:"#ddd",minHeight:"100px",resize:"vertical"},placeholder:"Please provide a reason for cancelling this lesson..."})]}),(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,lm.jsx)("button",{onClick:()=>S(!1),style:{background:"#333",color:"#ddd",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:"pointer"},children:"Go Back"}),(0,lm.jsx)("button",{onClick:async()=>{try{await p(b.lessonId,b.reason),S(!1),console.log(`Lesson ${b.lessonId} cancelled successfully`)}catch(e){console.error("Error cancelling lesson:",e)}},style:{background:"#f44336",color:"white",border:"none",padding:"10px 15px",borderRadius:"5px",cursor:"pointer",fontWeight:"500"},children:"Cancel Lesson"})]})]})})]})},Ey=Object.create(null);Ey.open="0",Ey.close="1",Ey.ping="2",Ey.pong="3",Ey.message="4",Ey.upgrade="5",Ey.noop="6";const Ty=Object.create(null);Object.keys(Ey).forEach((e=>{Ty[Ey[e]]=e}));const Cy={type:"error",data:"parser error"},Iy="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),jy="function"===typeof ArrayBuffer,Ry=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ny=(e,t,n)=>{let{type:r,data:i}=e;return Iy&&i instanceof Blob?t?n(i):Ay(i,n):jy&&(i instanceof ArrayBuffer||Ry(i))?t?n(i):Ay(new Blob([i]),n):n(Ey[r]+(i||""))},Ay=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Ly(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Py;const Dy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oy="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let xx=0;xx<64;xx++)Oy[Dy.charCodeAt(xx)]=xx;const My="function"===typeof ArrayBuffer,Uy=(e,t)=>{if("string"!==typeof e)return{type:"message",data:By(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Fy(e.substring(1),t)};return Ty[n]?e.length>1?{type:Ty[n],data:e.substring(1)}:{type:Ty[n]}:Cy},Fy=(e,t)=>{if(My){const n=(e=>{let t,n,r,i,s,o=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);const c=new ArrayBuffer(o),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=Oy[e.charCodeAt(t)],r=Oy[e.charCodeAt(t+1)],i=Oy[e.charCodeAt(t+2)],s=Oy[e.charCodeAt(t+3)],u[l++]=n<<2|r>>4,u[l++]=(15&r)<<4|i>>2,u[l++]=(3&i)<<6|63&s;return c})(e);return By(n,t)}return{base64:!0,data:e}},By=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,zy=String.fromCharCode(30);function Vy(){return new TransformStream({transform(e,t){!function(e,t){Iy&&e.data instanceof Blob?e.data.arrayBuffer().then(Ly).then(t):jy&&(e.data instanceof ArrayBuffer||Ry(e.data))?t(Ly(e.data)):Ny(e,!1,(e=>{Py||(Py=new TextEncoder),t(Py.encode(e))}))}(e,(n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const e=new DataView(i.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{i=new Uint8Array(9);const e=new DataView(i.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!==typeof e.data&&(i[0]|=128),t.enqueue(i),t.enqueue(n)}))}})}let Wy;function qy(e){return e.reduce(((e,t)=>e+t.length),0)}function Hy(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function $y(e){if(e)return function(e){for(var t in $y.prototype)e[t]=$y.prototype[t];return e}(e)}$y.prototype.on=$y.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},$y.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},$y.prototype.off=$y.prototype.removeListener=$y.prototype.removeAllListeners=$y.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},$y.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},$y.prototype.emitReserved=$y.prototype.emit,$y.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},$y.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ky="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Gy="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Qy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Yy=Gy.setTimeout,Xy=Gy.clearTimeout;function Jy(e,t){t.useNativeTimers?(e.setTimeoutFn=Yy.bind(Gy),e.clearTimeoutFn=Xy.bind(Gy)):(e.setTimeoutFn=Gy.setTimeout.bind(Gy),e.clearTimeoutFn=Gy.clearTimeout.bind(Gy))}function Zy(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class ev extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class tv extends $y{constructor(e){super(),this.writable=!1,Jy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new ev(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Uy(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class nv extends tv{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(zy),r=[];for(let i=0;i<n.length;i++){const e=Uy(n[i],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach(((e,s)=>{Ny(e,!1,(e=>{r[s]=e,++i===n&&t(r.join(zy))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Zy()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let rv=!1;try{rv="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(vx){}const iv=rv;function sv(){}class ov extends nv{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class av extends $y{constructor(e,t,n){super(),this.createRequest=e,Jy(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Qy(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(r){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{n.setRequestHeader("Accept","*/*")}catch(r){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(r){return void this.setTimeoutFn((()=>{this._onError(r)}),0)}"undefined"!==typeof document&&(this._index=av.requestsCount++,av.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=sv,e)try{this._xhr.abort()}catch(t){}"undefined"!==typeof document&&delete av.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(av.requestsCount=0,av.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",lv);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Gy?"pagehide":"unload",lv,!1)}function lv(){for(let e in av.requests)av.requests.hasOwnProperty(e)&&av.requests[e].abort()}const cv=function(){const e=uv({xdomain:!1});return e&&null!==e.responseType}();function uv(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||iv))return new XMLHttpRequest}catch(n){}if(!t)try{return new(Gy[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}const dv="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class hv extends tv{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=dv?{}:Qy(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(vx){return this.emitReserved("error",vx)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;Ny(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(t){}r&&Ky((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Zy()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const pv=Gy.WebSocket||Gy.MozWebSocket;const fv={websocket:class extends hv{createSocket(e,t,n){return dv?new pv(e,t,n):t?new pv(e,t):new pv(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends tv{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(vx){return this.emitReserved("error",vx)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Wy||(Wy=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(o,a){for(n.push(o);;){if(0===r){if(qy(n)<1)break;const e=Hy(n,1);s=128===(128&e[0]),i=127&e[0],r=i<126?3:126===i?1:2}else if(1===r){if(qy(n)<2)break;const e=Hy(n,2);i=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(qy(n)<8)break;const e=Hy(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){a.enqueue(Cy);break}i=s*Math.pow(2,32)+t.getUint32(4),r=3}else{if(qy(n)<i)break;const e=Hy(n,i);a.enqueue(Uy(s?e:Wy.decode(e),t)),r=0}if(0===i||i>e){a.enqueue(Cy);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=Vy();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const i=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),i())})).catch((e=>{}))};i();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],r=t===e.length-1;this._writer.write(n).then((()=>{r&&Ky((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ov{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=cv&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new av(uv,this.uri(),e)}}},gv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yv(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=gv.exec(e||""),s={},o=14;for(;o--;)s[mv[o]]=i[o]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,s.query),s}const vv="function"===typeof addEventListener&&"function"===typeof removeEventListener,xv=[];vv&&addEventListener("offline",(()=>{xv.forEach((e=>e()))}),!1);class wv extends $y{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=yv(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=yv(t.host).host);Jy(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let r=0,i=n.length;r<i;r++){let e=n[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),vv&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xv.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&wv.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",wv.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const r=this.writeBuffer[n].data;if(r&&(e+="string"===typeof(t=r)?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ky((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(wv.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vv&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=xv.indexOf(this._offlineEventListener);-1!==e&&xv.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}wv.protocol=4;class bv extends wv{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;wv.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;wv.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function i(){n||(n=!0,c(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function o(){s("transport closed")}function a(){s("socket closed")}function l(e){t&&e.name!==t.name&&i()}const c=()=>{t.removeListener("open",r),t.removeListener("error",s),t.removeListener("close",o),this.off("close",a),this.off("upgrading",l)};t.once("open",r),t.once("error",s),t.once("close",o),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class kv extends bv{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>fv[e])).filter((e=>!!e))),super(e,t)}}const _v="function"===typeof ArrayBuffer,Sv=Object.prototype.toString,Ev="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Sv.call(Blob),Tv="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Sv.call(File);function Cv(e){return _v&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Ev&&e instanceof Blob||Tv&&e instanceof File}function Iv(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Iv(e[t]))return!0;return!1}if(Cv(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Iv(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Iv(e[n]))return!0;return!1}function jv(e){const t=[],n=e.data,r=e;return r.data=Rv(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Rv(e,t){if(!e)return e;if(Cv(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=Rv(e[r],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=Rv(e[r],t));return n}return e}function Nv(e,t){return e.data=Av(e.data,t),delete e.attachments,e}function Av(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Av(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Av(e[n],t));return e}const Lv=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Pv=5;var Dv;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Dv||(Dv={}));class Ov{constructor(e){this.replacer=e}encode(e){return e.type!==Dv.EVENT&&e.type!==Dv.ACK||!Iv(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Dv.EVENT?Dv.BINARY_EVENT:Dv.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Dv.BINARY_EVENT&&e.type!==Dv.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=jv(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function Mv(e){return"[object Object]"===Object.prototype.toString.call(e)}class Uv extends $y{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Dv.BINARY_EVENT;n||t.type===Dv.BINARY_ACK?(t.type=n?Dv.EVENT:Dv.ACK,this.reconstructor=new Fv(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Cv(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Dv[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Dv.BINARY_EVENT||n.type===Dv.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!Uv.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case Dv.CONNECT:return Mv(t);case Dv.DISCONNECT:return void 0===t;case Dv.CONNECT_ERROR:return"string"===typeof t||Mv(t);case Dv.EVENT:case Dv.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Lv.indexOf(t[0]));case Dv.ACK:case Dv.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fv{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Nv(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Bv(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const zv=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Vv extends $y{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Bv(e,"open",this.onopen.bind(this)),Bv(e,"packet",this.onpacket.bind(this)),Bv(e,"error",this.onerror.bind(this)),Bv(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(zv.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const a={type:Dv.EVENT,data:s,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof s[s.length-1]){const e=this.ids++,t=s.pop();this._registerAckCallback(e,t),a.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,r=this;const i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===i)return void(this.acks[e]=t);const s=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),i),o=function(){r.io.clearTimeoutFn(s);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,n)};o.withError=!0,this.acks[e]=o}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(((t,r)=>{const i=(e,n)=>e?r(e):t(n);i.withError=!0,n.push(i),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(r!==t._queue[0])return;if(null!==e)r.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];n(null,...s)}return r.pending=!1,t._drainQueue()})),this._queue.push(r),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Dv.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Dv.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Dv.EVENT:case Dv.BINARY_EVENT:this.onevent(e);break;case Dv.ACK:case Dv.BINARY_ACK:this.onack(e);break;case Dv.DISCONNECT:this.ondisconnect();break;case Dv.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];t.packet({type:Dv.ACK,id:e,data:i})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Dv.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Wv(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Wv.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Wv.prototype.reset=function(){this.attempts=0},Wv.prototype.setMin=function(e){this.ms=e},Wv.prototype.setMax=function(e){this.max=e},Wv.prototype.setJitter=function(e){this.jitter=e};class qv extends $y{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Jy(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Wv({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||r;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new kv(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=Bv(t,"open",(function(){n.onopen(),e&&e()})),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=Bv(t,"error",i);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{r(),i(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(r),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Bv(e,"ping",this.onping.bind(this)),Bv(e,"data",this.ondata.bind(this)),Bv(e,"error",this.onerror.bind(this)),Bv(e,"close",this.onclose.bind(this)),Bv(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ky((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Vv(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Hv={};function $v(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=yv(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=Hv[i]&&s in Hv[i].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||o?a=new qv(r,t):(Hv[i]||(Hv[i]=new qv(r,t)),a=Hv[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign($v,{Manager:qv,Socket:Vv,io:$v,connect:$v});const Kv=new class{constructor(){this.socket=null,this.isConnected=!1,this.callbacks={newMessage:[],messageNotification:[],messagesRead:[],userTyping:[],userStopTyping:[],userStatusChange:[],activeUsers:[]}}async initializeSocket(){if(!this.socket)try{const e=window.location.origin;return this.socket=$v(e,{autoConnect:!1,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5}),this.socket.on("connect",(()=>{console.log("Socket connected"),this.isConnected=!0})),this.socket.on("disconnect",(()=>{console.log("Socket disconnected"),this.isConnected=!1})),this.socket.on("new_message",(e=>{this.callbacks.newMessage.forEach((t=>t(e)))})),this.socket.on("message_notification",(e=>{this.callbacks.messageNotification.forEach((t=>t(e)))})),this.socket.on("messages_read",(e=>{this.callbacks.messagesRead.forEach((t=>t(e)))})),this.socket.on("user_typing",(e=>{this.callbacks.userTyping.forEach((t=>t(e)))})),this.socket.on("user_stop_typing",(e=>{this.callbacks.userStopTyping.forEach((t=>t(e)))})),this.socket.on("user_status_change",(e=>{this.callbacks.userStatusChange.forEach((t=>t(e)))})),this.socket.on("active_users",(e=>{this.callbacks.activeUsers.forEach((t=>t(e)))})),this.socket.connect(),!0}catch(e){return console.error("Socket initialization error:",e),!1}}async authenticateSocket(){if(!this.socket||!this.isConnected)return!1;try{const e=Ff().currentUser;if(!e)return!1;const t=await e.getIdToken();return this.socket.emit("authenticate",{token:t}),!0}catch(e){return console.error("Socket authentication error:",e),!1}}disconnectSocket(){this.socket&&(this.socket.disconnect(),this.socket=null,this.isConnected=!1)}joinChatRoom(e){this.socket&&this.isConnected&&this.socket.emit("join_room",{chatId:e})}leaveChatRoom(e){this.socket&&this.isConnected&&this.socket.emit("leave_room",{chatId:e})}sendSocketMessage(e,t){this.socket&&this.isConnected&&this.socket.emit("send_message",{chatId:e,text:t})}markMessagesRead(e,t){this.socket&&this.isConnected&&this.socket.emit("mark_read",{chatId:e,messageIds:t})}sendTypingIndicator(e){this.socket&&this.isConnected&&this.socket.emit("typing",{chatId:e})}sendStopTypingIndicator(e){this.socket&&this.isConnected&&this.socket.emit("stop_typing",{chatId:e})}onNewMessage(e){return this.callbacks.newMessage.push(e),()=>{this.callbacks.newMessage=this.callbacks.newMessage.filter((t=>t!==e))}}onMessageNotification(e){return this.callbacks.messageNotification.push(e),()=>{this.callbacks.messageNotification=this.callbacks.messageNotification.filter((t=>t!==e))}}onMessagesRead(e){return this.callbacks.messagesRead.push(e),()=>{this.callbacks.messagesRead=this.callbacks.messagesRead.filter((t=>t!==e))}}onUserTyping(e){return this.callbacks.userTyping.push(e),()=>{this.callbacks.userTyping=this.callbacks.userTyping.filter((t=>t!==e))}}onUserStopTyping(e){return this.callbacks.userStopTyping.push(e),()=>{this.callbacks.userStopTyping=this.callbacks.userStopTyping.filter((t=>t!==e))}}onUserStatusChange(e){return this.callbacks.userStatusChange.push(e),()=>{this.callbacks.userStatusChange=this.callbacks.userStatusChange.filter((t=>t!==e))}}onActiveUsers(e){return this.callbacks.activeUsers.push(e),()=>{this.callbacks.activeUsers=this.callbacks.activeUsers.filter((t=>t!==e))}}},Gv=Kv,Qv=(0,i.createContext)();function Yv(){return(0,i.useContext)(Qv)}function Xv(e){let{children:t}=e;const{currentUser:n}=um(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)([]),[u,d]=(0,i.useState)(!0),[h,p]=(0,i.useState)(""),[f,g]=(0,i.useState)({}),[m,y]=(0,i.useState)({}),[v,x]=(0,i.useState)([]);(0,i.useEffect)((()=>{if(!n)return;return(async()=>{try{await Gv.initializeSocket(),await Gv.authenticateSocket()}catch(vx){console.error("Socket initialization error:",vx)}})(),()=>{Gv.disconnectSocket()}}),[n]),(0,i.useEffect)((()=>{if(!n)return;const e=Gv.onNewMessage((e=>{e.chatId===o&&(c((t=>[...t,{...e,createdAt:new Date(e.createdAt)}])),Gv.markMessagesRead(e.chatId,[e.id]))})),t=Gv.onMessageNotification((e=>{g((t=>({...t,[e.chatId]:(t[e.chatId]||0)+1})))})),r=Gv.onMessagesRead((e=>{let{chatId:t,readBy:r}=e;t===o&&n.uid!==r&&c((e=>e.map((e=>e.senderId===n.uid?{...e,read:!0}:e))))})),i=Gv.onUserTyping((e=>{let{chatId:t,userId:r}=e;t===o&&r!==n.uid&&y((e=>({...e,[r]:!0})))})),s=Gv.onUserStopTyping((e=>{let{chatId:t,userId:r}=e;t===o&&r!==n.uid&&y((e=>{const t={...e};return delete t[r],t}))})),a=Gv.onUserStatusChange((e=>{let{userId:t,status:n}=e;x("online"===n?e=>[...e,t]:e=>e.filter((e=>e!==t)))})),l=Gv.onActiveUsers((e=>{x(e)}));return()=>{e(),t(),r(),i(),s(),a(),l()}}),[n,o]),(0,i.useEffect)((()=>{if(o&&n)return Gv.joinChatRoom(o),()=>{Gv.leaveChatRoom(o)}}),[o,n]);const w=(0,i.useCallback)((async(e,t)=>{try{if(p(""),!n||!e||!t.trim())throw new Error("Missing required information to send message");const r=Yc(om,"chats",e),i=await nd(r);if(!i.exists())throw new Error("Chat not found");i.data().participants.filter((e=>e!==n.uid)),await ad(Qc(om,"messages"),{chatId:e,senderId:n.uid,senderName:n.displayName,text:t,createdAt:dd(),read:!1});return await od(r,{lastMessage:t,lastMessageTime:dd(),lastMessageSenderId:n.uid}),Gv.sendSocketMessage(e,t),!0}catch(vx){throw p(vx.message),vx}}),[n]),b=(0,i.useCallback)((async e=>{try{if(!n||!e)return;const t=Yc(om,"chats",e),r=await nd(t);if(!r.exists())return;const i=r.data();if(i.unreadBy&&i.unreadBy.includes(n.uid)){const e=i.unreadBy.filter((e=>e!==n.uid));await od(t,{unreadBy:e})}const s=Bu(Qc(om,"messages"),Vu("chatId","==",e),Vu("senderId","!=",n.uid),Vu("read","==",!1)),o=await id(s),a=o.docs.map((e=>od(e.ref,{read:!0})));await Promise.all(a);const l=o.docs.map((e=>e.id));return l.length>0&&Gv.markMessagesRead(e,l),g((t=>({...t,[e]:0}))),!0}catch(vx){return console.error("Error marking chat as read:",vx),!1}}),[n]),k=(0,i.useCallback)((e=>{Gv.sendTypingIndicator(e)}),[]),_=(0,i.useCallback)((e=>{Gv.sendStopTypingIndicator(e)}),[]);const S=(0,i.useCallback)((async e=>{if(!n)return null;try{const t=e.participants.find((e=>e!==n.uid));if(!t)return{...e,otherParticipant:{id:null,name:"Unknown User"},isUnread:!1};const r=Yc(om,"users",t),i=await nd(r);let s={id:t,name:t};if(i.exists()){const e=i.data();s={id:t,name:e.name||e.displayName||e.email||t,photoURL:e.photoURL||null}}const o=e.lastMessageSenderId!==n.uid&&(!e.readBy||!e.readBy.includes(n.uid)),a=v.includes(t);return{...e,otherParticipant:s,isUnread:o,isOnline:a}}catch(vx){return console.error("Error getting chat details:",vx),{...e,otherParticipant:{id:otherParticipantId,name:otherParticipantId},isUnread:!1,isOnline:!1}}}),[n,v]);return(0,i.useEffect)((()=>{if(!n)return s([]),c([]),a(null),void d(!1);d(!0);const e=ld(Bu(Qc(om,"chats"),Vu("participants","array-contains",n.uid),Hu("lastMessageTime","desc")),(async e=>{const t=[],r={};for(const s of e.docs){var i,o;const e={id:s.id,...s.data(),createdAt:null===(i=s.data().createdAt)||void 0===i?void 0:i.toDate(),lastMessageTime:null===(o=s.data().lastMessageTime)||void 0===o?void 0:o.toDate()},a=await S(e),l=Bu(Qc(om,"messages"),Vu("chatId","==",s.id),Vu("senderId","!=",n.uid),Vu("read","==",!1)),c=await id(l);r[s.id]=c.size,t.push(a)}s(t),g(r),d(!1)}),(e=>{console.error("Error fetching chats:",e),p(e.message),d(!1)}));return()=>{e()}}),[n,v,S]),(0,i.useEffect)((()=>{if(!o)return void c([]);b(o);const e=ld(Bu(Qc(om,"messages"),Vu("chatId","==",o),Hu("createdAt","asc")),(e=>{const t=[];e.forEach((e=>{const n=e.data();t.push({id:e.id,...n,createdAt:n.createdAt?n.createdAt.toDate():new Date})})),c(t)}),(e=>{console.error("Error fetching messages:",e),p(e.message)}));return()=>{e()}}),[o,b]),(0,lm.jsx)(Qv.Provider,{value:{chats:r,activeChat:o,setActiveChat:a,messages:l,sendMessage:w,createChat:async function(e){try{if(p(""),!n||!e)throw new Error("User not authenticated or recipient not specified");const t=r.find((t=>t.participants.includes(e)&&t.participants.includes(n.uid)));if(t)return a(t.id),t.id;const i=Yc(om,"users",e),s=await nd(i);let o=e,l={};s.exists()&&(l=s.data(),o=l.name||l.displayName||l.email||e);const c=Yc(om,"users",n.uid),u=await nd(c);let d=n.displayName||n.email||n.uid;if(u.exists()){const e=u.data();d=e.name||e.displayName||e.email||n.uid}const h={participants:[n.uid,e],participantNames:{[n.uid]:d,[e]:o},createdAt:dd(),lastMessage:"Chat started",lastMessageTime:dd(),lastMessageSenderId:n.uid,unreadBy:[e]},f=await ad(Qc(om,"chats"),h);return await ad(Qc(om,"messages"),{chatId:f.id,senderId:"system",senderName:"System",text:`Chat started between ${d} and ${o}`,createdAt:dd(),read:!1}),a(f.id),f.id}catch(vx){throw console.error("Error creating chat:",vx),p(vx.message),vx}},markChatAsRead:b,unreadCounts:f,typingUsers:m,onlineUsers:v,sendTypingIndicator:k,sendStopTypingIndicator:_,loading:u,error:h},children:t})}async function Jv(e){if(!e)return!1;try{const t=Bu(Qc(om,"lessons"),Vu("studentId","==",e.uid));return!(await id(t)).empty}catch(t){return console.error("Error checking user lessons:",t),!1}}const Zv=e=>{let{ratings:t,isLoading:n}=e;if(n)return(0,lm.jsxs)("div",{className:"ratings-container loading",children:[(0,lm.jsx)("div",{className:"loading-spinner"}),(0,lm.jsx)("p",{children:"Loading ratings..."})]});if(!t||!t.ratings||0===t.ratings.length)return(0,lm.jsx)("div",{className:"ratings-container empty",children:(0,lm.jsx)("p",{children:"No ratings yet."})});const r=[...t.ratings].sort(((e,t)=>new Date(t.ratedAt)-new Date(e.ratedAt)));return(0,lm.jsxs)("div",{className:"ratings-container",children:[(0,lm.jsx)("div",{className:"ratings-summary",children:(0,lm.jsxs)("div",{className:"average-rating",children:[(0,lm.jsx)("div",{className:"rating-number",children:t.averageRating.toFixed(1)}),(0,lm.jsx)("div",{className:"rating-stars",children:[1,2,3,4,5].map((e=>(0,lm.jsx)("span",{className:"star "+(e<=Math.round(t.averageRating)?"filled":""),children:"\u2605"},e)))}),(0,lm.jsxs)("div",{className:"total-ratings",children:[t.totalRatings," ",1===t.totalRatings?"rating":"ratings"]})]})}),(0,lm.jsx)("div",{className:"ratings-list",children:r.map(((e,t)=>(0,lm.jsxs)("div",{className:"rating-item",children:[(0,lm.jsxs)("div",{className:"rating-header",children:[(0,lm.jsx)("div",{className:"rating-skill",children:e.skillName}),(0,lm.jsx)("div",{className:"rating-date",children:new Date(e.ratedAt).toLocaleDateString()})]}),(0,lm.jsx)("div",{className:"rating-stars",children:[1,2,3,4,5].map((t=>(0,lm.jsx)("span",{className:"star "+(t<=e.rating?"filled":""),children:"\u2605"},t)))}),e.feedback&&(0,lm.jsxs)("div",{className:"rating-feedback",children:['"',e.feedback,'"']})]},t)))}),(0,lm.jsx)("style",{jsx:"true",children:"\n        .ratings-container {\n          background: #252525;\n          border-radius: 8px;\n          padding: 20px;\n          margin-top: 20px;\n        }\n\n        .ratings-container.loading,\n        .ratings-container.empty {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          min-height: 150px;\n          color: #999;\n        }\n\n        .loading-spinner {\n          border: 3px solid #333;\n          border-radius: 50%;\n          border-top: 3px solid var(--primary);\n          width: 30px;\n          height: 30px;\n          animation: spin 1s linear infinite;\n          margin-bottom: 10px;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .ratings-summary {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 20px;\n          padding-bottom: 20px;\n          border-bottom: 1px solid #333;\n        }\n\n        .average-rating {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .rating-number {\n          font-size: 48px;\n          font-weight: bold;\n          color: var(--primary);\n        }\n\n        .rating-stars {\n          display: flex;\n          margin: 5px 0;\n        }\n\n        .star {\n          font-size: 18px;\n          color: #555;\n          margin: 0 2px;\n        }\n\n        .star.filled {\n          color: var(--primary);\n        }\n\n        .total-ratings {\n          color: #999;\n          font-size: 14px;\n        }\n\n        .ratings-list {\n          display: flex;\n          flex-direction: column;\n          gap: 15px;\n        }\n\n        .rating-item {\n          padding: 15px;\n          background: #333;\n          border-radius: 6px;\n        }\n\n        .rating-header {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 10px;\n        }\n\n        .rating-skill {\n          font-weight: 500;\n          color: #fff;\n        }\n\n        .rating-date {\n          color: #999;\n          font-size: 14px;\n        }\n\n        .rating-feedback {\n          margin-top: 10px;\n          font-style: italic;\n          color: #ccc;\n          line-height: 1.4;\n        }\n      "})]})},ex=e=>{let{proofs:t,onDelete:n}=e;if(!t||0===t.length)return(0,lm.jsx)("div",{className:"skill-proofs-container empty",children:(0,lm.jsx)("p",{children:"No skill proofs uploaded yet."})});const r=[...t].sort(((e,t)=>new Date(t.uploadedAt)-new Date(e.uploadedAt)));return(0,lm.jsxs)("div",{className:"skill-proofs-container",children:[(0,lm.jsx)("div",{className:"proofs-list",children:r.map((e=>(0,lm.jsxs)("div",{className:"proof-item",children:[(0,lm.jsxs)("div",{className:"proof-header",children:[(0,lm.jsx)("div",{className:"proof-skill",children:e.skillName}),(0,lm.jsx)("div",{className:"proof-date",children:new Date(e.uploadedAt).toLocaleDateString()})]}),(0,lm.jsx)("div",{className:"proof-content",children:e.fileType.startsWith("image/")?(0,lm.jsx)("div",{className:"proof-image-container",children:(0,lm.jsx)("img",{src:e.fileURL,alt:`Proof for ${e.skillName}`,className:"proof-image"})}):(0,lm.jsx)("div",{className:"proof-pdf-container",children:(0,lm.jsxs)("a",{href:e.fileURL,target:"_blank",rel:"noopener noreferrer",className:"proof-pdf-link",children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,lm.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,lm.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,lm.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,lm.jsx)("polyline",{points:"10 9 9 9 8 9"})]}),"View PDF Document"]})})}),n&&(0,lm.jsx)("div",{className:"proof-actions",children:(0,lm.jsx)("button",{className:"delete-proof-button",onClick:()=>n(e.id),children:"Delete Proof"})})]},e.id)))}),(0,lm.jsx)("style",{jsx:"true",children:"\n        .skill-proofs-container {\n          background: #252525;\n          border-radius: 8px;\n          padding: 20px;\n          margin-top: 20px;\n        }\n\n        .skill-proofs-container.empty {\n          display: flex;\n          justify-content: center;\n          min-height: 100px;\n          align-items: center;\n          color: #999;\n        }\n\n        .proofs-list {\n          display: flex;\n          flex-direction: column;\n          gap: 15px;\n        }\n\n        .proof-item {\n          padding: 15px;\n          background: #333;\n          border-radius: 6px;\n        }\n\n        .proof-header {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 15px;\n        }\n\n        .proof-skill {\n          font-weight: 500;\n          color: #fff;\n        }\n\n        .proof-date {\n          color: #999;\n          font-size: 14px;\n        }\n\n        .proof-content {\n          margin: 15px 0;\n        }\n\n        .proof-image-container {\n          display: flex;\n          justify-content: center;\n          background: #222;\n          border-radius: 4px;\n          overflow: hidden;\n        }\n\n        .proof-image {\n          max-width: 100%;\n          max-height: 300px;\n          object-fit: contain;\n        }\n\n        .proof-pdf-container {\n          display: flex;\n          justify-content: center;\n        }\n\n        .proof-pdf-link {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          background: #444;\n          color: white;\n          padding: 10px 15px;\n          border-radius: 4px;\n          text-decoration: none;\n          transition: background 0.2s;\n        }\n\n        .proof-pdf-link:hover {\n          background: var(--primary);\n        }\n\n        .proof-actions {\n          display: flex;\n          justify-content: flex-end;\n          margin-top: 10px;\n        }\n\n        .delete-proof-button {\n          background: #444;\n          color: white;\n          border: none;\n          padding: 8px 12px;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 14px;\n          transition: background 0.2s;\n        }\n\n        .delete-proof-button:hover {\n          background: #d32f2f;\n        }\n      "})]})};const tx=function(e){var t;let{setPage:n}=e;const{currentUser:r,getUserProfile:s}=um(),{addSkill:o,updateBio:a,myRequests:l,myLessons:c,uploadSkillProof:u,getUserRatings:d}=fm(),{upcomingLessons:h,completedLessons:p,activeLessons:f}=vm(),{createChat:g}=Yv(),[m,y]=(0,i.useState)(null),[v,x]=(0,i.useState)(!0),[w,b]=(0,i.useState)(""),[k,_]=(0,i.useState)(!1),[S,E]=(0,i.useState)({name:"",level:"Beginner"}),[T,C]=(0,i.useState)(!1),[I,j]=(0,i.useState)("overview"),[R,N]=(0,i.useState)(!0),[A,L]=(0,i.useState)(!1),[P,D]=(0,i.useState)(!1),[O,M]=(0,i.useState)(null),[U,F]=(0,i.useState)(null),[B,z]=(0,i.useState)(null),[V,W]=(0,i.useState)(!1),[q,H]=(0,i.useState)({});(0,i.useEffect)((()=>{!async function(){if(r)try{const t=await s(r.uid);y(t),b(t&&t.bio?t.bio:"");const n=await Jv(r.uid);N(n),W(!0);try{const e=await d(r.uid);z(e)}catch(e){console.log("No ratings found for new user, this is normal for new signups"),z({averageRating:0,totalRatings:0,ratings:[]})}finally{W(!1)}}catch(e){console.error("Error fetching user data:",e)}finally{x(!1)}}()}),[r,s,d,Jv]);const $=async(e,t)=>{if(r&&t){H((t=>({...t,[e]:!0})));try{const e=await g(t);n("chat",{chatId:e})}catch(i){console.error("Error starting chat:",i),alert("Failed to start chat. Please try again.")}finally{H((t=>({...t,[e]:!1})))}}};return v?(0,lm.jsxs)("div",{className:"card fade-in",style:{maxWidth:480,margin:"2rem auto",textAlign:"center",padding:"2rem"},children:[(0,lm.jsx)("div",{style:{fontSize:"30px",marginBottom:"20px"},children:"\u231b"}),(0,lm.jsx)("h2",{style:{color:"var(--primary)",marginBottom:"20px"},children:"Loading Profile..."})]}):r&&m?(0,lm.jsxs)("div",{className:"fade-in",style:{maxWidth:800,margin:"1rem auto"},children:[(0,lm.jsxs)("div",{className:"card",style:{padding:"30px",marginBottom:"20px",position:"relative",overflow:"hidden"},children:[(0,lm.jsx)("div",{style:{position:"absolute",top:0,right:0,width:"150px",height:"150px",background:"var(--primary)",opacity:.1,borderRadius:"0 0 0 100%"}}),(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[(0,lm.jsx)("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"#252525",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"30px",border:"2px solid var(--primary)"},children:null===m||void 0===m||null===(t=m.name)||void 0===t?void 0:t.charAt(0).toUpperCase()}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("h2",{style:{margin:"0",color:"var(--primary)"},children:(null===m||void 0===m?void 0:m.name)||"User"}),(0,lm.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"},children:(0,lm.jsxs)("span",{style:{background:"#252525",padding:"4px 10px",borderRadius:"20px",fontSize:"14px",color:"#ddd"},children:[(null===m||void 0===m?void 0:m.timeCredits)||0," Time Credits"]})})]})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[(0,lm.jsx)("button",{onClick:()=>j("overview"),style:{background:"overview"===I?"var(--primary)":"#252525",color:"overview"===I?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1},children:"Overview"}),(0,lm.jsx)("button",{onClick:()=>j("skills"),style:{background:"skills"===I?"var(--primary)":"#252525",color:"skills"===I?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1},children:"My Skills"}),(0,lm.jsx)("button",{onClick:()=>j("lessons"),style:{background:"lessons"===I?"var(--primary)":"#252525",color:"lessons"===I?"black":"#ddd",padding:"10px 20px",borderRadius:"8px",border:"none",cursor:"pointer",flex:1},children:"Lessons"})]}),(0,lm.jsxs)("div",{className:"card",style:{padding:"30px"},children:["overview"===I&&(0,lm.jsxs)("div",{className:"fade-in",children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginTop:0},children:"Account Overview"}),(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",marginBottom:"20px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Name"}),(0,lm.jsx)("div",{style:{fontSize:"16px",marginTop:"5px"},children:(null===m||void 0===m?void 0:m.name)||"Not provided"})]}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Email"}),(0,lm.jsx)("div",{style:{fontSize:"16px",marginTop:"5px"},children:(null===m||void 0===m?void 0:m.email)||"Not provided"})]}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Password"}),(0,lm.jsx)("div",{style:{fontSize:"16px",marginTop:"5px",letterSpacing:"2px"},children:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",marginBottom:"20px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px"},children:"Bio & Skills"}),k?(0,lm.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,lm.jsx)("button",{onClick:()=>{_(!1),b((null===m||void 0===m?void 0:m.bio)||"")},style:{background:"#333",border:"none",color:"#ddd",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Cancel"}),(0,lm.jsx)("button",{onClick:async()=>{try{await a(w),y((e=>({...e,bio:w}))),_(!1)}catch(e){console.error("Error updating bio:",e)}},style:{background:"var(--primary)",border:"none",color:"black",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Save"})]}):(0,lm.jsx)("button",{onClick:()=>_(!0),style:{background:"transparent",border:"1px solid #444",color:"#ddd",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Edit"})]}),k?(0,lm.jsx)("textarea",{value:w,onChange:e=>b(e.target.value),placeholder:"Tell others about yourself and the skills you can teach...",style:{width:"100%",minHeight:"100px",padding:"10px",background:"#333",border:"1px solid #444",borderRadius:"4px",color:"#fff",fontSize:"16px",lineHeight:"1.5",resize:"vertical"}}):(0,lm.jsx)("div",{style:{fontSize:"16px",color:"#ddd",lineHeight:"1.5"},children:(null===m||void 0===m?void 0:m.bio)||"Add a bio to tell others about yourself and the skills you can teach."})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:"20px"},children:[(0,lm.jsxs)("div",{style:{flex:1,background:"#252525",padding:"20px",borderRadius:"8px"},children:[(0,lm.jsx)("h4",{style:{margin:"0 0 15px 0",color:"var(--primary)"},children:"Skills Offered"}),(0,lm.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold"},children:null!==m&&void 0!==m&&m.skills?m.skills.length:0}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px",marginTop:"5px"},children:"Skills you can teach"})]}),(0,lm.jsxs)("div",{style:{flex:1,background:"#252525",padding:"20px",borderRadius:"8px"},children:[(0,lm.jsx)("h4",{style:{margin:"0 0 15px 0",color:"var(--primary)"},children:"Time Credits"}),(0,lm.jsx)("div",{style:{fontSize:"32px",fontWeight:"bold"},children:(null===m||void 0===m?void 0:m.timeCredits)||0}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"14px",marginTop:"5px"},children:"Hours available to learn"})]})]}),(0,lm.jsxs)("div",{style:{background:"#252525",padding:"15px 20px",borderRadius:"8px",fontSize:"14px",color:"#aaa",display:"flex",alignItems:"center",gap:"10px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"var(--primary)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,lm.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),(0,lm.jsxs)("span",{children:[(0,lm.jsx)("b",{style:{color:"var(--primary)"},children:"Note:"})," Each time credit represents one hour of learning. Teach others to earn more credits!"]})]})]}),"skills"===I&&(0,lm.jsxs)("div",{className:"fade-in",children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginTop:0},children:"My Skills"}),null!==m&&void 0!==m&&m.skills&&m.skills.length>0?(0,lm.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[m.skills.map(((e,t)=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontSize:"18px",color:"#fff",marginBottom:"5px"},children:e.name}),(0,lm.jsxs)("div",{style:{fontSize:"14px",color:"#aaa"},children:["Level: ",e.level]})]}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("button",{style:{background:"transparent",border:"1px solid #444",color:"#ddd",padding:"8px 12px",borderRadius:"4px",marginRight:"10px",cursor:"pointer"},children:"Edit"}),(0,lm.jsx)("button",{style:{background:"#333",border:"none",color:"#aaa",padding:"8px 12px",borderRadius:"4px",cursor:"pointer"},children:"Remove"})]})]},t))),T?(0,lm.jsxs)("div",{style:{background:"#252525",padding:"20px",borderRadius:"8px",border:"1px dashed #444"},children:[(0,lm.jsx)("h4",{style:{color:"var(--primary)",marginTop:0,marginBottom:"15px"},children:"Add New Skill"}),(0,lm.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"5px",color:"#ddd"},children:"Skill Name:"}),(0,lm.jsx)("input",{type:"text",value:S.name,onChange:e=>E({...S,name:e.target.value}),placeholder:"e.g., JavaScript, Tabla, Yoga, etc.",style:{width:"100%",padding:"10px",background:"#333",border:"1px solid #444",borderRadius:"4px",color:"#fff"}})]}),(0,lm.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"5px",color:"#ddd"},children:"Skill Level:"}),(0,lm.jsxs)("select",{value:S.level,onChange:e=>E({...S,level:e.target.value}),style:{width:"100%",padding:"10px",background:"#333",border:"1px solid #444",borderRadius:"4px",color:"#fff"},children:[(0,lm.jsx)("option",{value:"Beginner",children:"Beginner"}),(0,lm.jsx)("option",{value:"Intermediate",children:"Intermediate"}),(0,lm.jsx)("option",{value:"Advanced",children:"Advanced"}),(0,lm.jsx)("option",{value:"Expert",children:"Expert"})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"5px",color:"#ddd"},children:"Upload Proof (PDF or JPG):"}),(0,lm.jsxs)("div",{style:{border:"1px dashed #444",borderRadius:"4px",padding:"15px",textAlign:"center",cursor:"pointer",position:"relative"},children:[(0,lm.jsx)("input",{type:"file",id:"skill-proof",accept:".pdf,.jpg,.jpeg",onChange:e=>F(e.target.files[0]),style:{position:"absolute",top:0,left:0,opacity:0,width:"100%",height:"100%",cursor:"pointer"}}),(0,lm.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"var(--primary)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,lm.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,lm.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),(0,lm.jsx)("span",{style:{color:"#aaa"},children:U?U.name:"Click to upload PDF or JPG (max 5MB)"})]})]}),U&&(0,lm.jsxs)("div",{style:{marginTop:"10px",background:"#333",padding:"10px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"var(--primary)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,lm.jsx)("polyline",{points:"14 2 14 8 20 8"})]}),(0,lm.jsx)("span",{style:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:U.name}),(0,lm.jsx)("button",{onClick:()=>F(null),style:{background:"transparent",border:"none",color:"#aaa",cursor:"pointer"},children:(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,lm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]}),(0,lm.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,lm.jsx)("button",{onClick:()=>{C(!1),F(null)},style:{background:"#333",border:"none",color:"#ddd",padding:"8px 15px",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),(0,lm.jsx)("button",{onClick:async()=>{if(S.name)try{let e=null;U&&(e=await u(U,S.name)),await o({...S,proofUrl:e});const t=await s(r.uid);y(t),E({name:"",level:"Beginner"}),F(null),C(!1)}catch(e){console.error("Error adding skill:",e)}},style:{background:"var(--primary)",border:"none",color:"black",padding:"8px 15px",borderRadius:"4px",fontWeight:"bold",cursor:"pointer"},children:"Add Skill"})]})]}):(0,lm.jsxs)("button",{onClick:()=>C(!0),style:{background:"transparent",border:"1px dashed #444",color:"var(--primary)",padding:"15px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,lm.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add New Skill"]}),(0,lm.jsxs)("div",{style:{background:"#252525",padding:"15px 20px",borderRadius:"8px",marginTop:"10px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"var(--primary)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),(0,lm.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),(0,lm.jsxs)("span",{style:{color:"#aaa",fontSize:"14px"},children:[(0,lm.jsx)("b",{style:{color:"var(--primary)"},children:"Tip:"})," The skills you add here will be visible to others looking for tutors. Be specific about what you can teach."]})]})]}):(0,lm.jsxs)("div",{style:{background:"#252525",padding:"30px",borderRadius:"8px",textAlign:"center"},children:[(0,lm.jsx)("div",{style:{fontSize:"50px",marginBottom:"20px"},children:"\ud83d\udcaa"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"No Skills Added Yet"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Add skills that you can teach to others and earn time credits."}),(0,lm.jsxs)("button",{style:{background:"var(--primary)",border:"none",color:"black",padding:"10px 20px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto",gap:"8px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,lm.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Add Your First Skill"]})]})]}),"lessons"===I&&(0,lm.jsxs)("div",{className:"fade-in",children:[(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginTop:0},children:"My Lessons"}),(0,lm.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,lm.jsx)("h4",{style:{color:"#ddd",marginTop:"20px",marginBottom:"15px"},children:"Scheduled Lessons"}),h&&h.length>0?(0,lm.jsx)("div",{children:h.map((e=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"15px 20px",borderRadius:"8px",marginBottom:"15px",borderLeft:"teacher"===e.role?"4px solid var(--primary)":"4px solid #9c27b0"},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsx)("span",{style:{color:"teacher"===e.role?"var(--primary)":"#9c27b0",fontWeight:600},children:e.skillName||"Unnamed Skill"}),(0,lm.jsx)("span",{style:{color:"#aaa",fontSize:"13px"},children:e.scheduledDate?ky(e.scheduledDate,"MMM dd, yyyy - HH:mm"):"Date not set"})]}),(0,lm.jsxs)("div",{style:{marginTop:"8px",color:"#ddd"},children:["teacher"===e.role?"Teaching: ":"Learning from: ","teacher"===e.role?e.studentName:e.teacherName]}),(0,lm.jsx)("div",{style:{marginTop:"10px",display:"inline-block",padding:"3px 10px",borderRadius:"20px",fontSize:"12px",background:"#ff9800",color:"#fff"},children:"confirmed"===e.status?"Confirmed":"Scheduled"}),(0,lm.jsx)("div",{style:{marginTop:"10px",display:"flex",gap:"10px"},children:(0,lm.jsx)("button",{onClick:()=>$(e.id,"teacher"===e.role?e.studentId:e.teacherId),disabled:q[e.id],style:{background:"transparent",border:"1px solid #444",color:"#ddd",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:q[e.id]?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"5px",opacity:q[e.id]?.7:1},children:q[e.id]?(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"},children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("path",{d:"M16 12a4 4 0 1 1-8 0"})]}),"Connecting..."]}):(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Message"]})})})]},e.id)))}):(0,lm.jsx)("div",{style:{padding:"15px 20px",background:"#252525",borderRadius:"8px",color:"#aaa",fontSize:"14px",textAlign:"center"},children:"You don't have any scheduled lessons."})]}),(0,lm.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,lm.jsx)("h4",{style:{color:"#ddd",marginTop:"20px",marginBottom:"15px"},children:"Active Lessons"}),f&&f.length>0?(0,lm.jsx)("div",{children:f.map((e=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"15px 20px",borderRadius:"8px",marginBottom:"15px",borderLeft:"teacher"===e.role?"4px solid var(--primary)":"4px solid #9c27b0"},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsx)("span",{style:{color:"teacher"===e.role?"var(--primary)":"#9c27b0",fontWeight:600},children:e.skillName||"Unnamed Skill"}),(0,lm.jsxs)("span",{style:{color:"#aaa",fontSize:"13px"},children:["Started: ",e.startedAt?ky(e.startedAt,"MMM dd, yyyy - HH:mm"):"Just now"]})]}),(0,lm.jsxs)("div",{style:{marginTop:"8px",color:"#ddd"},children:["teacher"===e.role?"Teaching: ":"Learning from: ","teacher"===e.role?e.studentName:e.teacherName]}),(0,lm.jsx)("div",{style:{marginTop:"10px",display:"inline-block",padding:"3px 10px",borderRadius:"20px",fontSize:"12px",background:"#4caf50",color:"#fff"},children:"In Progress"}),(0,lm.jsx)("div",{style:{marginTop:"10px",display:"flex",gap:"10px"},children:(0,lm.jsx)("button",{onClick:()=>$(e.id,"teacher"===e.role?e.studentId:e.teacherId),disabled:q[e.id],style:{background:"transparent",border:"1px solid #444",color:"#ddd",padding:"5px 10px",borderRadius:"4px",fontSize:"12px",cursor:q[e.id]?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"5px",opacity:q[e.id]?.7:1},children:q[e.id]?(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"},children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("path",{d:"M16 12a4 4 0 1 1-8 0"})]}),"Connecting..."]}):(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Message"]})})})]},e.id)))}):(0,lm.jsx)("div",{style:{padding:"15px 20px",background:"#252525",borderRadius:"8px",color:"#aaa",fontSize:"14px",textAlign:"center"},children:"You don't have any active lessons."})]}),(0,lm.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,lm.jsx)("h4",{style:{color:"#ddd",marginTop:"20px",marginBottom:"15px"},children:"Completed Lessons"}),p&&p.length>0?(0,lm.jsx)("div",{children:p.map((e=>(0,lm.jsxs)("div",{style:{background:"#252525",padding:"15px 20px",borderRadius:"8px",marginBottom:"15px",borderLeft:"teacher"===e.role?"4px solid var(--primary)":"4px solid #9c27b0",opacity:"cancelled"===e.status?.7:1},children:[(0,lm.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsx)("span",{style:{color:"teacher"===e.role?"var(--primary)":"#9c27b0",fontWeight:600},children:e.skillName||"Unnamed Skill"}),(0,lm.jsx)("span",{style:{color:"#aaa",fontSize:"13px"},children:e.completedAt?ky(e.completedAt,"MMM dd, yyyy"):"Date not available"})]}),(0,lm.jsxs)("div",{style:{marginTop:"8px",color:"#ddd"},children:["teacher"===e.role?"Taught: ":"Learned from: ","teacher"===e.role?e.studentName:e.teacherName]}),(0,lm.jsx)("div",{style:{marginTop:"10px",display:"inline-block",padding:"3px 10px",borderRadius:"20px",fontSize:"12px",background:"cancelled"===e.status?"#f44336":"#4caf50",color:"#fff"},children:"cancelled"===e.status?"Cancelled":"Completed"}),e.rating&&(0,lm.jsxs)("div",{style:{marginTop:"10px",display:"flex",alignItems:"center",gap:"5px",color:"#ffc107"},children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),(0,lm.jsxs)("span",{children:[e.rating,"/5"]})]})]},e.id)))}):(0,lm.jsx)("div",{style:{padding:"15px 20px",background:"#252525",borderRadius:"8px",color:"#aaa",fontSize:"14px",textAlign:"center"},children:"You haven't completed any lessons yet."}),(0,lm.jsx)("div",{style:{marginTop:"30px",textAlign:"center"},children:(0,lm.jsxs)("button",{onClick:()=>n("marketplace"),style:{background:"#9c27b0",color:"white",border:"none",padding:"8px 15px",borderRadius:"4px",cursor:"pointer",fontWeight:"bold",display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,lm.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,lm.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),"Browse Skills to Learn"]})})]})]})]})]}):(0,lm.jsxs)("div",{className:"card fade-in",style:{maxWidth:480,margin:"2rem auto",textAlign:"center",padding:"2rem"},children:[(0,lm.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\ud83d\udc64"}),(0,lm.jsx)("h2",{style:{color:"var(--primary)",marginBottom:"20px"},children:"No Profile Found"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"30px"},children:"You need to create a profile to access your personal dashboard and start sharing and learning skills."}),(0,lm.jsxs)("button",{onClick:()=>n("login"),style:{width:"100%",background:"var(--primary)",color:"black",padding:"12px",fontSize:"16px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"8.5",cy:"7",r:"4"}),(0,lm.jsx)("line",{x1:"20",y1:"8",x2:"20",y2:"14"}),(0,lm.jsx)("line",{x1:"23",y1:"11",x2:"17",y2:"11"})]}),"Create Your Profile"]})]})};const nx=function(e){let{setPage:t}=e;const{signup:n,login:r,error:s}=um(),[o,a]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(""),[m,y]=(0,i.useState)(""),[v,x]=(0,i.useState)(!1),[w,b]=(0,i.useState)(!1),[k,_]=(0,i.useState)(!1);return(0,lm.jsxs)("div",{className:"card fade-in",style:{maxWidth:400,margin:"2rem auto"},children:[(0,lm.jsx)("h2",{style:{textAlign:"center"},children:h?"Create Account":"Login"}),h?(0,lm.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),l!==m)return d("Passwords do not match");if(l.length<6)return d("Password must be at least 6 characters");x(!0);try{await n(o,l,f),t("home")}catch(vx){d("Failed to create account: "+vx.message),x(!1)}},autoComplete:"off",children:[(0,lm.jsxs)("div",{style:{marginBottom:"1.3rem"},children:[(0,lm.jsx)("label",{style:{fontWeight:500},children:"Full Name:"}),(0,lm.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"}})]}),(0,lm.jsxs)("div",{style:{marginBottom:"1.3rem"},children:[(0,lm.jsx)("label",{style:{fontWeight:500},children:"Email:"}),(0,lm.jsx)("input",{type:"email",value:o,onChange:e=>a(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"}})]}),(0,lm.jsxs)("div",{style:{marginBottom:"1.3rem"},children:[(0,lm.jsx)("label",{style:{fontWeight:500},children:"Password:"}),(0,lm.jsxs)("div",{style:{position:"relative"},children:[(0,lm.jsx)("input",{type:w?"text":"password",value:l,onChange:e=>c(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",paddingRight:"40px"}}),(0,lm.jsx)("button",{type:"button",onClick:()=>b(!w),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"#aaa",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:w?(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,lm.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(0,lm.jsxs)("div",{style:{marginBottom:"1.3rem"},children:[(0,lm.jsx)("label",{style:{fontWeight:500},children:"Confirm Password:"}),(0,lm.jsxs)("div",{style:{position:"relative"},children:[(0,lm.jsx)("input",{type:k?"text":"password",value:m,onChange:e=>y(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",paddingRight:"40px"}}),(0,lm.jsx)("button",{type:"button",onClick:()=>_(!k),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"#aaa",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:k?(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,lm.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(u||s)&&(0,lm.jsx)("div",{style:{color:"#e53935",marginBottom:10},children:u||s}),(0,lm.jsx)("button",{type:"submit",disabled:v,style:{width:"100%",fontWeight:700,fontSize:18,background:v?"#555":"var(--primary)",cursor:v?"not-allowed":"pointer",padding:"12px",borderRadius:"8px",border:"none",color:"black"},children:v?"Creating Account...":"Sign Up"})]}):(0,lm.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(""),x(!0);try{await r(o,l),t("home")}catch(vx){d("Failed to log in: "+vx.message)}x(!1)},autoComplete:"off",children:[(0,lm.jsxs)("div",{style:{marginBottom:"1.3rem"},children:[(0,lm.jsx)("label",{style:{fontWeight:500},children:"Email:"}),(0,lm.jsx)("input",{type:"email",value:o,onChange:e=>a(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff"}})]}),(0,lm.jsxs)("div",{style:{marginBottom:"1.3rem"},children:[(0,lm.jsx)("label",{style:{fontWeight:500},children:"Password:"}),(0,lm.jsxs)("div",{style:{position:"relative"},children:[(0,lm.jsx)("input",{type:w?"text":"password",value:l,onChange:e=>c(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",paddingRight:"40px"}}),(0,lm.jsx)("button",{type:"button",onClick:()=>b(!w),style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"#aaa",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:w?(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,lm.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}):(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"3"})]})})]})]}),(u||s)&&(0,lm.jsx)("div",{style:{color:"#e53935",marginBottom:10},children:u||s}),(0,lm.jsx)("button",{type:"submit",disabled:v,style:{width:"100%",fontWeight:700,fontSize:18,background:v?"#555":"var(--primary)",cursor:v?"not-allowed":"pointer",padding:"12px",borderRadius:"8px",border:"none",color:"black"},children:v?"Logging in...":"Login"})]}),(0,lm.jsx)("div",{style:{marginTop:"20px",textAlign:"center"},children:(0,lm.jsx)("button",{onClick:()=>{p(!h),d("")},style:{background:"transparent",border:"none",color:"var(--primary)",cursor:"pointer",textDecoration:"underline"},children:h?"Already have an account? Login":"Need an account? Sign Up"})}),(0,lm.jsx)("button",{onClick:()=>t("landing"),style:{width:"100%",marginTop:20,background:"#333",border:"none",color:"#ddd",padding:"10px",borderRadius:"8px",cursor:"pointer"},children:"Back to Home"})]})};const rx=function(e){var t,n,r,s;let{setPage:o,pageParams:a}=e;const{currentUser:l}=um(),{chats:c,activeChat:u,setActiveChat:d,messages:h,sendMessage:p,markChatAsRead:f,unreadCounts:g,typingUsers:m,onlineUsers:y,sendTypingIndicator:v,sendStopTypingIndicator:x,createChat:w,loading:b}=Yv(),{completeLesson:k}=fm(),[_,S]=(0,i.useState)(""),[E,T]=(0,i.useState)(!1),[C,I]=(0,i.useState)(""),[j,R]=(0,i.useState)(!1),[N,A]=(0,i.useState)(!1),L=(0,i.useRef)(null),P=(0,i.useRef)(null);(0,i.useEffect)((()=>{P.current&&P.current.scrollIntoView({behavior:"smooth"})}),[h]);const D=c.find((e=>e.id===u));(0,i.useEffect)((()=>{if(!u)return;const e=ld(Bu(Qc(om,"messages"),Vu("chatId","==",u),Hu("createdAt","asc")),(e=>{const t=e.docs.map((e=>{var t;return{id:e.id,...e.data(),createdAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}}));t.length>0&&l&&f(u),setTimeout((()=>{P.current&&P.current.scrollIntoView({behavior:"smooth"})}),100)}),(e=>{console.error("Error getting real-time messages:",e)}));return()=>e()}),[u,l,f]);const O=(0,i.useCallback)((async e=>{if(e.preventDefault(),""===_.trim()||!u||!l)return;T(!0),I("");const t=_.trim();S("");try{N&&(x(u),A(!1),L.current&&(clearTimeout(L.current),L.current=null)),await p(u,t),P.current&&P.current.scrollIntoView({behavior:"smooth"})}catch(vx){I("Failed to send message: "+vx.message),console.error("Error sending message:",vx)}finally{T(!1)}}),[u,l,N,_,p,x]),M=e=>{d(e),f(e)};(0,i.useEffect)((()=>()=>{L.current&&clearTimeout(L.current)}),[]),(0,i.useEffect)((()=>{l||b||o("login")}),[l,b,o]);const U=D&&Object.keys(m).length>0;return(0,i.useEffect)((()=>{if(!a||!l)return;(async()=>{try{if(a.chatId)return void M(a.chatId);if(a.recipientId){const e=c.find((e=>e.participants.includes(a.recipientId)&&e.participants.includes(l.uid)));if(e)return void M(e.id);if(0===c.length||!e){const e=await w(a.recipientId);M(e)}}}catch(C){console.error("Error initializing chat:",C),I("Failed to initialize chat. Please try again.")}})()}),[a,c,l,w]),(0,i.useEffect)((()=>{P.current&&setTimeout((()=>{P.current.scrollIntoView({behavior:"smooth"})}),100)}),[h,u]),(0,lm.jsxs)("div",{className:"fade-in",style:{maxWidth:1200,margin:"1rem auto"},children:[(0,lm.jsxs)("div",{style:{display:"flex",height:"calc(100vh - 120px)",background:"#1e1e1e",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},children:[(0,lm.jsxs)("div",{style:{width:"300px",borderRight:"1px solid #333",display:"flex",flexDirection:"column"},children:[(0,lm.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #333"},children:[(0,lm.jsx)("h2",{style:{color:"var(--primary)",margin:"0 0 5px 0",fontSize:"1.3rem"},children:"Messages"}),(0,lm.jsx)("p",{style:{color:"#aaa",margin:0,fontSize:"14px"},children:"Coordinate lessons with your teachers and students"})]}),b?(0,lm.jsxs)("div",{style:{padding:"30px",textAlign:"center"},children:[(0,lm.jsx)("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"\u231b"}),(0,lm.jsx)("p",{style:{color:"#aaa"},children:"Loading conversations..."})]}):0===c.length?(0,lm.jsxs)("div",{style:{padding:"30px",textAlign:"center"},children:[(0,lm.jsx)("div",{style:{fontSize:"50px",marginBottom:"20px"},children:"\ud83d\udcac"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"No Messages Yet"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Your message threads with tutors and students will appear here."}),(0,lm.jsxs)("button",{onClick:()=>o("marketplace"),style:{background:"var(--primary)",color:"black",border:"none",padding:"10px 15px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),(0,lm.jsx)("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),"Browse Requests"]})]}):(0,lm.jsx)("div",{style:{flex:1,overflowY:"auto"},children:c.map((e=>{var t,n,r,i;return(0,lm.jsxs)("div",{onClick:()=>M(e.id),style:{padding:"15px 20px",borderBottom:"1px solid #333",cursor:"pointer",background:u===e.id?"#252525":e.isUnread?"rgba(255, 143, 0, 0.1)":"transparent",transition:"background 0.2s ease",position:"relative"},children:[(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[(0,lm.jsxs)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#333",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"500",position:"relative"},children:[(null===(t=e.otherParticipant)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.charAt(0))||"?",e.isOnline&&(0,lm.jsx)("div",{style:{position:"absolute",bottom:"0",right:"0",width:"12px",height:"12px",borderRadius:"50%",background:"#4CAF50",border:"2px solid #1e1e1e"}})]}),(0,lm.jsxs)("div",{style:{flex:1,overflow:"hidden"},children:[(0,lm.jsxs)("div",{style:{fontWeight:e.isUnread?"700":"500",color:e.isUnread?"var(--primary)":"#fff",marginBottom:"3px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[(null===(r=e.otherParticipant)||void 0===r?void 0:r.name)||"Unknown User",e.isUnread&&g[e.id]>0&&(0,lm.jsx)("span",{style:{marginLeft:"8px",background:"var(--primary)",color:"black",borderRadius:"50%",width:"20px",height:"20px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold"},children:g[e.id]})]}),(0,lm.jsx)("div",{style:{color:e.isUnread?"#ddd":"#aaa",fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.isUnread?"500":"normal"},children:e.lastMessage||(null===(i=e.request)||void 0===i?void 0:i.skillName)||"Skill Lesson"})]})]}),(0,lm.jsx)("div",{style:{position:"absolute",top:"50%",right:"20px",transform:"translateY(-50%)",color:e.isUnread?"#ddd":"#aaa",fontSize:"12px",fontWeight:e.isUnread?"500":"normal"},children:e.lastMessageTime?new Date(e.lastMessageTime.toDate()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]},e.id)}))})]}),D?(0,lm.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:[(0,lm.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center"},children:[(0,lm.jsxs)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#333",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontWeight:"500",position:"relative"},children:[(null===(t=D.otherParticipant)||void 0===t||null===(n=t.name)||void 0===n?void 0:n.charAt(0))||"?",D.isOnline&&(0,lm.jsx)("div",{style:{position:"absolute",bottom:"0",right:"0",width:"12px",height:"12px",borderRadius:"50%",background:"#4CAF50",border:"2px solid #1e1e1e"}})]}),(0,lm.jsxs)("div",{children:[(0,lm.jsxs)("div",{style:{fontWeight:"500",color:"#fff",marginBottom:"3px",display:"flex",alignItems:"center"},children:[(null===(r=D.otherParticipant)||void 0===r?void 0:r.name)||"Unknown User",D.isOnline&&(0,lm.jsx)("span",{style:{color:"#4CAF50",fontSize:"12px",marginLeft:"8px"},children:"Online"}),(0,lm.jsx)("button",{onClick:()=>{var e,t;(t=null===(e=D.otherParticipant)||void 0===e?void 0:e.id)&&o("viewProfile",{userId:t})},style:{background:"none",color:"#aaa",border:"none",padding:"0 10px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"8px",marginLeft:"10px"},children:"View Profile"})]}),(0,lm.jsx)("div",{style:{color:"#aaa",fontSize:"13px"},children:(null===(s=D.request)||void 0===s?void 0:s.skillName)||"Skill Lesson"})]})]}),D.request&&(0,lm.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,lm.jsxs)("button",{onClick:()=>o("request"),style:{background:"#333",color:"#ddd",border:"none",padding:"10px 15px",borderRadius:"8px",fontWeight:"bold",cursor:"pointer",flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,lm.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,lm.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,lm.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),"Reschedule"]}),(0,lm.jsx)("button",{onClick:()=>(async e=>{if(e&&l){R(!0),I("");try{await k(e),alert("Lesson marked as complete! 1 time credit has been awarded to the tutor.")}catch(vx){I("Failed to complete lesson: "+vx.message),console.error("Error completing lesson:",vx)}finally{R(!1)}}})(D.request.id),disabled:j,style:{background:j?"#555":"var(--primary)",color:"black",border:"none",padding:"10px 15px",borderRadius:"8px",fontWeight:"bold",cursor:j?"not-allowed":"pointer",flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:j?"Processing...":(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,lm.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"Mark Complete"]})})]})]}),(0,lm.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"20px"},children:0===h.length?(0,lm.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px"},children:[(0,lm.jsx)("div",{style:{fontSize:"50px",marginBottom:"20px"},children:"\ud83d\udcac"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"Start the Conversation"}),(0,lm.jsx)("p",{style:{color:"#aaa",maxWidth:"400px",margin:"0 auto"},children:"Send a message to coordinate your skill lesson details."})]}):(0,lm.jsxs)(lm.Fragment,{children:[h.map((e=>(0,lm.jsx)("div",{style:{marginBottom:"20px",display:"flex",flexDirection:"system"===e.senderId?"row":e.senderId===(null===l||void 0===l?void 0:l.uid)?"row-reverse":"row"},children:"system"===e.senderId?(0,lm.jsxs)("div",{style:{maxWidth:"90%",margin:"0 auto",background:"#333",color:"#aaa",padding:"8px 16px",borderRadius:"8px",fontSize:"13px",textAlign:"center"},children:[(0,lm.jsx)("div",{children:e.text}),(0,lm.jsx)("div",{style:{fontSize:"10px",marginTop:"4px"},children:e.createdAt?new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]}):(0,lm.jsxs)("div",{style:{maxWidth:"70%",background:e.senderId===(null===l||void 0===l?void 0:l.uid)?"var(--primary)":"#252525",color:e.senderId===(null===l||void 0===l?void 0:l.uid)?"black":"#fff",padding:"12px 16px",borderRadius:"18px",borderBottomLeftRadius:e.senderId===(null===l||void 0===l?void 0:l.uid)?"18px":"4px",borderBottomRightRadius:e.senderId===(null===l||void 0===l?void 0:l.uid)?"4px":"18px",position:"relative"},children:[(0,lm.jsx)("div",{style:{marginBottom:"5px"},children:e.text}),(0,lm.jsxs)("div",{style:{fontSize:"11px",opacity:.7,textAlign:e.senderId===(null===l||void 0===l?void 0:l.uid)?"right":"left",marginTop:"2px",display:"flex",alignItems:"center",justifyContent:e.senderId===(null===l||void 0===l?void 0:l.uid)?"flex-end":"flex-start",gap:"4px"},children:[e.createdAt?new Date(e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"",e.senderId===(null===l||void 0===l?void 0:l.uid)&&(0,lm.jsx)("span",{title:e.read?"Read":"Delivered",children:e.read?(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M18 6L9.7 16.4l-4.6-5"})}):(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("polyline",{points:"9 11 12 14 22 4"}),(0,lm.jsx)("path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"})]})})]})]})},e.id))),U&&(0,lm.jsx)("div",{style:{display:"flex",marginBottom:"20px"},children:(0,lm.jsxs)("div",{style:{background:"#252525",color:"#fff",padding:"8px 16px",borderRadius:"18px",borderBottomLeftRadius:"4px",fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,lm.jsx)("span",{className:"typing-dot",style:{width:"6px",height:"6px",borderRadius:"50%",background:"#aaa",marginRight:"3px",animation:"typingAnimation 1.5s infinite ease-in-out"}}),(0,lm.jsx)("span",{className:"typing-dot",style:{width:"6px",height:"6px",borderRadius:"50%",background:"#aaa",marginRight:"3px",animation:"typingAnimation 1.5s infinite ease-in-out 0.3s"}}),(0,lm.jsx)("span",{className:"typing-dot",style:{width:"6px",height:"6px",borderRadius:"50%",background:"#aaa",animation:"typingAnimation 1.5s infinite ease-in-out 0.6s"}})]}),(0,lm.jsx)("span",{style:{color:"#aaa",fontSize:"12px"},children:"typing..."})]})}),(0,lm.jsx)("div",{ref:P})]})}),(0,lm.jsxs)("div",{style:{borderTop:"1px solid #333",padding:"15px 20px",background:"#1e1e1e"},children:[C&&(0,lm.jsx)("div",{style:{background:"#ff5252",color:"white",padding:"10px 15px",borderRadius:"8px",marginBottom:"10px",fontSize:"14px"},children:C}),(0,lm.jsxs)("form",{onSubmit:O,style:{display:"flex",gap:"10px"},children:[(0,lm.jsx)("input",{type:"text",value:_,onChange:e=>{S(e.target.value),!N&&u&&(A(!0),v(u)),L.current&&clearTimeout(L.current),L.current=setTimeout((()=>{N&&u&&(x(u),A(!1))}),2e3)},placeholder:"Type your message...",disabled:E,style:{flex:1,padding:"12px 15px",borderRadius:"8px",background:"#252525",border:"1px solid #333",color:"#fff",fontSize:"15px",cursor:E?"not-allowed":"text"}}),(0,lm.jsx)("button",{type:"submit",disabled:E||""===_.trim(),style:{background:E||""===_.trim()?"#555":"var(--primary)",color:"black",border:"none",borderRadius:"8px",width:"50px",display:"flex",alignItems:"center",justifyContent:"center",cursor:E||""===_.trim()?"not-allowed":"pointer"},children:E?(0,lm.jsx)("span",{style:{fontSize:"18px"},children:"\u231b"}):(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),(0,lm.jsx)("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]}):(0,lm.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flex:1},children:(0,lm.jsxs)("div",{style:{textAlign:"center",maxWidth:"400px",padding:"20px"},children:[(0,lm.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\ud83d\udcac"}),(0,lm.jsx)("h3",{style:{color:"var(--primary)",marginBottom:"10px"},children:"Select a Conversation"}),(0,lm.jsx)("p",{style:{color:"#aaa",marginBottom:"20px"},children:"Choose a conversation from the sidebar to start messaging."})]})})]}),(0,lm.jsx)("style",{jsx:!0,children:"\n        @keyframes typingAnimation {\n          0% { opacity: 0.3; transform: translateY(0); }\n          50% { opacity: 1; transform: translateY(-3px); }\n          100% { opacity: 0.3; transform: translateY(0); }\n        }\n      "})]})};const ix=function(e){let{userId:t,setPage:n,onRequestLesson:r}=e;const{getUserProfile:s,currentUser:o}=um(),{getUserRatings:a}=fm(),{createChat:l}=Yv(),[c,u]=(0,i.useState)(null),[d,h]=(0,i.useState)(null),[p,f]=(0,i.useState)(!0),[g,m]=(0,i.useState)("overview"),[y,v]=(0,i.useState)(!1),[x,w]=(0,i.useState)(!1);(0,i.useEffect)((()=>{!async function(){if(t){f(!0);try{const e=await s(t);u(e)}catch(e){console.error("Error fetching user profile:",e)}finally{f(!1)}}}()}),[t,s]),(0,i.useEffect)((()=>{!async function(){if(t&&"ratings"===g){v(!0);try{const e=await a(t);h(e)}catch(e){console.error("Error fetching user ratings:",e)}finally{v(!1)}}}()}),[t,g,a]);const b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r&&c&&r({id:t,name:c.name||c.displayName||t},e)};return p?(0,lm.jsxs)("div",{className:"loading-container",children:[(0,lm.jsx)("div",{className:"loading-spinner"}),(0,lm.jsx)("p",{children:"Loading profile..."})]}):c?(0,lm.jsxs)("div",{className:"user-profile-container",children:[(0,lm.jsxs)("button",{className:"back-button",onClick:()=>n("marketplace"),children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),(0,lm.jsx)("polyline",{points:"12 19 5 12 12 5"})]}),"Back to Marketplace"]}),(0,lm.jsxs)("div",{className:"profile-header",children:[(0,lm.jsx)("div",{className:"profile-avatar",children:c.name||c.displayName?(c.name||c.displayName).charAt(0).toUpperCase():"?"}),(0,lm.jsxs)("div",{className:"profile-info",children:[(0,lm.jsx)("h1",{className:"profile-name",children:c.name||c.displayName||t}),c.averageRating>0&&(0,lm.jsxs)("div",{className:"profile-rating",children:[(0,lm.jsx)("div",{className:"rating-stars",children:[1,2,3,4,5].map((e=>(0,lm.jsx)("span",{className:"star "+(e<=Math.round(c.averageRating)?"filled":""),children:"\u2605"},e)))}),(0,lm.jsxs)("span",{className:"rating-text",children:[c.averageRating.toFixed(1)," (",c.totalRatings," ",1===c.totalRatings?"rating":"ratings",")"]})]}),(0,lm.jsx)("div",{className:"profile-meta",children:(0,lm.jsxs)("div",{className:"meta-item",children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),(0,lm.jsxs)("span",{children:["Member since ",new Date(c.createdAt).toLocaleDateString()]})]})})]}),(0,lm.jsxs)("div",{className:"profile-actions",children:[(0,lm.jsx)("button",{className:"request-lesson-button",onClick:()=>b(),children:"Request Lesson"}),(0,lm.jsx)("button",{className:"chat-button",onClick:async()=>{if(o)if(t!==o.uid){w(!0);try{const e=await l(t);n("chat",{chatId:e})}catch(e){console.error("Error starting chat:",e),alert("Failed to start chat. Please try again.")}finally{w(!1)}}else alert("You cannot start a chat with yourself.");else n("login")},disabled:x||!o,style:{background:x?"#2d3748":"#4a5568",color:"white",border:"none",padding:"10px 15px",borderRadius:"8px",cursor:x||!o?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px",marginLeft:"10px",opacity:x||!o?.7:1,transition:"all 0.2s ease"},children:x?(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"spin 1s linear infinite"},children:[(0,lm.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,lm.jsx)("path",{d:"M16 12a4 4 0 1 1-8 0"})]}),"Connecting..."]}):(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),"Chat"]})})]})]}),c.bio&&(0,lm.jsx)("div",{className:"profile-bio",children:(0,lm.jsx)("p",{children:c.bio})}),(0,lm.jsxs)("div",{className:"profile-tabs",children:[(0,lm.jsx)("div",{className:"tab "+("overview"===g?"active":""),onClick:()=>m("overview"),children:"Skills"}),(0,lm.jsx)("div",{className:"tab "+("proofs"===g?"active":""),onClick:()=>m("proofs"),children:"Skill Proofs"}),(0,lm.jsx)("div",{className:"tab "+("ratings"===g?"active":""),onClick:()=>m("ratings"),children:"Ratings"})]}),(0,lm.jsxs)("div",{className:"tab-content",children:["overview"===g&&(0,lm.jsx)("div",{className:"skills-container",children:c.skills&&0!==c.skills.length?(0,lm.jsx)("div",{className:"skills-grid",children:c.skills.map((e=>(0,lm.jsxs)("div",{className:"skill-card",children:[(0,lm.jsxs)("div",{className:"skill-header",children:[(0,lm.jsx)("h3",{className:"skill-name",children:e.name}),(0,lm.jsx)("div",{className:"skill-level",children:e.level})]}),(0,lm.jsx)("p",{className:"skill-description",children:e.description}),(0,lm.jsx)("div",{className:"skill-actions",children:(0,lm.jsx)("button",{className:"request-button",onClick:()=>b(e.name),children:"Request Lesson"})})]},e.id)))}):(0,lm.jsx)("div",{className:"empty-state",children:(0,lm.jsx)("p",{children:"This user hasn't added any skills yet."})})}),"proofs"===g&&(0,lm.jsx)("div",{className:"proofs-container",children:c.skillProofs&&0!==c.skillProofs.length?(0,lm.jsx)(ex,{proofs:c.skillProofs}):(0,lm.jsx)("div",{className:"empty-state",children:(0,lm.jsx)("p",{children:"This user hasn't uploaded any skill proofs yet."})})}),"ratings"===g&&(0,lm.jsx)("div",{className:"ratings-container",children:(0,lm.jsx)(Zv,{ratings:d,isLoading:y})})]}),(0,lm.jsx)("style",{jsx:"true",children:"\n        .user-profile-container {\n          max-width: 900px;\n          margin: 0 auto;\n          padding: 20px;\n        }\n\n        .loading-container,\n        .error-container {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          min-height: 300px;\n          text-align: center;\n        }\n\n        .loading-spinner {\n          border: 4px solid #333;\n          border-radius: 50%;\n          border-top: 4px solid var(--primary);\n          width: 40px;\n          height: 40px;\n          animation: spin 1s linear infinite;\n          margin-bottom: 20px;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        .back-button {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          background: none;\n          border: none;\n          color: var(--primary);\n          font-size: 16px;\n          cursor: pointer;\n          padding: 0;\n          margin-bottom: 20px;\n        }\n\n        .back-button:hover {\n          text-decoration: underline;\n        }\n\n        .profile-header {\n          display: flex;\n          align-items: center;\n          gap: 20px;\n          margin-bottom: 30px;\n        }\n\n        .profile-avatar {\n          width: 80px;\n          height: 80px;\n          border-radius: 50%;\n          background: var(--primary);\n          color: #000;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 32px;\n          font-weight: bold;\n        }\n\n        .profile-info {\n          flex: 1;\n        }\n\n        .profile-name {\n          margin: 0 0 5px 0;\n          font-size: 28px;\n          color: #fff;\n        }\n\n        .profile-rating {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n          margin-bottom: 10px;\n        }\n\n        .rating-stars {\n          display: flex;\n        }\n\n        .star {\n          font-size: 18px;\n          color: #555;\n          margin-right: 2px;\n        }\n\n        .star.filled {\n          color: var(--primary);\n        }\n\n        .rating-text {\n          color: #ccc;\n          font-size: 14px;\n        }\n\n        .profile-meta {\n          display: flex;\n          gap: 15px;\n        }\n\n        .meta-item {\n          display: flex;\n          align-items: center;\n          gap: 5px;\n          color: #999;\n          font-size: 14px;\n        }\n\n        .profile-actions {\n          display: flex;\n          gap: 10px;\n        }\n\n        .request-lesson-button {\n          background: var(--primary);\n          color: #000;\n          border: none;\n          padding: 10px 20px;\n          border-radius: 4px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: background 0.2s, transform 0.1s;\n        }\n\n        .request-lesson-button:hover {\n          background: #ffb74d;\n        }\n\n        .request-lesson-button:active {\n          transform: translateY(1px);\n        }\n\n        .profile-bio {\n          background: #252525;\n          border-radius: 8px;\n          padding: 20px;\n          margin-bottom: 30px;\n        }\n\n        .profile-bio p {\n          margin: 0;\n          line-height: 1.6;\n          color: #eee;\n        }\n\n        .profile-tabs {\n          display: flex;\n          border-bottom: 1px solid #333;\n          margin-bottom: 20px;\n        }\n\n        .tab {\n          padding: 12px 20px;\n          cursor: pointer;\n          color: #ccc;\n          transition: color 0.2s;\n          position: relative;\n        }\n\n        .tab:hover {\n          color: #fff;\n        }\n\n        .tab.active {\n          color: var(--primary);\n          font-weight: 500;\n        }\n\n        .tab.active::after {\n          content: '';\n          position: absolute;\n          bottom: -1px;\n          left: 0;\n          right: 0;\n          height: 2px;\n          background: var(--primary);\n        }\n\n        .empty-state {\n          display: flex;\n          justify-content: center;\n          padding: 40px 0;\n          color: #999;\n        }\n\n        .skills-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n          gap: 20px;\n        }\n\n        .skill-card {\n          background: #252525;\n          border-radius: 8px;\n          padding: 20px;\n          display: flex;\n          flex-direction: column;\n        }\n\n        .skill-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 10px;\n        }\n\n        .skill-name {\n          margin: 0;\n          font-size: 18px;\n          color: #fff;\n        }\n\n        .skill-level {\n          background: #333;\n          color: var(--primary);\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          font-weight: 500;\n        }\n\n        .skill-description {\n          color: #ccc;\n          flex: 1;\n          margin: 0 0 15px 0;\n          line-height: 1.5;\n        }\n\n        .skill-actions {\n          display: flex;\n          justify-content: flex-end;\n        }\n\n        .request-button {\n          background: #333;\n          color: #fff;\n          border: none;\n          padding: 8px 12px;\n          border-radius: 4px;\n          cursor: pointer;\n          transition: background 0.2s;\n        }\n\n        .request-button:hover {\n          background: var(--primary);\n          color: #000;\n        }\n      "})]}):(0,lm.jsxs)("div",{className:"error-container",children:[(0,lm.jsx)("h2",{children:"User Not Found"}),(0,lm.jsx)("p",{children:"The requested user profile could not be found."}),(0,lm.jsx)("button",{className:"primary-button",onClick:()=>n("marketplace"),children:"Back to Marketplace"})]})},sx=()=>{const{currentUser:e}=um(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)(5),[u,d]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(!e)return;(async()=>{try{const t=Bu(Qc(om,"lessons"),Vu("studentId","==",e.uid),Vu("status","==","completed"),Vu("studentRated","==",!1)),r=await id(t),i=[];r.forEach((e=>{i.push({id:e.id,...e.data()})})),i.length>0&&(n(i),a(i[0]),s(!0))}catch(t){console.error("Error fetching lessons needing rating:",t)}})()}),[e]);const f=()=>{const e=t.filter((e=>e.id!==o.id));e.length>0?(a(e[0]),n(e),c(5),d("")):(s(!1),a(null),n([]))};return r&&o?(0,lm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,animation:"fadeIn 0.3s"},children:(0,lm.jsxs)("div",{style:{backgroundColor:"#1e1e1e",borderRadius:"12px",boxShadow:"0 5px 30px rgba(0, 0, 0, 0.5)",width:"90%",maxWidth:"500px",animation:"scaleIn 0.3s",overflow:"hidden"},children:[(0,lm.jsxs)("div",{style:{padding:"20px",borderBottom:"1px solid #333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,lm.jsx)("h2",{style:{margin:0,color:"#fff",fontSize:"1.5rem"},children:"Rate Your Lesson"}),(0,lm.jsx)("button",{onClick:f,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#aaa"},children:"\xd7"})]}),(0,lm.jsxs)("div",{style:{padding:"20px"},children:[(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px",background:"#252525",borderRadius:"8px",padding:"15px"},children:[(0,lm.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",marginRight:"15px",flexShrink:0},children:(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),(0,lm.jsx)("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),(0,lm.jsxs)("div",{children:[(0,lm.jsx)("div",{style:{fontWeight:"bold",color:"#fff",marginBottom:"5px"},children:"Lesson Completed"}),(0,lm.jsxs)("div",{style:{color:"#aaa",fontSize:"14px"},children:[o.skillName," with ",o.teacherName]})]})]}),(0,lm.jsx)("p",{style:{color:"#ddd",marginBottom:"20px"},children:"How would you rate your experience with this tutor?"}),(0,lm.jsx)("div",{style:{display:"flex",justifyContent:"center",margin:"20px 0",gap:"10px"},children:[1,2,3,4,5].map((e=>(0,lm.jsx)("span",{onClick:()=>c(e),style:{fontSize:"32px",color:e<=l?"var(--primary)":"#555",cursor:"pointer",transition:"color 0.2s"},children:"\u2605"},e)))}),(0,lm.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,lm.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"#ccc"},children:"Share your feedback (optional):"}),(0,lm.jsx)("textarea",{value:u,onChange:e=>d(e.target.value),placeholder:"What did you like about this lesson? What could be improved?",style:{width:"100%",padding:"12px",borderRadius:"8px",background:"#252525",border:"1px solid #444",color:"#fff",resize:"vertical",minHeight:"100px"}})]})]}),(0,lm.jsxs)("div",{style:{padding:"15px 20px",display:"flex",justifyContent:"space-between",borderTop:"1px solid #333"},children:[(0,lm.jsx)("button",{onClick:f,style:{background:"#333",color:"#ddd",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer"},disabled:h,children:"Skip"}),(0,lm.jsx)("button",{onClick:async()=>{if(o){p(!0);try{const e=Yc(om,"lessons",o.id);await od(e,{studentRating:l,studentFeedback:u,studentRated:!0});const r=t.filter((e=>e.id!==o.id));r.length>0?(a(r[0]),n(r),c(5),d("")):(s(!1),a(null),n([]))}catch(e){console.error("Error submitting rating:",e)}finally{p(!1)}}},style:{background:"var(--primary)",color:"black",border:"none",padding:"10px 25px",borderRadius:"8px",cursor:"pointer",fontWeight:"bold",boxShadow:"0 2px 10px rgba(255, 143, 0, 0.3)"},disabled:h,children:h?"Submitting...":"Submit Rating"})]})]})}):null},ox=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),(0,lm.jsx)("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),(0,lm.jsx)("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),ax=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,lm.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),lx=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),(0,lm.jsx)("polyline",{points:"9 22 9 12 15 12 15 22"})]}),cx=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,lm.jsx)("polyline",{points:"14 2 14 8 20 8"}),(0,lm.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"12"}),(0,lm.jsx)("line",{x1:"9",y1:"15",x2:"15",y2:"15"})]}),ux=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("circle",{cx:"9",cy:"21",r:"1"}),(0,lm.jsx)("circle",{cx:"20",cy:"21",r:"1"}),(0,lm.jsx)("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),dx=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,lm.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,lm.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),hx=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,lm.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),px=()=>(0,lm.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,lm.jsx)("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),fx=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),(0,lm.jsx)("polyline",{points:"10 17 15 12 10 7"}),(0,lm.jsx)("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),gx=()=>(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,lm.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,lm.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]});function mx(){const{currentUser:e,logout:t,getUserProfile:n,isNewSignup:r,clearNewSignupFlag:s}=um(),[o,a]=(0,i.useState)("landing"),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(!0),[h,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(null),[m,y]=(0,i.useState)(null),[v,x]=(0,i.useState)(0),[w,b]=(0,i.useState)(!0),[k,_]=(0,i.useState)(!1),[S,E]=(0,i.useState)(0);(0,i.useEffect)((()=>{if(b(!0),e){a("home");(async()=>{try{const t=Yc(om,"users",e.uid),n=await nd(t);if(n.exists()){const e=n.data();x(e.timeCredits||2)}else x(2)}catch(t){console.error("Error fetching user profile:",t),x(2)}finally{b(!1)}})()}else a("landing"),b(!1)}),[e]),(0,i.useEffect)((()=>{if(r&&e){_(!0),E(1);const e=setTimeout((()=>{E(2);const e=setTimeout((()=>{E(3);const e=setTimeout((()=>{_(!1),s()}),1500);return()=>clearTimeout(e)}),1500);return()=>clearTimeout(e)}),1500);return()=>clearTimeout(e)}}),[r,e,s]);const T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a(e),g(t),c(!1),d(!1),"viewProfile"===e&&t&&t.userId?y(t.userId):y(null)};return(0,lm.jsxs)("div",{className:"app-container",children:[(0,lm.jsx)("div",{style:{position:"relative"},children:(0,lm.jsx)("button",{className:`sidebar-toggle ${!l&&"pulse"}`,onClick:()=>{c(!l),d(!1)},"aria-label":"Toggle navigation",style:{background:l?"#333":"var(--primary)",boxShadow:"0 0 15px rgba(255, 143, 0, 0.5)",animation:l?"none":"pulse 2s infinite"},children:l?(0,lm.jsx)(ax,{}):(0,lm.jsx)(ox,{})})}),(0,lm.jsx)("div",{className:"sidebar-overlay "+(l?"active":""),onClick:()=>c(!1)}),(0,lm.jsxs)("div",{className:"sidebar "+(l?"open":""),children:[(0,lm.jsx)("div",{className:"logo",children:(0,lm.jsx)("div",{className:"logo-text",children:"HourlyGood"})}),(0,lm.jsxs)("nav",{children:[(0,lm.jsxs)("div",{className:"nav-link "+("landing"===o||"home"===o?"active":""),onClick:()=>T(e?"home":"landing"),children:[(0,lm.jsx)(lx,{})," ",(0,lm.jsx)("span",{children:"Home"})]}),(0,lm.jsxs)("div",{className:"nav-link "+("request"===o?"active":""),onClick:()=>T("request"),children:[(0,lm.jsx)(cx,{})," ",(0,lm.jsx)("span",{children:"Request Lesson"})]}),(0,lm.jsxs)("div",{className:"nav-link "+("marketplace"===o?"active":""),onClick:()=>T("marketplace"),children:[(0,lm.jsx)(ux,{})," ",(0,lm.jsx)("span",{children:"Skill Marketplace"})]}),(0,lm.jsxs)("div",{className:"nav-link "+("lessons"===o?"active":""),onClick:()=>T("lessons"),children:[(0,lm.jsx)(dx,{})," ",(0,lm.jsx)("span",{children:"My Lessons"})]}),e&&(0,lm.jsxs)(lm.Fragment,{children:[(0,lm.jsxs)("div",{className:"nav-link "+("chat"===o?"active":""),onClick:()=>T("chat"),children:[(0,lm.jsx)(px,{})," ",(0,lm.jsx)("span",{children:"Messages"})]}),(0,lm.jsxs)("div",{className:"nav-link "+("profile"===o?"active":""),onClick:()=>T("profile"),children:[(0,lm.jsx)(hx,{})," ",(0,lm.jsx)("span",{children:"My Profile"})]}),(0,lm.jsxs)("div",{className:"nav-link",onClick:()=>{p(!0),c(!1),setTimeout((()=>{t(),p(!1)}),2e3)},style:{marginTop:"20px",borderTop:"1px solid #333",paddingTop:"20px"},children:[(0,lm.jsx)(gx,{})," ",(0,lm.jsx)("span",{children:"Logout"})]})]}),!e&&(0,lm.jsxs)("div",{className:"nav-link "+("login"===o?"active":""),onClick:()=>T("login"),children:[(0,lm.jsx)(fx,{})," ",(0,lm.jsx)("span",{children:"Login/Signup"})]})]}),e&&(0,lm.jsxs)("div",{style:{padding:"20px",marginTop:"20px",borderTop:"1px solid #333"},children:[(0,lm.jsx)("div",{style:{fontSize:"14px",color:"#aaa",marginBottom:"5px"},children:"Time Credits"}),(0,lm.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"#252525",padding:"10px",borderRadius:"8px"},children:[(0,lm.jsx)("div",{style:{width:"30px",height:"30px",borderRadius:"50%",background:"var(--primary)",display:"flex",alignItems:"center",justifyContent:"center",color:"black",fontWeight:"bold"},children:v}),(0,lm.jsx)("div",{style:{color:"#fff",fontWeight:"500"},children:1===v?"1 Hour":`${v} Hours`})]})]})]}),(0,lm.jsxs)("div",{className:"main-content",children:[h&&(0,lm.jsx)("div",{className:"logout-message",children:(0,lm.jsxs)("div",{className:"logout-message-content",children:[(0,lm.jsx)("div",{style:{fontSize:"50px",marginBottom:"10px"},children:"\ud83d\udc4b"}),(0,lm.jsx)("div",{children:"Logging you out..."})]})}),k&&(0,lm.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,lm.jsxs)("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"20px",padding:"2rem",textAlign:"center",boxShadow:"0 0 30px rgba(255, 215, 0, 0.7)",maxWidth:"90%",width:"400px",position:"relative",overflow:"hidden"},children:[S>=1&&(0,lm.jsxs)("div",{style:{opacity:1===S?1:.3,transition:"opacity 0.5s ease",marginBottom:"1.5rem"},children:[(0,lm.jsx)("div",{style:{fontSize:"5rem",marginBottom:"1rem"},children:"\ud83c\udf89"}),(0,lm.jsx)("h1",{style:{color:"white",fontSize:"2rem",margin:"0.5rem 0"},children:"Welcome to HourlyGood!"})]}),S>=2&&(0,lm.jsx)("div",{style:{opacity:2===S?1:.3,transition:"opacity 0.5s ease",marginBottom:"1.5rem"},children:(0,lm.jsx)("div",{style:{backgroundColor:"var(--primary)",padding:"1rem 2rem",borderRadius:"50px",margin:"1.5rem auto",display:"inline-block",boxShadow:"0 0 20px var(--primary)",animation:"pulse 1s infinite"},children:(0,lm.jsx)("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"black"},children:"+2 Time Credits"})})}),S>=3&&(0,lm.jsxs)("div",{style:{opacity:3===S?1:.3,transition:"opacity 0.5s ease"},children:[(0,lm.jsx)("p",{style:{color:"white",fontSize:"1.2rem",margin:"1rem 0"},children:"Your signup bonus has been added!"}),(0,lm.jsx)("p",{style:{color:"#aaa",fontSize:"1rem"},children:"Start exploring now..."})]})]})}),e&&(0,lm.jsx)(sx,{}),w?(0,lm.jsxs)("div",{className:"loading-container",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"80vh",textAlign:"center"},children:[(0,lm.jsx)("div",{style:{width:"60px",height:"60px",borderRadius:"50%",border:"4px solid rgba(255, 143, 0, 0.1)",borderTopColor:"var(--primary)",animation:"spin 1s infinite linear"}}),(0,lm.jsx)("div",{style:{marginTop:"20px",color:"#aaa",fontSize:"16px"},children:"Loading..."})]}):(0,lm.jsxs)(lm.Fragment,{children:["landing"===o&&!e&&(0,lm.jsx)(hm,{setPage:T}),"home"===o&&e&&(0,lm.jsx)(hm,{setPage:T}),"request"===o&&(0,lm.jsx)(mm,{setPage:T,pageParams:f}),"marketplace"===o&&(0,lm.jsx)(bm,{setPage:T}),"lessons"===o&&(0,lm.jsx)(Sy,{setPage:T}),"profile"===o&&(0,lm.jsx)(tx,{setPage:T}),"login"===o&&!e&&(0,lm.jsx)(nx,{setPage:T}),"chat"===o&&(0,lm.jsx)(rx,{setPage:T,pageParams:f}),"viewProfile"===o&&(0,lm.jsx)(ix,{userId:m,setPage:T,onRequestLesson:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;T("request",{tutorId:e.id,tutorName:e.name,skillName:t})}})]})]}),h&&(0,lm.jsxs)("div",{style:{position:"fixed",top:"20px",right:"20px",background:"#252525",color:"white",padding:"15px 20px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",zIndex:1e3,animation:"fadeIn 0.3s",display:"flex",alignItems:"center",gap:"10px",border:"1px solid var(--primary)"},children:[(0,lm.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"var(--primary)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,lm.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),(0,lm.jsx)("polyline",{points:"16 17 21 12 16 7"}),(0,lm.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),(0,lm.jsx)("span",{children:"Successfully logged out. Redirecting..."})]})]})}const yx=function(){return(0,lm.jsx)(dm,{children:(0,lm.jsx)(gm,{children:(0,lm.jsx)(Xv,{children:(0,lm.jsx)(xm,{children:(0,lm.jsx)(mx,{})})})})})};s.createRoot(document.getElementById("root")).render((0,lm.jsx)(i.StrictMode,{children:(0,lm.jsx)(yx,{})}))})();
//# sourceMappingURL=main.9d247bd3.js.map